{"version":3,"sources":["utils/dataUtils.ts","mock/data/users.ts","mock/data/posts.ts","mock/utils/entityUtils.ts","mock/data/postLikes.ts","mock/data/postImages.ts","mock/data/postImageLikes.ts","mock/data/postComments.ts","mock/data/imageComments.ts","mock/data/userProfiles.ts","mock/services/authService.ts","mock/utils/paginationUtils.ts","mock/services/postService.ts","api/config.ts","api/postAPI.ts","redux/commonSlice.ts","components/PostList/postListSlice.ts","pages/Home/PostForm/postFormSlice.ts","pages/Home/PostForm/postFormSagas.ts","mock/data/followings.ts","mock/services/userService.ts","api/userAPI.ts","pages/Home/UserList/userListSlice.ts","pages/Home/UserList/userListSagas.ts","pages/Home/homeSagas.ts","mock/services/userProfileService.ts","api/userProfileAPI.ts","pages/Profile/ProfileSections/FollowersSection/followersSectionSlice.ts","pages/Profile/ProfileSections/FollowingsSection/followingsSectionSlice.ts","pages/Profile/profileSlice.ts","pages/Profile/ProfileSections/FollowersSection/followersSectionSagas.ts","pages/Profile/ProfileSections/FollowingsSection/followingsSectionSagas.ts","pages/Profile/profileSagas.ts","pages/ProfileEditor/profileEditorSlice.ts","pages/ProfileEditor/profileEditorSagas.ts","api/authAPI.ts","pages/Login/loginSlice.ts","pages/Login/loginSagas.ts","pages/Registration/registrationSlice.ts","pages/Registration/registrationSagas.ts","redux/commonSagas.ts","components/PostList/postListSagas.ts","redux/rootSaga.ts","pages/Home/homeSlice.ts","redux/rootReducer.ts","redux/store.tsx","components/NavLink/useStyles.ts","components/NavLink/NavLink.tsx","hooks/useAppDispatch.ts","hooks/useAppSelector.ts","components/Avatar/Avatar.tsx","utils/stringUtils.ts","utils/userUtils.ts","assets/logo.png","components/Header/Logo/useStyles.ts","components/Header/Logo/Logo.tsx","components/Header/useStyles.ts","components/Header/Header.tsx","components/Buttons/DeleteButton/DeleteButton.tsx","components/PostList/PostInfo/useStyles.ts","components/PostList/PostInfo/PostInfo.tsx","components/Buttons/LikeButton/useStyles.ts","components/Buttons/LikeButton/LikeButton.tsx","components/Buttons/ShareButton/useStyles.ts","components/Buttons/ShareButton/ShareButton.tsx","components/PostList/PostActivities/PostActivities.tsx","components/PostList/PostComment/PostComment.tsx","components/PostList/PostCommentForm/useStyles.ts","components/PostList/PostCommentForm/PostCommentForm.tsx","components/PostList/PostCommentList/PostCommentList.tsx","components/ImageGrid/ImageGrid.tsx","components/Slider/useStyles.ts","components/Slider/Navigation/useStyles.ts","components/Slider/Navigation/Navigation.tsx","components/Slider/Slider.tsx","components/PostList/ImageActivities/ImageActivities.tsx","components/PostList/ImageInfo/useStyles.ts","components/PostList/ImageInfo/ImageInfo.tsx","components/PostList/ImageComment/ImageComment.tsx","components/PostList/ImageCommentList/ImageCommentList.tsx","components/PostList/ImageCommentForm/useStyles.ts","components/PostList/ImageCommentForm/ImageCommentForm.tsx","components/PostList/ImageViewer/useStyles.ts","components/PostList/ImageViewer/ImageViewer.tsx","components/PostList/PostAttachments/useStyles.ts","components/PostList/PostAttachments/PostAttachments.tsx","components/PostList/Post/Post.tsx","components/PostList/PostList.tsx","pages/Home/PostForm/UploadImage/useStyles.ts","pages/Home/PostForm/UploadImage/UploadImage.tsx","pages/Home/PostForm/UserInfo/UserInfo.tsx","pages/Home/PostForm/PostForm.tsx","components/Progress/Progress.tsx","pages/Home/UserList/UserList.tsx","components/PageProgress/PageProgress.tsx","pages/Profile/AdditionalInfo/useStyles.ts","pages/Profile/AdditionalInfo/AdditionalInfo.tsx","components/Buttons/EditButton/EditButton.tsx","pages/Profile/DeleteProfileDialog/DeleteProfileDialog.tsx","pages/Profile/MainInfo/useStyles.ts","pages/Profile/Status/Status.tsx","pages/Profile/MainInfo/FollowButton/FollowButton.tsx","pages/Profile/MainInfo/MainInfo.tsx","pages/Profile/Status/ViewStatus/ViewStatus.tsx","pages/Profile/Status/EditStatus/EditStatus.tsx","components/TabPanel/TabPanel.tsx","pages/Profile/ProfileSections/FollowingsSection/Following/FollowButton/FollowButton.tsx","pages/Profile/ProfileSections/FollowingsSection/Following/useStyles.ts","pages/Profile/ProfileSections/FollowingsSection/Following/Following.tsx","pages/Profile/ProfileSections/FollowingsSection/FollowingList/FollowingList.tsx","pages/Profile/ProfileSections/FollowingsSection/FollowingsSearch/FollowingsSearch.tsx","pages/Profile/ProfileSections/FollowingsSection/FollowingsSection.tsx","pages/Profile/ProfileSections/FollowersSection/Follower/useStyles.ts","pages/Profile/ProfileSections/FollowersSection/Follower/Follower.tsx","pages/Profile/ProfileSections/FollowersSection/FollowerList/FollowerList.tsx","pages/Profile/ProfileSections/FollowersSection/FollowersSearch/FollowersSearch.tsx","pages/Profile/ProfileSections/FollowersSection/FollowersSection.tsx","pages/Profile/ProfileSections/PostsSection/PostsSection.tsx","pages/Profile/ProfileSections/ProfileSections.tsx","pages/Profile/Profile.tsx","pages/ProfileEditor/Title/Title.tsx","pages/ProfileEditor/useStyles.ts","pages/ProfileEditor/ProfileEditor.tsx","components/Copyright/Copyright.tsx","components/PasswordField/PasswordField.tsx","pages/Login/useStyles.ts","pages/Login/Links/useStyles.ts","pages/Login/Links/Links.tsx","pages/Login/Login.tsx","pages/Registration/useStyles.ts","pages/Registration/Registration.tsx","pages/NotFound/useStyles.ts","routes.ts","pages/Home/Home.tsx","pages/NotFound/NotFound.tsx","components/ProtectedRoute/ProtectedRoute.tsx","App.tsx","index.tsx"],"names":["normalize","entities","idSelector","Object","values","reduce","prev","cur","createUser","id","email","faker","internet","password","firstName","name","lastName","avatarUrl","avatar","users","map","x","posts","datatype","uuid","authorId","body","lorem","paragraphs","createDate","date","recent","toString","composeKey","keys","join","postId","userId","postImages","url","image","imageId","text","words","userProfiles","dateOfBirth","past","toISOString","status","paragraph","about","userProfilesById","userProfilesByUserId","currentUser","getCurrentUser","registerUser","vm","some","errors","user","profile","login","find","logout","toPagedResponse","items","pagination","itemsPerPage","currentPage","fromEnd","reverse","totalItems","length","Math","abs","totalPages","ceil","start","max","min","end","data","slice","pageSize","getAll","filter","sort","a","b","Date","mapPost","getById","getImages","mapImage","getComments","postComments","mapPostComment","getImageComments","imageComments","mapImageComment","createPost","post","images","forEach","createComment","comment","commentId","createImageComment","deletePost","deleteComment","deleteImageComment","addLike","postLikes","removeLike","addImageLike","postImageLikes","removeImageLike","authorFirstName","authorLastName","authorAvatarUrl","liked","likeCount","l","shareCount","shared","config","delayMs","Promise","resolve","setTimeout","postService","createSlice","initialState","auth","reducers","setUser","state","payload","actions","fetchUser","createAction","getUser","common","getSelf","postAdapter","createEntityAdapter","selectId","info","sortComparer","imageAdapter","commentAdapter","imageCommentAdapter","loaded","getInitialState","initPost","selectedImageIndex","comments","addPost","addOne","sharePost","shareImage","action","togglePostLikeStarted","toggleImageLikeStarted","setSelectedImage","index","fetchPosts","fetchPostsSucceed","response","setAll","fetchPostImagesSucceed","fetchImageCommentsSucceed","fetchMoreImageComments","fetchPostCommentsSucceed","fetchMorePostComments","createPostCommentSucceed","createImageCommentSucceed","deletePostSucceed","removeOne","reset","fetchPostImages","fetchPostComments","fetchImageComments","createPostComment","deletePostComment","togglePostLike","toggleImageLike","postList","getPostIds","ids","getPostsPagination","getPostById","getPostInfo","getSelectedImageIndex","getPostCommentsState","getPostCommentById","getPostCommentsPagination","getImagesState","getImageById","getImageInfo","getImageCommentsState","getImageCommentById","getImageCommentsPagination","getLoaded","isSubmitting","createPostSucceed","getIsSubmitting","home","postForm","watchCreatePost","postFormSagas","call","postAPI","newPost","put","postListActions","takeEvery","type","all","followerId","mapUser","getFollowings","followings","mapFollowing","getFollowers","mapFollower","getProfile","isCurrentUserFollow","search","pattern","regex","RegExp","toLocaleLowerCase","test","searchFollowings","searchFollowers","createFollowing","following","deleteFollowing","deleteFollower","userService","loading","searchText","setSearchText","searchStarted","searchSucceed","changeSearchText","searchUsers","userList","getLoading","getSearchText","getUsers","watchChangeSearchText","watchSearchUsers","userListSagas","delay","takeLatest","select","userAPI","rootSaga","mapProfile","updateProfile","dto","updateStatus","deleteProfile","entries","key","value","includes","likeId","like","userProfileService","followerAdapter","followers","searchFollowersSucceed","blocked","blockFollower","fetchFollowers","fetchFollowersSucceed","followersSection","getFollowerIds","getFollower","followingAdapter","searchFollowingsSucceed","isFollow","toggleFollow","fetchFollowings","fetchFollowingsSucceed","followingsSection","getFollowingIds","getFollowing","followingId","getIsFollow","setStatus","fetchProfile","fetchProfileSucceed","toggleFollowProfile","getIsCurrentUserProfile","reducer","combineReducers","followingsSectionReducer","followersSectionReducer","watchFetchFollowers","watchBlockFollower","followersSectionSagas","watchFetchFollowings","watchToggleFollow","followingsSectionSaga","watchFetchProfile","watchSetStatus","watchDeleteProfile","toggleProfileFollow","watchToggleFollowProfile","profileSagas","userProfileAPI","commonActions","followingsSectionSagas","submitted","saveProfile","saveProfileSucceed","profileEditor","getSubmitted","watchProfile","watchSaveProfile","profileEditorSagas","authService","loginSucceed","loginFailed","getErrors","watchLogin","watchLogout","loginSagas","authAPI","isSuccess","registerUserSucceed","registerUserFailed","registration","watchRegisterUser","registrationSagas","watchFetchUser","commonSagas","watchFetchPosts","watchFetchPostImages","watchFetchPostComments","watchFetchMorePostComments","watchFetchImageComments","watchFetchMoreImageComments","watchCreatePostComment","watchDeletePostComment","watchCreateImageComment","watchDeleteImageComment","watchDeletePost","watchTogglePostLike","watchToggleImageLike","postListSagas","homeSagas","postFormReducer","userListReducer","sagaMiddleware","createSagaMiddleware","store","configureStore","middleware","getDefaultMiddleware","concat","rootReducer","devTools","process","run","useStyles","makeStyles","createStyles","link","textDecoration","color","NavLink","props","classes","className","useAppDispatch","useDispatch","useAppSelector","useSelector","Avatar","PhotoCameraOutlined","capitalizeFirstLetter","charAt","toUpperCase","toLowerCase","wrap","symbolCount","getUserName","trim","theme","logo","width","spacing","height","objectFit","Logo","to","src","alt","icon","fill","palette","white","HideOnScroll","children","trigger","useScrollTrigger","Slide","appear","direction","in","Header","dispatch","AppBar","Container","maxWidth","Toolbar","Box","flexGrow","display","alignItems","Typography","ml","IconButton","onClick","loginActions","DeleteButton","PostInfo","isCurrentUserPost","getIsCurrentUserPost","userName","justifyContent","flexDirection","Link","variant","moment","fromNow","badge","background","paper","backgroundColor","red","border","padding","LikeButton","active","Badge","badgeContent","Favorite","FavoriteBorder","teal","ShareButton","Chat","ChatOutlined","PostActivities","PostComment","isCurrentUserComment","getIsCurrentUserComment","authorName","style","wordBreak","size","form","initialValues","validationSchema","yup","required","PostCommentForm","inputRef","React","useRef","useState","isButtonsVisible","setIsButtonsVisible","validateOnChange","onSubmit","resetForm","setSubmitting","current","blur","handleBlur","handleChange","autoComplete","TextField","placeholder","onFocus","onBlur","onChange","fullWidth","Collapse","mt","Button","disabled","PostCommentList","commentIds","getPostCommentIds","useEffect","my","cursor","ImageGrid","imagesCount","renderImage","elements","indexes","Array","from","_","Grid","item","xs","container","root","position","sliderView","zIndex","overflowY","slide","leftArrowBox","opacity","rightArrowBox","arrowIcon","Navigation","gotoPrev","gotoNext","ChevronLeftRounded","ChevronRightRounded","VirtualizeSwipeableViews","bindKeyboard","virtualize","SwipeableViews","Slider","slideCount","selectedIndex","renderSlide","onSlideChange","mod","slideClassName","onChangeIndex","slideRenderer","ImageActivities","ImageInfo","ImageComment","getIsCurrentUserImageComment","ImageCommentList","getImageCommentIds","canFetchMoreComments","Divider","component","p","ImageCommentForm","modal","content","breakpoints","md","outline","maxHeight","ImageViewer","selectedImage","hasAnyComment","getImageCommentsCount","Modal","onClose","open","disablePortal","px","py","PostAttachments","isImageSelected","Post","Paper","elevation","bgcolor","PostList","postIds","usePostList","history","useHistory","hasAnyPosts","listen","UploadImage","deleteDisabled","onDelete","top","right","UserInfo","align","PostForm","useFormik","formik","uploadDisabled","handleSubmit","onReset","handleReset","pt","rows","rowsMax","multiline","accept","event","file","target","files","match","setFieldValue","URL","createObjectURL","hidden","htmlFor","AddAPhoto","PlayCircleOutline","pb","splice","handleDeleteImage","Progress","CircularProgress","UserList","e","InputProps","endAdornment","List","ListItem","button","ListItemIcon","ListItemText","primary","PageProgress","typo","grey","AdditionalInfo","format","EditButton","DeleteProfileDialog","emailConfirm","setEmailConfirm","Dialog","DialogTitle","DialogContent","DialogContentText","label","margin","autoFocus","DialogActions","StatusMode","fontWeight","userEmail","FollowButton","textTransform","MainInfo","isCurrentUserProfile","setOpen","pathname","profileId","ViewStatus","onEdit","overflowWrap","EditStatus","setText","preventDefault","newStatus","inputProps","maxLength","Status","view","mode","setMode","edit","Error","TabPanel","Following","getFollowingInfo","FollowingList","followingIds","FollowingsSearch","FollowingsSection","Follower","follower","getFollowerInfo","getBlocked","FollowerList","followerIds","FollowersSearch","FollowersSection","PostsSection","Content","ProfileSections","currentTab","setCurrentTab","Tabs","tab","Tab","PageContent","showInfo","setShowInfo","Title","avatarIcon","today","notRequired","goBack","touched","dirty","isValid","startIcon","CloudUpload","helperText","error","InputLabelProps","shrink","Copyright","getFullYear","PasswordField","showPassword","setShowPassword","edge","Visibility","VisibilityOff","paddingTop","secondary","main","Links","rememberMe","passwordConfirm","oneOf","page","textAlign","title","fontSize","marginTop","routes","path","location","useLocation","isLoggedIn","replace","LockOutlined","Alert","severity","FormControlLabel","control","Checkbox","exact","push","flexWrap","protected","useParams","ProtectedRoute","routeProps","render","App","CssBaseline","route","i","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.39851f1a.chunk.js","sourcesContent":["export function normalize<TEntity>(\r\n  entities: TEntity[],\r\n  idSelector: (entry: TEntity) => string,\r\n): { [id: string]: TEntity } {\r\n  return Object.values(entities).reduce((prev, cur) => ({ ...prev, [idSelector(cur)]: cur }), {});\r\n}\r\n","import faker from \"faker\";\r\n\r\nimport { normalize } from \"utils/dataUtils\";\r\n\r\nexport interface User {\r\n  id: string;\r\n  email: string;\r\n  password: string;\r\n  firstName: string;\r\n  lastName: string;\r\n  avatarUrl?: string;\r\n}\r\n\r\nfunction createUser(id: string): User {\r\n  return {\r\n    id,\r\n    email: faker.internet.email(),\r\n    password: faker.internet.password(),\r\n    firstName: faker.name.firstName(),\r\n    lastName: faker.name.lastName(),\r\n    avatarUrl: faker.internet.avatar(),\r\n  };\r\n}\r\n\r\nconst ids = [\r\n  \"7782b084-5c63-48ca-9acb-046680ac20b5\",\r\n  \"43feb76c-e6c1-4122-9e40-ca58d6625969\",\r\n  \"d7fb53d4-a209-4375-9606-1a454f42afcc\",\r\n  \"39d7b906-ff67-4687-aec7-da1991741992\",\r\n  \"ceecb37b-dbee-4694-9bb7-dfdb02fb5c91\",\r\n  \"2680bd41-d69f-48dd-9105-bb7ad7e72441\",\r\n  \"79bb4631-3bd8-4f88-a5c1-8e6a2bb492c2\",\r\n  \"60d6dae7-e7c4-46b5-bbfd-282e6863377e\",\r\n  \"5a9912a1-e4bd-4337-ade9-ea88d1f71e33\",\r\n];\r\n\r\nexport const users: User[] = [\r\n  {\r\n    ...createUser(\"34421e5e-d2c0-419c-adfa-735cee28a660\"),\r\n    email: \"admin\",\r\n    password: \"admin\",\r\n  },\r\n  {\r\n    ...createUser(\"4edc58af-e778-499e-bd6a-88f2fbbc1025\"),\r\n    email: \"user\",\r\n    password: \"user\",\r\n  },\r\n  ...ids.map(createUser),\r\n];\r\n\r\nconst entities: { [id: string]: User } = normalize(users, (x) => x.id);\r\n\r\nexport default entities;\r\n","import faker from \"faker\";\r\n\r\nimport { normalize } from \"utils/dataUtils\";\r\n\r\nimport { users } from \"./users\";\r\n\r\nexport interface Post {\r\n  id: string;\r\n  authorId: string;\r\n  body: string;\r\n  createDate: string;\r\n}\r\n\r\nexport const posts: Post[] = [\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    authorId: users[0].id,\r\n    body: faker.lorem.paragraphs(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n];\r\n\r\nconst entities: { [id: string]: Post } = normalize(posts, (x) => x.id);\r\n\r\nexport default entities;\r\n","export function composeKey(...keys: string[]): string {\r\n  return keys.join(\"-\");\r\n}\r\n","import { normalize } from \"utils/dataUtils\";\r\nimport { composeKey } from \"mock/utils/entityUtils\";\r\n\r\nimport { posts } from \"./posts\";\r\nimport { users } from \"./users\";\r\n\r\nexport interface PostLike {\r\n  postId: string;\r\n  userId: string;\r\n}\r\n\r\nexport const postLikes: PostLike[] = [\r\n  {\r\n    postId: posts[0].id,\r\n    userId: users[1].id,\r\n  },\r\n  {\r\n    postId: posts[0].id,\r\n    userId: users[2].id,\r\n  },\r\n  {\r\n    postId: posts[0].id,\r\n    userId: users[3].id,\r\n  },\r\n  {\r\n    postId: posts[0].id,\r\n    userId: users[4].id,\r\n  },\r\n  {\r\n    postId: posts[0].id,\r\n    userId: users[5].id,\r\n  },\r\n];\r\n\r\nconst entities: { [compositeKey: string]: PostLike } = normalize(postLikes, (x) =>\r\n  composeKey(x.postId, x.userId),\r\n);\r\n\r\nexport default entities;\r\n","import faker from \"faker\";\r\n\r\nimport { normalize } from \"utils/dataUtils\";\r\n\r\nimport { posts } from \"./posts\";\r\n\r\nexport interface PostImage {\r\n  id: string;\r\n  postId: string;\r\n  url: string;\r\n  createDate: string;\r\n}\r\n\r\nexport const postImages: PostImage[] = [\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    url: faker.image.image(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    url: faker.image.image(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    url: faker.image.image(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    url: faker.image.image(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    url: faker.image.image(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    url: faker.image.image(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n];\r\n\r\nconst entities: { [id: string]: PostImage } = normalize(postImages, (x) => x.id);\r\n\r\nexport default entities;\r\n","import { normalize } from \"utils/dataUtils\";\r\nimport { composeKey } from \"mock/utils/entityUtils\";\r\n\r\nimport { postImages } from \"./postImages\";\r\nimport { users } from \"./users\";\r\n\r\nexport interface PostImageLikes {\r\n  imageId: string;\r\n  userId: string;\r\n}\r\n\r\nexport const postImageLikes: PostImageLikes[] = [\r\n  {\r\n    imageId: postImages[0].id,\r\n    userId: users[1].id,\r\n  },\r\n  {\r\n    imageId: postImages[0].id,\r\n    userId: users[2].id,\r\n  },\r\n  {\r\n    imageId: postImages[0].id,\r\n    userId: users[3].id,\r\n  },\r\n  {\r\n    imageId: postImages[0].id,\r\n    userId: users[4].id,\r\n  },\r\n  {\r\n    imageId: postImages[0].id,\r\n    userId: users[5].id,\r\n  },\r\n];\r\n\r\nconst entities: { [compositeKey: string]: PostImageLikes } = normalize(postImageLikes, (x) =>\r\n  composeKey(x.imageId, x.userId),\r\n);\r\n\r\nexport default entities;\r\n","import faker from \"faker\";\r\n\r\nimport { normalize } from \"utils/dataUtils\";\r\n\r\nimport { users } from \"./users\";\r\nimport { posts } from \"./posts\";\r\n\r\nexport interface PostComment {\r\n  id: string;\r\n  postId: string;\r\n  authorId: string;\r\n  text: string;\r\n  createDate: string;\r\n}\r\n\r\nexport const postComments: PostComment[] = [\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    authorId: users[1].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    authorId: users[2].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    authorId: users[3].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    authorId: users[4].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    authorId: users[5].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    authorId: users[0].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n];\r\n\r\nconst entities: { [id: string]: PostComment } = normalize(postComments, (x) => x.id);\r\n\r\nexport default entities;\r\n","import faker from \"faker\";\r\n\r\nimport { normalize } from \"utils/dataUtils\";\r\n\r\nimport { users } from \"./users\";\r\nimport { postImages } from \"./postImages\";\r\n\r\nexport interface ImageComment {\r\n  id: string;\r\n  imageId: string;\r\n  authorId: string;\r\n  text: string;\r\n  createDate: string;\r\n}\r\n\r\nexport const imageComments: ImageComment[] = [\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    imageId: postImages[0].id,\r\n    authorId: users[1].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    imageId: postImages[0].id,\r\n    authorId: users[2].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    imageId: postImages[0].id,\r\n    authorId: users[3].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    imageId: postImages[0].id,\r\n    authorId: users[4].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n];\r\n\r\nconst entities: { [id: string]: ImageComment } = normalize(imageComments, (x) => x.id);\r\n\r\nexport default entities;\r\n","import faker from \"faker\";\r\n\r\nimport { normalize } from \"utils/dataUtils\";\r\nimport { users } from \"mock/data/users\";\r\n\r\nexport interface UserProfile {\r\n  id: string;\r\n  userId: string;\r\n  dateOfBirth: string;\r\n  status?: string;\r\n  about?: string;\r\n}\r\n\r\nfunction createProfile(userId: string): UserProfile {\r\n  return {\r\n    id: faker.datatype.uuid(),\r\n    userId,\r\n    dateOfBirth: faker.date.past().toISOString(),\r\n    status: faker.lorem.paragraph(),\r\n    about: faker.lorem.paragraphs(),\r\n  };\r\n}\r\n\r\nexport const userProfiles: UserProfile[] = users.map(({ id }) => createProfile(id));\r\n\r\nexport const userProfilesById: { [id: string]: UserProfile } = normalize(userProfiles, (x) => x.id);\r\n\r\nexport const userProfilesByUserId: { [userId: string]: UserProfile } = normalize(\r\n  userProfiles,\r\n  (x) => x.userId,\r\n);\r\n","/* eslint-disable import/no-named-as-default */\r\nimport faker from \"faker\";\r\n\r\nimport type LoginVm from \"model/login/loginVm\";\r\nimport users, { User } from \"mock/data/users\";\r\nimport type RegistrationVm from \"model/registration/registrationVm\";\r\nimport { userProfilesById, userProfilesByUserId } from \"mock/data/userProfiles\";\r\nimport type RegistrationSuccessResponse from \"model/registration/RegistrationSuccessResponse\";\r\nimport type RegistrationErrorResponse from \"model/registration/RegistrationErrorResponse\";\r\nimport type LoginSuccessReponse from \"model/login/LoginSuccessResponse\";\r\nimport type LoginErrorResponse from \"model/login/LoginErrorResponse\";\r\n\r\nlet currentUser: User | null = null;\r\n\r\nexport function getCurrentUser(): User {\r\n  return currentUser!;\r\n}\r\n\r\nfunction registerUser(vm: RegistrationVm): RegistrationSuccessResponse | RegistrationErrorResponse {\r\n  if (Object.values(users).some((x) => x.email === vm.email)) {\r\n    return { errors: [\"Email already exists\"] };\r\n  }\r\n\r\n  const user = {\r\n    id: faker.datatype.uuid(),\r\n    email: vm.email,\r\n    firstName: vm.firstName,\r\n    lastName: vm.lastName,\r\n    password: vm.password,\r\n  };\r\n\r\n  const profile = {\r\n    id: faker.datatype.uuid(),\r\n    userId: user.id,\r\n    dateOfBirth: vm.dateOfBirth,\r\n  };\r\n\r\n  users[user.id] = user;\r\n  userProfilesById[profile.id] = profile;\r\n  userProfilesByUserId[user.id] = profile;\r\n\r\n  currentUser = user;\r\n\r\n  return { userId: user.id };\r\n}\r\n\r\nfunction login(vm: LoginVm): LoginSuccessReponse | LoginErrorResponse {\r\n  const user = Object.values(users).find((x) => x.email === vm.email && x.password === vm.password);\r\n\r\n  if (!user) {\r\n    return { errors: [\"Wrong email or password\"] };\r\n  }\r\n\r\n  currentUser = user;\r\n\r\n  return { userId: user.id };\r\n}\r\n\r\nfunction logout(): void {\r\n  currentUser = null;\r\n}\r\n\r\nexport default { registerUser, login, logout };\r\n","import type PagedRequest from \"model/pagination/PagedRequest\";\r\nimport type PagedResponse from \"model/pagination/PagedResponse\";\r\n\r\nexport function toPagedResponse<TDto>(\r\n  items: TDto[],\r\n  pagination: PagedRequest,\r\n): PagedResponse<TDto> {\r\n  let { itemsPerPage, currentPage } = pagination;\r\n\r\n  if (pagination.fromEnd) {\r\n    items = items.reverse();\r\n  }\r\n\r\n  const totalItems = items.length;\r\n\r\n  itemsPerPage = Math.abs(itemsPerPage);\r\n\r\n  const totalPages = Math.ceil(itemsPerPage ? totalItems / itemsPerPage : 0);\r\n\r\n  currentPage = Math.max(1, Math.min(totalPages, currentPage));\r\n\r\n  const start = (currentPage - 1) * itemsPerPage;\r\n  const end = start + itemsPerPage;\r\n  const data = items.slice(start, end);\r\n  const pageSize = data.length;\r\n\r\n  return {\r\n    currentPage,\r\n    totalPages,\r\n    pageSize,\r\n    totalItems,\r\n    data,\r\n  };\r\n}\r\n","import faker from \"faker\";\r\n\r\nimport posts, { Post } from \"mock/data/posts\";\r\nimport users from \"mock/data/users\";\r\nimport postLikes from \"mock/data/postLikes\";\r\nimport postImageLikes from \"mock/data/postImageLikes\";\r\nimport postImages, { PostImage } from \"mock/data/postImages\";\r\nimport postComments, { PostComment } from \"mock/data/postComments\";\r\nimport imageComments, { ImageComment } from \"mock/data/imageComments\";\r\nimport type PostDto from \"model/dto/post/PostDto\";\r\nimport type PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport type PostCommentDto from \"model/dto/postComment/PostCommentDto\";\r\nimport type PagedRequest from \"model/pagination/PagedRequest\";\r\nimport type PagedResponse from \"model/pagination/PagedResponse\";\r\nimport type PostCommentCreateDto from \"model/dto/postComment/PostCommentCreateDto\";\r\nimport { composeKey } from \"mock/utils/entityUtils\";\r\nimport type ImageCommentDto from \"model/dto/imageComment/ImageCommentDto\";\r\nimport type ImageCommentCreateDto from \"model/dto/imageComment/ImageCommentCreateDto\";\r\nimport type PostCreateDto from \"model/dto/post/PostCreateDto\";\r\nimport { getCurrentUser } from \"mock/services/authService\";\r\n\r\nimport { toPagedResponse } from \"../utils/paginationUtils\";\r\n\r\n// posts\r\nfunction getAll(authorId: string, pagination: PagedRequest): PagedResponse<PostDto> {\r\n  const data: PostDto[] = Object.values(posts)\r\n    .filter((x) => x.authorId === authorId)\r\n    .sort((a, b) => (new Date(a.createDate) < new Date(b.createDate) ? 1 : -1))\r\n    .map(mapPost);\r\n\r\n  return toPagedResponse(data, pagination);\r\n}\r\n\r\n// posts/:id\r\nfunction getById(id: string) {\r\n  return mapPost(posts[id]);\r\n}\r\n\r\n// posts/:id/images\r\nfunction getImages(id: string): PostImageDto[] {\r\n  return Object.values(postImages)\r\n    .filter((x) => x.postId === id)\r\n    .map(mapImage);\r\n}\r\n\r\n// posts/:id/comments\r\nfunction getComments(id: string, pagination: PagedRequest): PagedResponse<PostCommentDto> {\r\n  const data: PostCommentDto[] = Object.values(postComments)\r\n    .filter((x) => x.postId === id)\r\n    .sort((a, b) => (new Date(a.createDate) > new Date(b.createDate) ? 1 : -1))\r\n    .map(mapPostComment);\r\n\r\n  return toPagedResponse(data, pagination);\r\n}\r\n\r\n// posts\r\nfunction createPost(post: PostCreateDto) {\r\n  const postId = faker.datatype.uuid();\r\n\r\n  posts[postId] = {\r\n    id: postId,\r\n    authorId: getCurrentUser().id,\r\n    body: post.body,\r\n    createDate: new Date().toISOString(),\r\n  };\r\n\r\n  post.images.forEach((url) => {\r\n    const imageId = faker.datatype.uuid();\r\n    postImages[imageId] = {\r\n      id: imageId,\r\n      postId,\r\n      url,\r\n      createDate: new Date().toISOString(),\r\n    };\r\n  });\r\n\r\n  return postId;\r\n}\r\n\r\n// posts/:id/comments\r\nfunction createComment(id: string, comment: PostCommentCreateDto): string {\r\n  const commentId = faker.datatype.uuid();\r\n\r\n  postComments[commentId] = {\r\n    ...comment,\r\n    id: commentId,\r\n    postId: id,\r\n    authorId: getCurrentUser().id,\r\n    createDate: new Date().toISOString(),\r\n  };\r\n\r\n  return commentId;\r\n}\r\n\r\n// posts/comments/:commentId\r\nfunction deleteComment(commentId: string) {\r\n  delete postComments[commentId];\r\n}\r\n\r\n// posts/images/:imageId/comments\r\nfunction getImageComments(\r\n  imageId: string,\r\n  pagination: PagedRequest,\r\n): PagedResponse<ImageCommentDto> {\r\n  const data: ImageCommentDto[] = Object.values(imageComments)\r\n    .filter((x) => x.imageId === imageId)\r\n    .sort((a, b) => (new Date(a.createDate) > new Date(b.createDate) ? 1 : -1))\r\n    .map(mapImageComment);\r\n\r\n  return toPagedResponse(data, pagination);\r\n}\r\n\r\n// posts/:id/like\r\nfunction addLike(id: string) {\r\n  const userId = getCurrentUser().id;\r\n  postLikes[composeKey(id, userId)] = { postId: id, userId };\r\n}\r\n\r\n// posts/:id/like\r\nfunction removeLike(id: string) {\r\n  const userId = getCurrentUser().id;\r\n  delete postLikes[composeKey(id, userId)];\r\n}\r\n\r\n// posts/images/:imageId\r\nfunction addImageLike(imageId: string) {\r\n  const userId = getCurrentUser().id;\r\n  postImageLikes[composeKey(imageId, userId)] = { imageId, userId };\r\n}\r\n\r\n// posts/images/:imageId\r\nfunction removeImageLike(imageId: string) {\r\n  const userId = getCurrentUser().id;\r\n  delete postImageLikes[composeKey(imageId, userId)];\r\n}\r\n\r\n// posts/images/:imageId/comments\r\nfunction createImageComment(imageId: string, comment: ImageCommentCreateDto): string {\r\n  const id = faker.datatype.uuid();\r\n\r\n  imageComments[id] = {\r\n    ...comment,\r\n    id,\r\n    imageId,\r\n    authorId: getCurrentUser().id,\r\n    createDate: new Date().toISOString(),\r\n  };\r\n\r\n  return id;\r\n}\r\n\r\n// posts/images/comments/:commentId\r\nfunction deleteImageComment(commentId: string) {\r\n  delete imageComments[commentId];\r\n}\r\n\r\n// posts/:id\r\nfunction deletePost(id: string) {\r\n  delete posts[id]; // TODO: clear related entities\r\n}\r\n\r\nexport default {\r\n  getAll,\r\n  getById,\r\n  getImages,\r\n  getComments,\r\n  getImageComments,\r\n  createPost,\r\n  createComment,\r\n  createImageComment,\r\n  deletePost,\r\n  deleteComment,\r\n  deleteImageComment,\r\n  addLike,\r\n  removeLike,\r\n  addImageLike,\r\n  removeImageLike,\r\n};\r\n\r\nfunction mapPost(post: Post): PostDto {\r\n  return {\r\n    id: post.id,\r\n    authorId: post.authorId,\r\n    authorFirstName: users[post.authorId].firstName,\r\n    authorLastName: users[post.authorId].lastName,\r\n    authorAvatarUrl: users[post.authorId].avatarUrl,\r\n    body: post.body,\r\n    createDate: post.createDate,\r\n    liked: !!postLikes[composeKey(post.id, getCurrentUser().id)],\r\n    likeCount: Object.values(postLikes).filter((l) => l.postId === post.id).length,\r\n    shareCount: 0,\r\n    shared: false,\r\n  };\r\n}\r\n\r\nfunction mapPostComment(comment: PostComment): PostCommentDto {\r\n  return {\r\n    id: comment.id,\r\n    postId: comment.postId,\r\n    authorId: comment.authorId,\r\n    authorFirstName: users[comment.authorId].firstName,\r\n    authorLastName: users[comment.authorId].lastName,\r\n    avatarUrl: users[comment.authorId].avatarUrl,\r\n    text: comment.text,\r\n    createDate: comment.createDate,\r\n  };\r\n}\r\n\r\nfunction mapImageComment(comment: ImageComment): ImageCommentDto {\r\n  return {\r\n    id: comment.id,\r\n    imageId: comment.imageId,\r\n    authorId: comment.authorId,\r\n    authorFirstName: users[comment.authorId].firstName,\r\n    authorLastName: users[comment.authorId].lastName,\r\n    avatarUrl: users[comment.authorId].avatarUrl,\r\n    text: comment.text,\r\n    createDate: comment.createDate,\r\n  };\r\n}\r\n\r\nfunction mapImage(image: PostImage): PostImageDto {\r\n  return {\r\n    id: image.id,\r\n    postId: image.postId,\r\n    url: image.url,\r\n    createDate: image.createDate,\r\n    liked: !!postImageLikes[composeKey(image.id, posts[image.postId].authorId)],\r\n    likeCount: Object.values(postImageLikes).filter((l) => l.imageId === image.id).length,\r\n    shared: false,\r\n    shareCount: 0,\r\n  };\r\n}\r\n","const config = {\r\n  delayMs: 500,\r\n};\r\n\r\nexport default config;\r\n","import postService from \"mock/services/postService\";\r\nimport type ImageCommentDto from \"model/dto/imageComment/ImageCommentDto\";\r\nimport type PostCommentDto from \"model/dto/postComment/PostCommentDto\";\r\nimport type PostDto from \"model/dto/post/PostDto\";\r\nimport type PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport type ImageCommentCreateDto from \"model/dto/imageComment/ImageCommentCreateDto\";\r\nimport type PostCommentCreateDto from \"model/dto/postComment/PostCommentCreateDto\";\r\nimport type PostCreateDto from \"model/dto/post/PostCreateDto\";\r\nimport type PagedRequest from \"model/pagination/PagedRequest\";\r\nimport type PagedResponse from \"model/pagination/PagedResponse\";\r\n\r\nimport config from \"./config\";\r\n\r\nfunction getAll(authorId: string, pagination: PagedRequest): Promise<PagedResponse<PostDto>> {\r\n  return new Promise<PagedResponse<PostDto>>((resolve) =>\r\n    setTimeout(() => resolve(postService.getAll(authorId, pagination)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction getImages(postId: string): Promise<PostImageDto[]> {\r\n  return new Promise<PostImageDto[]>((resolve) =>\r\n    setTimeout(() => resolve(postService.getImages(postId)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction getComments(\r\n  postId: string,\r\n  pagination: PagedRequest,\r\n): Promise<PagedResponse<PostCommentDto>> {\r\n  return new Promise<PagedResponse<PostCommentDto>>((resolve) =>\r\n    setTimeout(() => resolve(postService.getComments(postId, pagination)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction getImageComments(\r\n  imageId: string,\r\n  pagination: PagedRequest,\r\n): Promise<PagedResponse<ImageCommentDto>> {\r\n  return new Promise<PagedResponse<ImageCommentDto>>((resolve) =>\r\n    setTimeout(() => resolve(postService.getImageComments(imageId, pagination)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction addLike(postId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      postService.addLike(postId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction removeLike(postId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      postService.removeLike(postId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction createComment(postId: string, comment: PostCommentCreateDto): Promise<string> {\r\n  return new Promise<string>((resolve) =>\r\n    setTimeout(() => {\r\n      resolve(postService.createComment(postId, comment));\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction deleteComment(commentId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      postService.deleteComment(commentId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction addImageLike(imageId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      postService.addImageLike(imageId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction removeImageLike(imageId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      postService.removeImageLike(imageId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction createImageComment(imageId: string, comment: ImageCommentCreateDto): Promise<string> {\r\n  return new Promise<string>((resolve) =>\r\n    setTimeout(() => {\r\n      resolve(postService.createImageComment(imageId, comment));\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction deleteImageComment(commentId: string): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      postService.deleteImageComment(commentId);\r\n      resolve();\r\n    }, config.delayMs);\r\n  });\r\n}\r\n\r\nfunction deletePost(id: string): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      postService.deletePost(id);\r\n      resolve();\r\n    }, config.delayMs);\r\n  });\r\n}\r\n\r\nfunction createPost(post: PostCreateDto): Promise<string> {\r\n  return new Promise<string>((resolve) =>\r\n    setTimeout(() => {\r\n      resolve(postService.createPost(post));\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction getById(id: string): Promise<PostDto> {\r\n  return new Promise<PostDto>((resolve) =>\r\n    setTimeout(() => {\r\n      resolve(postService.getById(id));\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nexport default {\r\n  getAll,\r\n  getById,\r\n  getImages,\r\n  getComments,\r\n  getImageComments,\r\n  createPost,\r\n  createComment,\r\n  createImageComment,\r\n  deletePost,\r\n  deleteComment,\r\n  deleteImageComment,\r\n  addLike,\r\n  removeLike,\r\n  addImageLike,\r\n  removeImageLike,\r\n};\r\n","import { createSlice, PayloadAction, createAction } from \"@reduxjs/toolkit\";\r\n\r\nimport UserDto from \"model/dto/user/UserDto\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"common\";\r\n\r\ninterface CommonState {\r\n  auth: {\r\n    user: UserDto | null;\r\n  };\r\n}\r\n\r\nconst initialState: CommonState = {\r\n  auth: {\r\n    user: null,\r\n  },\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    setUser(state, { payload }: PayloadAction<UserDto | null>) {\r\n      state.auth.user = payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n  fetchUser: createAction<string>(`${name}/fetchUser`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.common;\r\n\r\nexport const getUser = (state: AppState) => getSelf(state).auth.user!;\r\n\r\nexport default slice.reducer;\r\n","import {\r\n  createSlice,\r\n  createEntityAdapter,\r\n  EntityState,\r\n  PayloadAction,\r\n  createAction,\r\n} from \"@reduxjs/toolkit\";\r\n\r\nimport type { AppState } from \"redux/store\";\r\nimport type PostDto from \"model/dto/post/PostDto\";\r\nimport type PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport type PostCommentDto from \"model/dto/postComment/PostCommentDto\";\r\nimport type PagedResponse from \"model/pagination/PagedResponse\";\r\nimport type ImageCommentDto from \"model/dto/imageComment/ImageCommentDto\";\r\nimport type PostCommentCreateDto from \"model/dto/postComment/PostCommentCreateDto\";\r\nimport type ImageCommentCreateDto from \"model/dto/imageComment/ImageCommentCreateDto\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nconst name = \"components/postList\";\r\n\r\nconst postAdapter = createEntityAdapter<Post>({\r\n  selectId: (post) => post.info.id,\r\n  sortComparer: (a, b) => (new Date(a.info.createDate) < new Date(b.info.createDate) ? 1 : -1),\r\n});\r\n\r\nconst imageAdapter = createEntityAdapter<PostImage>({\r\n  selectId: (image) => image.info.id,\r\n});\r\n\r\nconst commentAdapter = createEntityAdapter<PostCommentDto>();\r\n\r\nconst imageCommentAdapter = createEntityAdapter<ImageCommentDto>();\r\n\r\nexport interface Pagination {\r\n  fromEnd: boolean;\r\n  currentPage: number;\r\n  totalPages: number;\r\n  pageSize: number;\r\n  totalItems: number;\r\n  itemsPerPage: number;\r\n}\r\n\r\ninterface PostImage {\r\n  info: PostImageDto;\r\n  comments: EntityState<ImageCommentDto> & {\r\n    pagination: Pagination;\r\n  };\r\n}\r\n\r\nexport interface Post {\r\n  info: PostDto;\r\n  selectedImageIndex: number | null;\r\n  images: EntityState<PostImage>;\r\n  comments: EntityState<PostCommentDto> & {\r\n    pagination: Pagination;\r\n  };\r\n}\r\n\r\nexport interface PostListState {\r\n  loaded: boolean;\r\n  posts: EntityState<Post> & {\r\n    pagination: Pagination;\r\n  };\r\n}\r\n\r\nconst initialState: PostListState = {\r\n  loaded: false,\r\n  posts: postAdapter.getInitialState({\r\n    pagination: {\r\n      fromEnd: false,\r\n      currentPage: 1,\r\n      totalPages: 0,\r\n      pageSize: 0,\r\n      totalItems: 0,\r\n      itemsPerPage: 5,\r\n    },\r\n  }),\r\n};\r\n\r\nfunction initPost(info: PostDto) {\r\n  return {\r\n    info,\r\n    selectedImageIndex: null,\r\n    images: imageAdapter.getInitialState(),\r\n    comments: commentAdapter.getInitialState({\r\n      pagination: {\r\n        fromEnd: false,\r\n        currentPage: 1,\r\n        totalPages: 0,\r\n        pageSize: 0,\r\n        totalItems: 0,\r\n        itemsPerPage: 3,\r\n      },\r\n    }),\r\n  };\r\n}\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    addPost(state, { payload: post }: PayloadAction<PostDto>) {\r\n      postAdapter.addOne(state.posts, initPost(post));\r\n    },\r\n    sharePost(state, { payload: postId }: PayloadAction<string>) {\r\n      const post = state.posts.entities[postId]?.info;\r\n      if (post) {\r\n        post.shared = !post.shared;\r\n\r\n        if (post.shared) {\r\n          post.shareCount++;\r\n        } else {\r\n          post.shareCount--;\r\n        }\r\n      }\r\n    },\r\n    shareImage(state, action: PayloadAction<{ postId: string; imageId: string }>) {\r\n      const { postId, imageId } = action.payload;\r\n\r\n      const image = state.posts.entities[postId]?.images.entities[imageId]?.info;\r\n\r\n      if (image) {\r\n        image.shared = !image.shared;\r\n\r\n        if (image.shared) {\r\n          image.shareCount++;\r\n        } else {\r\n          image.shareCount--;\r\n        }\r\n      }\r\n    },\r\n    togglePostLikeStarted(state, { payload: postId }: PayloadAction<string>) {\r\n      const post = state.posts.entities[postId]?.info;\r\n      if (post) {\r\n        post.liked = !post.liked;\r\n\r\n        if (post.liked) {\r\n          post.likeCount++;\r\n        } else {\r\n          post.likeCount--;\r\n        }\r\n      }\r\n    },\r\n    toggleImageLikeStarted(state, action: PayloadAction<{ postId: string; imageId: string }>) {\r\n      const { postId, imageId } = action.payload;\r\n\r\n      const image = state.posts.entities[postId]?.images.entities[imageId]?.info;\r\n\r\n      if (image) {\r\n        image.liked = !image.liked;\r\n\r\n        if (image.liked) {\r\n          image.likeCount++;\r\n        } else {\r\n          image.likeCount--;\r\n        }\r\n      }\r\n    },\r\n    setSelectedImage(state, action: PayloadAction<{ postId: string; index: number | null }>) {\r\n      const { postId, index } = action.payload;\r\n      const post = state.posts.entities[postId];\r\n      if (post) {\r\n        post.selectedImageIndex = index;\r\n      }\r\n    },\r\n    fetchPosts(state, action: PayloadAction<string>) {\r\n      state.loaded = false;\r\n    },\r\n    fetchPostsSucceed(state, { payload: response }: PayloadAction<PagedResponse<PostDto>>) {\r\n      state.loaded = true;\r\n\r\n      const { posts } = state;\r\n      const { data, ...pagination } = response;\r\n\r\n      postAdapter.setAll(posts, data.map(initPost));\r\n\r\n      posts.pagination = {\r\n        ...posts.pagination,\r\n        ...pagination,\r\n      };\r\n    },\r\n    fetchPostImagesSucceed(state, action: PayloadAction<{ postId: string; data: PostImageDto[] }>) {\r\n      const { postId, data } = action.payload;\r\n      const images = state.posts.entities[postId]?.images;\r\n      if (images) {\r\n        imageAdapter.setAll(\r\n          images,\r\n          data.map((info) => ({\r\n            info,\r\n            comments: imageCommentAdapter.getInitialState({\r\n              pagination: {\r\n                fromEnd: true,\r\n                currentPage: 1,\r\n                totalPages: 0,\r\n                pageSize: 0,\r\n                totalItems: 0,\r\n                itemsPerPage: 3,\r\n              },\r\n            }),\r\n          })),\r\n        );\r\n      }\r\n    },\r\n    fetchImageCommentsSucceed(\r\n      state,\r\n      action: PayloadAction<{\r\n        postId: string;\r\n        imageId: string;\r\n        response: PagedResponse<ImageCommentDto>;\r\n      }>,\r\n    ) {\r\n      const { postId, imageId, response } = action.payload;\r\n\r\n      const comments = state.posts.entities[postId]?.images.entities[imageId]?.comments;\r\n\r\n      if (comments) {\r\n        const { data, ...pagination } = response;\r\n        imageCommentAdapter.setAll(comments, data);\r\n        comments.pagination = {\r\n          ...comments.pagination,\r\n          ...pagination,\r\n        };\r\n      }\r\n    },\r\n    fetchMoreImageComments(state, action: PayloadAction<{ postId: string; imageId: string }>) {\r\n      const { postId, imageId } = action.payload;\r\n\r\n      // eslint-disable-next-line max-len\r\n      const pagination = state.posts.entities[postId]?.images.entities[imageId]?.comments.pagination;\r\n\r\n      if (pagination) {\r\n        pagination.itemsPerPage += 3;\r\n      }\r\n    },\r\n    fetchPostCommentsSucceed(\r\n      state,\r\n      action: PayloadAction<{\r\n        postId: string;\r\n        response: PagedResponse<PostCommentDto>;\r\n      }>,\r\n    ) {\r\n      const { postId, response } = action.payload;\r\n      const comments = state.posts.entities[postId]?.comments;\r\n      if (comments) {\r\n        const { data, ...pagination } = response;\r\n        commentAdapter.setAll(comments, data);\r\n        comments.pagination = {\r\n          ...comments.pagination,\r\n          ...pagination,\r\n        };\r\n      }\r\n    },\r\n    fetchMorePostComments(state, { payload: postId }: PayloadAction<string>) {\r\n      const pagination = state.posts.entities[postId]?.comments.pagination;\r\n      if (pagination) {\r\n        pagination.itemsPerPage += 3;\r\n      }\r\n    },\r\n    createPostCommentSucceed(\r\n      state,\r\n      action: PayloadAction<{\r\n        postId: string;\r\n        response: PagedResponse<PostCommentDto>;\r\n      }>,\r\n    ) {\r\n      const { postId, response } = action.payload;\r\n      const comments = state.posts.entities[postId]?.comments;\r\n      if (comments) {\r\n        const { data, ...pagination } = response;\r\n        commentAdapter.setAll(comments, data);\r\n        comments.pagination = {\r\n          ...comments.pagination,\r\n          ...pagination,\r\n          fromEnd: true,\r\n        };\r\n        if (comments.pagination.itemsPerPage < comments.pagination.totalItems) {\r\n          comments.pagination.itemsPerPage++;\r\n        }\r\n      }\r\n    },\r\n    createImageCommentSucceed(\r\n      state,\r\n      action: PayloadAction<{\r\n        postId: string;\r\n        imageId: string;\r\n        response: PagedResponse<ImageCommentDto>;\r\n      }>,\r\n    ) {\r\n      const { postId, imageId, response } = action.payload;\r\n\r\n      const comments = state.posts.entities[postId]?.images.entities[imageId]?.comments;\r\n\r\n      if (comments) {\r\n        const { data, ...pagination } = response;\r\n        imageCommentAdapter.setAll(comments, data);\r\n        comments.pagination = {\r\n          ...comments.pagination,\r\n          ...pagination,\r\n        };\r\n        if (comments.pagination.itemsPerPage < comments.pagination.totalItems) {\r\n          comments.pagination.itemsPerPage++;\r\n        }\r\n      }\r\n    },\r\n    deletePostSucceed(state, { payload: postId }: PayloadAction<string>) {\r\n      postAdapter.removeOne(state.posts, postId);\r\n    },\r\n    reset(state) {\r\n      state.loaded = false;\r\n      state.posts = initialState.posts;\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n\r\n  fetchPostImages: createAction<string>(`${name}/fetchPostImages`),\r\n\r\n  fetchPostComments: createAction<string>(`${name}/fetchPostComments`),\r\n\r\n  fetchMorePostComments: createAction<string>(`${name}/fetchMorePostComments`),\r\n\r\n  fetchImageComments: createAction<{\r\n    postId: string;\r\n    imageId: string;\r\n  }>(`${name}/fetchImageComments`),\r\n\r\n  fetchMoreImageComments: createAction<{\r\n    postId: string;\r\n    imageId: string;\r\n  }>(`${name}/fetchMoreImageComments`),\r\n\r\n  createPostComment: createAction<{\r\n    postId: string;\r\n    comment: PostCommentCreateDto;\r\n  }>(`${name}/createPostComment`),\r\n\r\n  deletePostComment: createAction<{\r\n    postId: string;\r\n    commentId: string;\r\n  }>(`${name}/deletePostComment`),\r\n\r\n  createImageComment: createAction<{\r\n    postId: string;\r\n    imageId: string;\r\n    comment: ImageCommentCreateDto;\r\n  }>(`${name}/createImageComment`),\r\n\r\n  deleteImageComment: createAction<{\r\n    postId: string;\r\n    imageId: string;\r\n    commentId: string;\r\n  }>(`${name}/deleteImageComment`),\r\n\r\n  deletePost: createAction<string>(`${name}/deletePost`),\r\n\r\n  togglePostLike: createAction<string>(`${name}/togglePostLike`),\r\n\r\n  toggleImageLike: createAction<{ postId: string; imageId: string }>(`${name}/togglePostImageLike`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.postList;\r\n\r\nexport const getPostsLoading = (state: AppState) => getSelf(state).loaded;\r\n\r\nexport const getPostIds = (state: AppState) => getSelf(state).posts.ids as string[];\r\n\r\nexport const getPostsPagination = (state: AppState) => getSelf(state).posts.pagination;\r\n\r\nexport const getPostById = (state: AppState, postId: string) =>\r\n  getSelf(state).posts.entities[postId]!;\r\n\r\nexport const getPostInfo = (state: AppState, postId: string) => getPostById(state, postId).info;\r\n\r\nexport const getSelectedImageIndex = (state: AppState, postId: string) =>\r\n  getPostById(state, postId).selectedImageIndex;\r\n\r\nconst getPostCommentsState = (state: AppState, postId: string) =>\r\n  getPostById(state, postId).comments;\r\n\r\nexport const getPostCommentById = (state: AppState, postId: string, commentId: string) =>\r\n  getPostCommentsState(state, postId).entities[commentId]!;\r\n\r\nexport const getIsCurrentUserComment = (state: AppState, postId: string, commentId: string) =>\r\n  getPostCommentById(state, postId, commentId).authorId === getUser(state).id;\r\n\r\nexport const getPostCommentIds = (state: AppState, postId: string) =>\r\n  [...getPostCommentsState(state, postId).ids] as string[];\r\n\r\nexport const getPostCommentsPagination = (state: AppState, postId: string) =>\r\n  getPostCommentsState(state, postId).pagination;\r\n\r\nconst getImagesState = (state: AppState, postId: string) => getPostById(state, postId).images;\r\n\r\nexport const getImageById = (state: AppState, postId: string, imageId: string) =>\r\n  getImagesState(state, postId).entities[imageId]!;\r\n\r\nexport const getImages = (state: AppState, postId: string) =>\r\n  Object.values(getImagesState(state, postId).entities).map((x) => x!.info);\r\n\r\nexport const getImageInfo = (state: AppState, postId: string, imageId: string) =>\r\n  getImageById(state, postId, imageId).info;\r\n\r\nconst getImageCommentsState = (state: AppState, postId: string, imageId: string) =>\r\n  getImageById(state, postId, imageId).comments;\r\n\r\nexport const getImageCommentById = (\r\n  state: AppState,\r\n  postId: string,\r\n  imageId: string,\r\n  commentId: string,\r\n) => getImageCommentsState(state, postId, imageId).entities[commentId]!;\r\n\r\nexport const getIsCurrentUserImageComment = (\r\n  state: AppState,\r\n  postId: string,\r\n  imageId: string,\r\n  commentId: string,\r\n) => getImageCommentById(state, postId, imageId, commentId).authorId === getUser(state).id;\r\n\r\nexport const getImageCommentIds = (state: AppState, postId: string, imageId: string) =>\r\n  [...getImageCommentsState(state, postId, imageId).ids] as string[];\r\n\r\nexport const getImageCommentsPagination = (state: AppState, postId: string, imageId: string) =>\r\n  getImageCommentsState(state, postId, imageId).pagination;\r\n\r\nexport const getImageCommentsCount = (state: AppState, postId: string, imageId: string) =>\r\n  getImageCommentsState(state, postId, imageId).ids.length;\r\n\r\nexport const getIsCurrentUserPost = (state: AppState, postId: string) =>\r\n  getPostInfo(state, postId).authorId === getUser(state).id;\r\n\r\nexport const getLoaded = (state: AppState) => getSelf(state).loaded;\r\n\r\nexport default slice.reducer;\r\n","import { Action, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport type PostCreateDto from \"model/dto/post/PostCreateDto\";\r\nimport type { AppState } from \"redux/store\";\r\n\r\nconst name = \"home/postForm\";\r\n\r\ninterface PostFormState {\r\n  isSubmitting: boolean;\r\n}\r\n\r\nconst initialState: PostFormState = {\r\n  isSubmitting: false,\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    createPost(state, action: PayloadAction<PostCreateDto>) {\r\n      state.isSubmitting = true;\r\n    },\r\n    createPostSucceed(state, action: Action) {\r\n      state.isSubmitting = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { actions } = slice;\r\n\r\nconst getSelf = (state: AppState) => state.home.postForm;\r\n\r\nexport const getIsSubmitting = (state: AppState) => getSelf(state).isSubmitting;\r\n\r\nexport default slice.reducer;\r\n","import { put, call, takeEvery, all } from \"redux-saga/effects\";\r\n\r\nimport postAPI from \"api/postAPI\";\r\nimport type PostDto from \"model/dto/post/PostDto\";\r\nimport { actions as postListActions } from \"components/PostList/postListSlice\";\r\n\r\nimport { actions } from \"./postFormSlice\";\r\n\r\nfunction* createPost({ payload: post }: ReturnType<typeof actions.createPost>) {\r\n  const id: string = yield call(postAPI.createPost, post);\r\n\r\n  const newPost: PostDto = yield call(postAPI.getById, id);\r\n\r\n  yield put(postListActions.addPost(newPost));\r\n\r\n  yield put(actions.createPostSucceed());\r\n}\r\n\r\nfunction* watchCreatePost() {\r\n  yield takeEvery(actions.createPost.type, createPost);\r\n}\r\n\r\nexport default function* postFormSagas() {\r\n  yield all([watchCreatePost()]);\r\n}\r\n","import { normalize } from \"utils/dataUtils\";\r\nimport { composeKey } from \"mock/utils/entityUtils\";\r\n\r\nimport { users } from \"./users\";\r\n\r\nexport interface Following {\r\n  userId: string;\r\n  followerId: string;\r\n}\r\n\r\nexport const followings: Following[] = [\r\n  {\r\n    userId: users[0].id,\r\n    followerId: users[1].id,\r\n  },\r\n  {\r\n    userId: users[0].id,\r\n    followerId: users[2].id,\r\n  },\r\n  {\r\n    userId: users[0].id,\r\n    followerId: users[3].id,\r\n  },\r\n  {\r\n    userId: users[0].id,\r\n    followerId: users[4].id,\r\n  },\r\n  {\r\n    userId: users[0].id,\r\n    followerId: users[5].id,\r\n  },\r\n  {\r\n    userId: users[5].id,\r\n    followerId: users[0].id,\r\n  },\r\n  {\r\n    userId: users[4].id,\r\n    followerId: users[0].id,\r\n  },\r\n  {\r\n    userId: users[3].id,\r\n    followerId: users[0].id,\r\n  },\r\n  {\r\n    userId: users[2].id,\r\n    followerId: users[0].id,\r\n  },\r\n];\r\n\r\nconst entities: { [compositeKey: string]: Following } = normalize(followings, (x) =>\r\n  composeKey(x.userId, x.followerId),\r\n);\r\n\r\nexport default entities;\r\n","import type UserDto from \"model/dto/user/UserDto\";\r\nimport users, { User } from \"mock/data/users\";\r\nimport type UserProfileDto from \"model/dto/userProfile/UserProfileDto\";\r\nimport { userProfilesByUserId } from \"mock/data/userProfiles\";\r\nimport followings, { Following } from \"mock/data/followings\";\r\nimport type FollowingDto from \"model/dto/following/FollowingDto\";\r\nimport type FollowerDto from \"model/dto/follower/FollowerDto\";\r\nimport type FollowingCreateDto from \"model/dto/following/FollowingCreateDto\";\r\nimport { composeKey } from \"mock/utils/entityUtils\";\r\n\r\nimport { getCurrentUser } from \"./authService\";\r\n\r\n// users/:id\r\nfunction getById(id: string): UserDto {\r\n  return mapUser(users[id]);\r\n}\r\n\r\n// users/:id/followings\r\nfunction getFollowings(id: string): FollowingDto[] {\r\n  return Object.values(followings)\r\n    .filter((x) => x.followerId === id)\r\n    .map(mapFollowing);\r\n}\r\n\r\n// users/:id/followers\r\nfunction getFollowers(id: string): FollowerDto[] {\r\n  return Object.values(followings)\r\n    .filter((x) => x.userId === id)\r\n    .map(mapFollower);\r\n}\r\n\r\n// users/:userId/profile\r\nfunction getProfile(userId: string): UserProfileDto {\r\n  const { email, firstName, lastName, avatarUrl } = users[userId];\r\n  const { id, dateOfBirth, status, about } = userProfilesByUserId[userId];\r\n  return {\r\n    id,\r\n    userId,\r\n    email,\r\n    firstName,\r\n    lastName,\r\n    avatarUrl,\r\n    dateOfBirth,\r\n    status,\r\n    about,\r\n    isCurrentUserFollow: !!followings[composeKey(userId, getCurrentUser().id)],\r\n  };\r\n}\r\n\r\n// users/search\r\nfunction search(pattern: string): UserDto[] {\r\n  const regex = new RegExp(pattern.toLocaleLowerCase());\r\n  return Object.values(users)\r\n    .filter(\r\n      (x) =>\r\n        regex.test(x.firstName.toLocaleLowerCase()) || regex.test(x.lastName.toLocaleLowerCase()),\r\n    )\r\n    .map(mapUser);\r\n}\r\n\r\n// users/:id/followings/search\r\nfunction searchFollowings(id: string, pattern: string): FollowingDto[] {\r\n  const regex = new RegExp(pattern.toLocaleLowerCase());\r\n  return Object.values(followings)\r\n    .filter(\r\n      (x) =>\r\n        x.followerId === id\r\n        && (regex.test(users[x.userId].firstName.toLocaleLowerCase())\r\n          || regex.test(users[x.userId].lastName.toLocaleLowerCase())),\r\n    )\r\n    .map(mapFollowing);\r\n}\r\n\r\n// users/:id/followers/search\r\nfunction searchFollowers(id: string, pattern: string): FollowerDto[] {\r\n  const regex = new RegExp(pattern.toLocaleLowerCase());\r\n  return Object.values(followings)\r\n    .filter(\r\n      (x) =>\r\n        x.userId === id\r\n        && (regex.test(users[x.followerId].firstName.toLocaleLowerCase())\r\n          || regex.test(users[x.followerId].lastName.toLocaleLowerCase())),\r\n    )\r\n    .map(mapFollower);\r\n}\r\n\r\n// users/followings\r\nfunction createFollowing(following: FollowingCreateDto) {\r\n  const { userId } = following;\r\n  const followerId = getCurrentUser().id;\r\n  followings[composeKey(userId, followerId)] = {\r\n    userId,\r\n    followerId,\r\n  };\r\n}\r\n\r\n// users/followings/:userId\r\nfunction deleteFollowing(userId: string) {\r\n  delete followings[composeKey(userId, getCurrentUser().id)];\r\n}\r\n\r\n// users/followers/:followerId\r\nfunction deleteFollower(followerId: string) {\r\n  delete followings[composeKey(getCurrentUser().id, followerId)];\r\n}\r\n\r\nexport default {\r\n  getById,\r\n  getFollowings,\r\n  getFollowers,\r\n  getProfile,\r\n  search,\r\n  searchFollowings,\r\n  searchFollowers,\r\n  createFollowing,\r\n  deleteFollowing,\r\n  deleteFollower,\r\n};\r\n\r\nfunction mapFollowing(following: Following): FollowingDto {\r\n  return {\r\n    userId: following.userId,\r\n    firstName: users[following.userId].firstName,\r\n    lastName: users[following.userId].lastName,\r\n    avatarUrl: users[following.userId].avatarUrl,\r\n    status: userProfilesByUserId[following.userId].status,\r\n  };\r\n}\r\n\r\nfunction mapFollower(following: Following): FollowerDto {\r\n  return {\r\n    followerId: following.followerId,\r\n    firstName: users[following.followerId].firstName,\r\n    lastName: users[following.followerId].lastName,\r\n    avatarUrl: users[following.followerId].avatarUrl,\r\n    status: userProfilesByUserId[following.followerId].status,\r\n  };\r\n}\r\n\r\nfunction mapUser(user: User): UserDto {\r\n  return {\r\n    id: user.id,\r\n    firstName: user.firstName,\r\n    lastName: user.lastName,\r\n    avatarUrl: user.avatarUrl,\r\n  };\r\n}\r\n","import userService from \"mock/services/userService\";\r\nimport type UserDto from \"model/dto/user/UserDto\";\r\nimport type UserProfileDto from \"model/dto/userProfile/UserProfileDto\";\r\nimport type FollowerDto from \"model/dto/follower/FollowerDto\";\r\nimport type FollowingCreateDto from \"model/dto/following/FollowingCreateDto\";\r\nimport type FollowingDto from \"model/dto/following/FollowingDto\";\r\n\r\nimport config from \"./config\";\r\n\r\nfunction getById(id: string): Promise<UserDto> {\r\n  return new Promise<UserDto>((resolve) =>\r\n    setTimeout(() => resolve(userService.getById(id)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction getFollowings(id: string): Promise<FollowingDto[]> {\r\n  return new Promise<FollowingDto[]>((resolve) =>\r\n    setTimeout(() => resolve(userService.getFollowings(id)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction getFollowers(id: string): Promise<FollowerDto[]> {\r\n  return new Promise<FollowerDto[]>((resolve) =>\r\n    setTimeout(() => resolve(userService.getFollowers(id)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction getProfile(id: string): Promise<UserProfileDto> {\r\n  return new Promise<UserProfileDto>((resolve) =>\r\n    setTimeout(() => resolve(userService.getProfile(id)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction search(pattern: string): Promise<UserDto[]> {\r\n  return new Promise<UserDto[]>((resolve) =>\r\n    setTimeout(() => resolve(userService.search(pattern)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction searchFollowings(id: string, pattern: string): Promise<FollowingDto[]> {\r\n  return new Promise<FollowingDto[]>((resolve) =>\r\n    setTimeout(() => resolve(userService.searchFollowings(id, pattern)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction searchFollowers(id: string, pattern: string): Promise<FollowerDto[]> {\r\n  return new Promise<FollowerDto[]>((resolve) =>\r\n    setTimeout(() => resolve(userService.searchFollowers(id, pattern)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction createFollowing(following: FollowingCreateDto): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      userService.createFollowing(following);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction deleteFollowing(userId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      userService.deleteFollowing(userId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction deleteFollower(followerId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      userService.deleteFollower(followerId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nexport default {\r\n  getById,\r\n  getFollowings,\r\n  getFollowers,\r\n  getProfile,\r\n  search,\r\n  searchFollowings,\r\n  searchFollowers,\r\n  createFollowing,\r\n  deleteFollowing,\r\n  deleteFollower,\r\n};\r\n","import { Action, createAction, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport type UserDto from \"model/dto/user/UserDto\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"home/userList\";\r\n\r\ninterface UserSearchState {\r\n  loading: boolean;\r\n  searchText: string;\r\n  users: UserDto[];\r\n}\r\n\r\nconst initialState: UserSearchState = {\r\n  loading: false,\r\n  searchText: \"\",\r\n  users: [],\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    setSearchText(state, { payload }: PayloadAction<string>) {\r\n      state.searchText = payload;\r\n    },\r\n    searchStarted(state, action: Action) {\r\n      state.loading = true;\r\n    },\r\n    searchSucceed(state, { payload }: PayloadAction<UserDto[]>) {\r\n      state.users = payload;\r\n      state.loading = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n  changeSearchText: createAction<string>(`${name}/changeSearchText`),\r\n  searchUsers: createAction(`${name}/searchUsers`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.home.userList;\r\n\r\nexport const getLoading = (state: AppState) => getSelf(state).loading;\r\n\r\nexport const getSearchText = (state: AppState) => getSelf(state).searchText;\r\n\r\nexport const getUsers = (state: AppState) => getSelf(state).users;\r\n\r\nexport default slice.reducer;\r\n","import { put, call, select, delay, takeLatest, all } from \"redux-saga/effects\";\r\n\r\nimport userAPI from \"api/userAPI\";\r\nimport type UserDto from \"model/dto/user/UserDto\";\r\n\r\nimport { actions, getSearchText } from \"./userListSlice\";\r\n\r\nfunction* changeSearchText({ payload: searchText }: ReturnType<typeof actions.changeSearchText>) {\r\n  yield put(actions.setSearchText(searchText));\r\n\r\n  yield delay(500);\r\n\r\n  yield put(actions.searchUsers());\r\n}\r\n\r\nfunction* watchChangeSearchText() {\r\n  yield takeLatest(actions.changeSearchText.type, changeSearchText);\r\n}\r\n\r\nfunction* searchUsers(action: ReturnType<typeof actions.searchUsers>) {\r\n  yield put(actions.searchStarted());\r\n\r\n  const searchText: string = yield select(getSearchText);\r\n\r\n  const users: UserDto[] = yield call(userAPI.search, searchText);\r\n\r\n  yield put(actions.searchSucceed(users));\r\n}\r\n\r\nfunction* watchSearchUsers() {\r\n  yield takeLatest(actions.searchUsers.type, searchUsers);\r\n}\r\n\r\nexport default function* userListSagas() {\r\n  yield all([watchChangeSearchText(), watchSearchUsers()]);\r\n}\r\n","import { all } from \"redux-saga/effects\";\r\n\r\nimport postFormSagas from \"./PostForm/postFormSagas\";\r\nimport userListSagas from \"./UserList/userListSagas\";\r\n\r\nexport default function* rootSaga() {\r\n  yield all([postFormSagas(), userListSagas()]);\r\n}\r\n","import followings from \"mock/data/followings\";\r\nimport imageComments from \"mock/data/imageComments\";\r\nimport postComments from \"mock/data/postComments\";\r\nimport postImageLikes from \"mock/data/postImageLikes\";\r\nimport postImages from \"mock/data/postImages\";\r\nimport postLikes from \"mock/data/postLikes\";\r\nimport posts from \"mock/data/posts\";\r\nimport { UserProfile, userProfilesById, userProfilesByUserId } from \"mock/data/userProfiles\";\r\nimport users from \"mock/data/users\";\r\nimport type UserProfileEditDto from \"model/dto/userProfile/UserProfileEditDto\";\r\nimport type UserProfileInfoDto from \"model/dto/userProfile/UserProfileInfoDto\";\r\n\r\nimport { getCurrentUser } from \"./authService\";\r\n\r\n// userProfiles/:id\r\nfunction getById(id: string): UserProfileInfoDto {\r\n  return mapProfile(userProfilesById[id]);\r\n}\r\n\r\n// userProfiles/:id\r\nfunction updateProfile(id: string, dto: UserProfileEditDto) {\r\n  const profile = userProfilesById[id];\r\n\r\n  if (profile.userId === getCurrentUser().id) {\r\n    profile.dateOfBirth = dto.dateOfBirth;\r\n    profile.about = dto.about;\r\n\r\n    const user = users[profile.userId];\r\n\r\n    user.firstName = dto.firstName;\r\n    user.lastName = dto.lastName;\r\n    user.avatarUrl = dto.avatarUrl;\r\n  }\r\n}\r\n\r\n// userProfiles/:id/status\r\nfunction updateStatus(id: string, text: string) {\r\n  userProfilesById[id].status = text;\r\n}\r\n\r\n// userProfiles/:id\r\nfunction deleteProfile(id: string) {\r\n  const { userId } = userProfilesById[id];\r\n  if (userId === getCurrentUser().id) {\r\n    delete users[userId];\r\n    delete userProfilesById[id];\r\n    delete userProfilesByUserId[userId];\r\n\r\n    Object.entries(followings).forEach(([key, value]) => {\r\n      if ([value.followerId, value.userId].includes(userId)) {\r\n        delete followings[key];\r\n      }\r\n    });\r\n\r\n    Object.entries(posts).forEach(([postId, post]) => {\r\n      if (post.authorId === userId) {\r\n        delete posts[postId];\r\n      }\r\n\r\n      Object.entries(postImages).forEach(([imageId, image]) => {\r\n        if (post.id === image.postId) {\r\n          delete postImages[imageId];\r\n        }\r\n\r\n        Object.entries(postImageLikes).forEach(([likeId, like]) => {\r\n          if (like.imageId === imageId || like.userId === userId) {\r\n            delete postImageLikes[likeId];\r\n          }\r\n        });\r\n\r\n        Object.entries(imageComments).forEach(([commentId, comment]) => {\r\n          if (comment.imageId === imageId || comment.authorId === userId) {\r\n            delete imageComments[commentId];\r\n          }\r\n        });\r\n      });\r\n\r\n      Object.entries(postLikes).forEach(([likeId, like]) => {\r\n        if (like.postId === postId || like.userId === userId) {\r\n          delete postLikes[likeId];\r\n        }\r\n      });\r\n\r\n      Object.entries(postComments).forEach(([commentId, comment]) => {\r\n        if (comment.postId === postId || comment.authorId === userId) {\r\n          delete postComments[commentId];\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport default {\r\n  getById,\r\n  updateProfile,\r\n  updateStatus,\r\n  deleteProfile,\r\n};\r\n\r\nfunction mapProfile(profile: UserProfile): UserProfileInfoDto {\r\n  const { id, userId, dateOfBirth, about } = profile;\r\n  const { firstName, lastName, avatarUrl } = users[userId];\r\n  return {\r\n    id,\r\n    userId,\r\n    firstName,\r\n    lastName,\r\n    avatarUrl,\r\n    dateOfBirth,\r\n    about,\r\n  };\r\n}\r\n","import userProfileService from \"mock/services/userProfileService\";\r\nimport type UserProfileEditDto from \"model/dto/userProfile/UserProfileEditDto\";\r\nimport type UserProfileInfoDto from \"model/dto/userProfile/UserProfileInfoDto\";\r\n\r\nimport config from \"./config\";\r\n\r\nfunction getById(id: string): Promise<UserProfileInfoDto> {\r\n  return new Promise<UserProfileInfoDto>((resolve) =>\r\n    setTimeout(() => resolve(userProfileService.getById(id)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction updateProfile(id: string, profile: UserProfileEditDto): Promise<void> {\r\n  return new Promise<void>((resolve) =>\r\n    setTimeout(() => {\r\n      userProfileService.updateProfile(id, profile);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction updateStatus(id: string, text: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      userProfileService.updateStatus(id, text);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction deleteProfile(id: string): Promise<void> {\r\n  return new Promise<void>((resolve) =>\r\n    setTimeout(() => {\r\n      userProfileService.deleteProfile(id);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nexport default {\r\n  getById,\r\n  updateProfile,\r\n  updateStatus,\r\n  deleteProfile,\r\n};\r\n","import {\r\n  Action,\r\n  createAction,\r\n  createEntityAdapter,\r\n  createSlice,\r\n  EntityState,\r\n  PayloadAction,\r\n} from \"@reduxjs/toolkit\";\r\n\r\nimport FollowerDto from \"model/dto/follower/FollowerDto\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"profile/followersSection\";\r\n\r\ninterface Follower {\r\n  info: FollowerDto;\r\n  blocked: boolean;\r\n}\r\n\r\nconst followerAdapter = createEntityAdapter<Follower>({\r\n  selectId: (x) => x.info.followerId,\r\n});\r\n\r\ninterface FollowersSectionState {\r\n  loading: boolean;\r\n  searchText: string;\r\n  followers: EntityState<Follower>;\r\n}\r\n\r\nconst initialState: FollowersSectionState = {\r\n  loading: false,\r\n  searchText: \"\",\r\n  followers: followerAdapter.getInitialState(),\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    setSearchText(state, { payload }: PayloadAction<string>) {\r\n      state.searchText = payload;\r\n    },\r\n    searchFollowers(state, action: Action) {\r\n      state.loading = true;\r\n    },\r\n    searchFollowersSucceed(state, { payload }: PayloadAction<FollowerDto[]>) {\r\n      state.loading = false;\r\n      followerAdapter.setAll(\r\n        state.followers,\r\n        payload.map((info) => ({ info, blocked: false })),\r\n      );\r\n    },\r\n    blockFollower(state, { payload: followerId }: PayloadAction<string>) {\r\n      const following = state.followers.entities[followerId];\r\n      if (following) {\r\n        following.blocked = true;\r\n      }\r\n    },\r\n    fetchFollowers(state, action: Action) {\r\n      state.loading = true;\r\n    },\r\n    fetchFollowersSucceed(state, { payload }: PayloadAction<FollowerDto[]>) {\r\n      state.loading = false;\r\n      followerAdapter.setAll(\r\n        state.followers,\r\n        payload.map((info) => ({\r\n          info,\r\n          blocked: false,\r\n        })),\r\n      );\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n  changeSearchText: createAction<string>(`${name}/changeSearchText`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.profile.followersSection;\r\n\r\nexport const getFollowerIds = (state: AppState) => getSelf(state).followers.ids as string[];\r\n\r\nconst getFollower = (state: AppState, followerId: string) =>\r\n  getSelf(state).followers.entities[followerId]!;\r\n\r\nexport const getFollowerInfo = (state: AppState, followerId: string) =>\r\n  getFollower(state, followerId).info;\r\n\r\nexport const getBlocked = (state: AppState, followerId: string) =>\r\n  getFollower(state, followerId).blocked;\r\n\r\nexport const getSearchText = (state: AppState) => getSelf(state).searchText;\r\n\r\nexport const getLoading = (state: AppState) => getSelf(state).loading;\r\n\r\nexport default slice.reducer;\r\n","import {\r\n  Action,\r\n  createAction,\r\n  createEntityAdapter,\r\n  createSlice,\r\n  EntityState,\r\n  PayloadAction,\r\n} from \"@reduxjs/toolkit\";\r\n\r\nimport type FollowingDto from \"model/dto/following/FollowingDto\";\r\nimport type { AppState } from \"redux/store\";\r\n\r\nconst name = \"profile/followingsSection\";\r\n\r\ninterface Following {\r\n  info: FollowingDto;\r\n  isFollow: boolean;\r\n}\r\n\r\nconst followingAdapter = createEntityAdapter<Following>({\r\n  selectId: (x) => x.info.userId,\r\n});\r\n\r\ninterface FollowingsSectionState {\r\n  loading: boolean;\r\n  searchText: string;\r\n  followings: EntityState<Following>;\r\n}\r\n\r\nconst initialState: FollowingsSectionState = {\r\n  loading: false,\r\n  searchText: \"\",\r\n  followings: followingAdapter.getInitialState(),\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    setSearchText(state, { payload }: PayloadAction<string>) {\r\n      state.searchText = payload;\r\n    },\r\n    searchFollowings(state, action: Action) {\r\n      state.loading = true;\r\n    },\r\n    searchFollowingsSucceed(state, { payload }: PayloadAction<FollowingDto[]>) {\r\n      state.loading = false;\r\n      followingAdapter.setAll(\r\n        state.followings,\r\n        payload.map((info) => ({ info, isFollow: true })),\r\n      );\r\n    },\r\n    toggleFollow(state, { payload: userId }: PayloadAction<string>) {\r\n      const following = state.followings.entities[userId];\r\n      if (following) {\r\n        following.isFollow = !following.isFollow;\r\n      }\r\n    },\r\n    fetchFollowings(state, action: Action) {\r\n      state.loading = true;\r\n    },\r\n    fetchFollowingsSucceed(state, { payload }: PayloadAction<FollowingDto[]>) {\r\n      state.loading = false;\r\n      followingAdapter.setAll(\r\n        state.followings,\r\n        payload.map((info) => ({\r\n          info,\r\n          isFollow: true,\r\n        })),\r\n      );\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n  changeSearchText: createAction<string>(`${name}/changeSearchText`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.profile.followingsSection;\r\n\r\nexport const getFollowingIds = (state: AppState) => getSelf(state).followings.ids as string[];\r\n\r\nconst getFollowing = (state: AppState, followingId: string) =>\r\n  getSelf(state).followings.entities[followingId]!;\r\n\r\nexport const getFollowingInfo = (state: AppState, followingId: string) =>\r\n  getFollowing(state, followingId).info;\r\n\r\nexport const getIsFollow = (state: AppState, userId: string) =>\r\n  getFollowing(state, userId).isFollow;\r\n\r\nexport const getSearchText = (state: AppState) => getSelf(state).searchText;\r\n\r\nexport const getLoading = (state: AppState) => getSelf(state).loading;\r\n\r\nexport default slice.reducer;\r\n","import {\r\n  Action,\r\n  combineReducers,\r\n  createAction,\r\n  createSlice,\r\n  PayloadAction,\r\n} from \"@reduxjs/toolkit\";\r\n\r\nimport type UserProfileDto from \"model/dto/userProfile/UserProfileDto\";\r\nimport { getUser } from \"redux/commonSlice\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nimport followersSectionReducer from \"./ProfileSections/FollowersSection/followersSectionSlice\";\r\nimport followingsSectionReducer from \"./ProfileSections/FollowingsSection/followingsSectionSlice\";\r\n\r\nconst name = \"profile\";\r\n\r\ninterface ProfileState {\r\n  loaded: boolean;\r\n  profile?: UserProfileDto;\r\n}\r\n\r\nconst initialState: ProfileState = {\r\n  loaded: false,\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    setStatus(state, { payload }: PayloadAction<string>) {\r\n      const { profile } = state;\r\n      if (profile) {\r\n        profile.status = payload;\r\n      }\r\n    },\r\n    fetchProfile(state, action: PayloadAction<string>) {\r\n      state.loaded = false;\r\n    },\r\n    fetchProfileSucceed(state, { payload }: PayloadAction<UserProfileDto>) {\r\n      state.loaded = true;\r\n      state.profile = payload;\r\n    },\r\n    toggleFollowProfile(state, action: Action) {\r\n      if (state.profile) {\r\n        state.profile.isCurrentUserFollow = !state.profile.isCurrentUserFollow;\r\n      }\r\n    },\r\n    reset(state, action: Action) {\r\n      state.loaded = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n  deleteProfile: createAction(`${name}/delete`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.profile.common;\r\n\r\nexport const getLoaded = (state: AppState) => getSelf(state).loaded;\r\n\r\nexport const getProfile = (state: AppState) => getSelf(state).profile!;\r\n\r\nexport const getIsCurrentUserProfile = (state: AppState) =>\r\n  getProfile(state).userId === getUser(state)?.id;\r\n\r\nconst reducer = combineReducers({\r\n  common: slice.reducer,\r\n  followingsSection: followingsSectionReducer,\r\n  followersSection: followersSectionReducer,\r\n});\r\n\r\nexport default reducer;\r\n","import { put, call, takeLatest, select, all, takeEvery, delay } from \"redux-saga/effects\";\r\n\r\nimport userAPI from \"api/userAPI\";\r\nimport type FollowerDto from \"model/dto/follower/FollowerDto\";\r\nimport { getProfile } from \"pages/Profile/profileSlice\";\r\n\r\nimport { actions } from \"./followersSectionSlice\";\r\n\r\nfunction* fetchFollowers(action: ReturnType<typeof actions.fetchFollowers>) {\r\n  const { userId } = getProfile(yield select());\r\n\r\n  const followers: FollowerDto[] = yield call(userAPI.getFollowers, userId);\r\n\r\n  yield put(actions.fetchFollowersSucceed(followers));\r\n}\r\n\r\nfunction* watchFetchFollowers() {\r\n  yield takeLatest(actions.fetchFollowers.type, fetchFollowers);\r\n}\r\n\r\nfunction* changeSearchText({ payload }: ReturnType<typeof actions.changeSearchText>) {\r\n  yield put(actions.setSearchText(payload));\r\n\r\n  yield delay(500);\r\n\r\n  yield put(actions.searchFollowers());\r\n\r\n  const { userId } = getProfile(yield select());\r\n\r\n  const followings: FollowerDto[] = yield call(userAPI.searchFollowers, userId, payload);\r\n\r\n  yield put(actions.searchFollowersSucceed(followings));\r\n}\r\n\r\nfunction* watchChangeSearchText() {\r\n  yield takeLatest(actions.changeSearchText.type, changeSearchText);\r\n}\r\n\r\nfunction* blockFollower({ payload: followerId }: ReturnType<typeof actions.blockFollower>) {\r\n  yield call(userAPI.deleteFollower, followerId);\r\n}\r\n\r\nfunction* watchBlockFollower() {\r\n  yield takeEvery(actions.blockFollower.type, blockFollower);\r\n}\r\n\r\nexport default function* followersSectionSagas() {\r\n  yield all([watchFetchFollowers(), watchChangeSearchText(), watchBlockFollower()]);\r\n}\r\n","import { put, call, takeLatest, select, all, delay } from \"redux-saga/effects\";\r\n\r\nimport userAPI from \"api/userAPI\";\r\nimport type FollowingDto from \"model/dto/following/FollowingDto\";\r\nimport { getProfile } from \"pages/Profile/profileSlice\";\r\n\r\nimport { actions, getIsFollow } from \"./followingsSectionSlice\";\r\n\r\nfunction* fetchFollowings(action: ReturnType<typeof actions.fetchFollowings>) {\r\n  const { userId } = getProfile(yield select());\r\n\r\n  const followings: FollowingDto[] = yield call(userAPI.getFollowings, userId);\r\n\r\n  yield put(actions.fetchFollowingsSucceed(followings));\r\n}\r\n\r\nfunction* watchFetchFollowings() {\r\n  yield takeLatest(actions.fetchFollowings.type, fetchFollowings);\r\n}\r\n\r\nfunction* toggleFollow({ payload: userId }: ReturnType<typeof actions.toggleFollow>) {\r\n  yield delay(300);\r\n\r\n  const isFollow = getIsFollow(yield select(), userId);\r\n\r\n  if (isFollow) {\r\n    yield call(userAPI.createFollowing, { userId });\r\n  } else {\r\n    yield call(userAPI.deleteFollowing, userId);\r\n  }\r\n}\r\n\r\nfunction* watchToggleFollow() {\r\n  yield takeLatest(actions.toggleFollow.type, toggleFollow);\r\n}\r\n\r\nfunction* changeSearchText({ payload }: ReturnType<typeof actions.changeSearchText>) {\r\n  yield put(actions.setSearchText(payload));\r\n\r\n  yield delay(500);\r\n\r\n  yield put(actions.searchFollowings());\r\n\r\n  const { userId } = getProfile(yield select());\r\n\r\n  const followings: FollowingDto[] = yield call(userAPI.searchFollowings, userId, payload);\r\n\r\n  yield put(actions.searchFollowingsSucceed(followings));\r\n}\r\n\r\nfunction* watchChangeSearchText() {\r\n  yield takeLatest(actions.changeSearchText.type, changeSearchText);\r\n}\r\n\r\nexport default function* followingsSectionSaga() {\r\n  yield all([watchFetchFollowings(), watchToggleFollow(), watchChangeSearchText()]);\r\n}\r\n","import { put, call, takeLatest, all, select, delay } from \"redux-saga/effects\";\r\n\r\nimport userAPI from \"api/userAPI\";\r\nimport userProfileAPI from \"api/userProfileAPI\";\r\nimport UserProfileDto from \"model/dto/userProfile/UserProfileDto\";\r\nimport { actions as commonActions } from \"redux/commonSlice\";\r\n\r\nimport { actions, getProfile } from \"./profileSlice\";\r\nimport followersSectionSagas from \"./ProfileSections/FollowersSection/followersSectionSagas\";\r\nimport followingsSectionSagas from \"./ProfileSections/FollowingsSection/followingsSectionSagas\";\r\n\r\nfunction* fetchProfile({ payload: userId }: ReturnType<typeof actions.fetchProfile>) {\r\n  const profile: UserProfileDto = yield call(userAPI.getProfile, userId);\r\n  yield put(actions.fetchProfileSucceed(profile));\r\n}\r\n\r\nfunction* watchFetchProfile() {\r\n  yield takeLatest(actions.fetchProfile.type, fetchProfile);\r\n}\r\n\r\nfunction* setStatus({ payload: text }: ReturnType<typeof actions.setStatus>) {\r\n  const { id } = getProfile(yield select());\r\n  yield call(userProfileAPI.updateStatus, id, text);\r\n}\r\n\r\nfunction* watchSetStatus() {\r\n  yield takeLatest(actions.setStatus.type, setStatus);\r\n}\r\n\r\nfunction* deleteProfile() {\r\n  const { id } = getProfile(yield select());\r\n  yield call(userProfileAPI.deleteProfile, id);\r\n  yield put(commonActions.setUser(null));\r\n}\r\n\r\nfunction* watchDeleteProfile() {\r\n  yield takeLatest(actions.deleteProfile.type, deleteProfile);\r\n}\r\n\r\nfunction* toggleProfileFollow() {\r\n  yield delay(500);\r\n\r\n  const { userId, isCurrentUserFollow } = getProfile(yield select());\r\n\r\n  if (isCurrentUserFollow) {\r\n    yield call(userAPI.createFollowing, { userId });\r\n  } else {\r\n    yield call(userAPI.deleteFollowing, userId);\r\n  }\r\n}\r\n\r\nfunction* watchToggleFollowProfile() {\r\n  yield takeLatest(actions.toggleFollowProfile.type, toggleProfileFollow);\r\n}\r\n\r\nexport default function* profileSagas() {\r\n  yield all([\r\n    watchFetchProfile(),\r\n    watchSetStatus(),\r\n    watchDeleteProfile(),\r\n    watchToggleFollowProfile(),\r\n    followingsSectionSagas(),\r\n    followersSectionSagas(),\r\n  ]);\r\n}\r\n","import { AnyAction, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport type UserProfileInfoDto from \"model/dto/userProfile/UserProfileInfoDto\";\r\nimport type UserProfileEditDto from \"model/dto/userProfile/UserProfileEditDto\";\r\nimport type { AppState } from \"redux/store\";\r\n\r\nconst name = \"profileEditor\";\r\n\r\ninterface ProfileEditorState {\r\n  loaded: boolean;\r\n  isSubmitting: boolean;\r\n  submitted: boolean;\r\n  profile: UserProfileInfoDto | null;\r\n}\r\n\r\nconst initialState: ProfileEditorState = {\r\n  loaded: false,\r\n  isSubmitting: false,\r\n  submitted: false,\r\n  profile: null,\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    fetchProfile(state, { payload }: PayloadAction<string>) {\r\n      state.loaded = false;\r\n    },\r\n    fetchProfileSucceed(state, { payload }: PayloadAction<UserProfileInfoDto>) {\r\n      state.loaded = true;\r\n      state.profile = payload;\r\n    },\r\n    saveProfile(state, action: PayloadAction<UserProfileEditDto>) {\r\n      state.isSubmitting = true;\r\n    },\r\n    saveProfileSucceed(state, action: AnyAction) {\r\n      state.isSubmitting = false;\r\n      state.submitted = true;\r\n    },\r\n    reset(state) {\r\n      state.submitted = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { actions } = slice;\r\n\r\nconst getSelf = (state: AppState) => state.profileEditor;\r\n\r\nexport const getLoaded = (state: AppState) => getSelf(state).loaded;\r\n\r\nexport const getProfile = (state: AppState) => getSelf(state).profile!;\r\n\r\nexport const getIsSubmitting = (state: AppState) => getSelf(state).isSubmitting;\r\n\r\nexport const getSubmitted = (state: AppState) => getSelf(state).submitted;\r\n\r\nexport default slice.reducer;\r\n","import { put, call, takeLatest, select, all } from \"redux-saga/effects\";\r\n\r\nimport userProfileAPI from \"api/userProfileAPI\";\r\nimport type UserProfileInfoDto from \"model/dto/userProfile/UserProfileInfoDto\";\r\nimport { actions as commonActions } from \"redux/commonSlice\";\r\n\r\nimport { actions, getProfile } from \"./profileEditorSlice\";\r\n\r\nfunction* fetchProfile({ payload: id }: ReturnType<typeof actions.fetchProfile>) {\r\n  const profile: UserProfileInfoDto = yield call(userProfileAPI.getById, id);\r\n  yield put(actions.fetchProfileSucceed(profile));\r\n}\r\n\r\nfunction* watchProfile() {\r\n  yield takeLatest(actions.fetchProfile.type, fetchProfile);\r\n}\r\n\r\nfunction* saveProfile({ payload: profile }: ReturnType<typeof actions.saveProfile>) {\r\n  const { id, userId } = yield select(getProfile);\r\n\r\n  yield call(userProfileAPI.updateProfile, id, profile);\r\n\r\n  yield put(commonActions.fetchUser(userId));\r\n\r\n  yield put(actions.saveProfileSucceed());\r\n}\r\n\r\nfunction* watchSaveProfile() {\r\n  yield takeLatest(actions.saveProfile.type, saveProfile);\r\n}\r\n\r\nexport default function* profileEditorSagas() {\r\n  yield all([watchProfile(), watchSaveProfile()]);\r\n}\r\n","import authService from \"mock/services/authService\";\r\nimport LoginErrorResponse from \"model/login/LoginErrorResponse\";\r\nimport LoginSuccessReponse from \"model/login/LoginSuccessResponse\";\r\nimport RegistrationErrorResponse from \"model/registration/RegistrationErrorResponse\";\r\nimport RegistrationSuccessResponse from \"model/registration/RegistrationSuccessResponse\";\r\nimport LoginVm from \"model/login/loginVm\";\r\nimport RegistrationVm from \"model/registration/registrationVm\";\r\n\r\nimport config from \"./config\";\r\n\r\nfunction registerUser(\r\n  vm: RegistrationVm,\r\n): Promise<RegistrationSuccessResponse | RegistrationErrorResponse> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve(authService.registerUser(vm));\r\n    }, config.delayMs);\r\n  });\r\n}\r\n\r\nfunction login(vm: LoginVm): Promise<LoginSuccessReponse | LoginErrorResponse> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve(authService.login(vm));\r\n    }, config.delayMs);\r\n  });\r\n}\r\n\r\nfunction logout(): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      authService.logout();\r\n      resolve();\r\n    }, config.delayMs);\r\n  });\r\n}\r\n\r\nexport default { registerUser, login, logout };\r\n","import { Action, createAction, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport type LoginVm from \"model/login/loginVm\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"login\";\r\n\r\ninterface LoginState {\r\n  isSubmitting: boolean;\r\n  errors: string[];\r\n}\r\n\r\nconst initialState: LoginState = {\r\n  isSubmitting: false,\r\n  errors: [],\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    login(state, action: PayloadAction<LoginVm>) {\r\n      state.isSubmitting = true;\r\n      state.errors = [];\r\n    },\r\n    loginSucceed(state, action: Action) {\r\n      state.isSubmitting = false;\r\n    },\r\n    loginFailed(state, { payload }: PayloadAction<string[]>) {\r\n      state.isSubmitting = false;\r\n      state.errors = payload;\r\n    },\r\n    reset(state) {\r\n      state.isSubmitting = false;\r\n      state.errors = [];\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n  logout: createAction(`${name}/logout`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.login;\r\n\r\nexport const getIsSubmitting = (state: AppState) => getSelf(state).isSubmitting;\r\n\r\nexport const getErrors = (state: AppState) => getSelf(state).errors;\r\n\r\nexport default slice.reducer;\r\n","import { put, call, takeLatest, all } from \"redux-saga/effects\";\r\n\r\nimport authAPI from \"api/authAPI\";\r\nimport type LoginErrorResponse from \"model/login/LoginErrorResponse\";\r\nimport type LoginSuccessReponse from \"model/login/LoginSuccessResponse\";\r\nimport { actions as commonActions } from \"redux/commonSlice\";\r\n\r\nimport { actions } from \"./loginSlice\";\r\n\r\nfunction* login({ payload: vm }: ReturnType<typeof actions.login>) {\r\n  const response: LoginSuccessReponse | LoginErrorResponse = yield call(authAPI.login, vm);\r\n\r\n  if (isSuccess(response)) {\r\n    yield put(commonActions.fetchUser(response.userId));\r\n  } else {\r\n    yield put(actions.loginFailed(response.errors));\r\n  }\r\n}\r\n\r\nfunction isSuccess(response: any): response is LoginSuccessReponse {\r\n  return \"userId\" in response;\r\n}\r\n\r\nfunction* watchLogin() {\r\n  yield takeLatest(actions.login.type, login);\r\n}\r\n\r\nfunction* logout() {\r\n  yield call(authAPI.logout);\r\n  yield put(commonActions.setUser(null));\r\n}\r\n\r\nfunction* watchLogout() {\r\n  yield takeLatest(actions.logout.type, logout);\r\n}\r\n\r\nexport default function* loginSagas() {\r\n  yield all([watchLogin(), watchLogout()]);\r\n}\r\n","import { Action, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport type RegistrationVm from \"model/registration/registrationVm\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"registration\";\r\n\r\ninterface RegistrationState {\r\n  isSubmitting: boolean;\r\n  errors: string[];\r\n}\r\n\r\nconst initialState: RegistrationState = {\r\n  isSubmitting: false,\r\n  errors: [],\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    registerUser(state, action: PayloadAction<RegistrationVm>) {\r\n      state.isSubmitting = true;\r\n      state.errors = [];\r\n    },\r\n    registerUserSucceed(state, action: Action) {\r\n      state.isSubmitting = false;\r\n    },\r\n    registerUserFailed(state, { payload }: PayloadAction<string[]>) {\r\n      state.isSubmitting = false;\r\n      state.errors = payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { actions } = slice;\r\n\r\nconst getSelf = (state: AppState) => state.registration;\r\n\r\nexport const getIsSubmitting = (state: AppState) => getSelf(state).isSubmitting;\r\n\r\nexport const getErrors = (state: AppState) => getSelf(state).errors;\r\n\r\nexport default slice.reducer;\r\n","import { put, call, takeLatest, select, all } from \"redux-saga/effects\";\r\n\r\nimport authAPI from \"api/authAPI\";\r\nimport type RegistrationErrorResponse from \"model/registration/RegistrationErrorResponse\";\r\nimport type RegistrationSuccessResponse from \"model/registration/RegistrationSuccessResponse\";\r\nimport { actions as commonActions } from \"redux/commonSlice\";\r\n\r\nimport { actions } from \"./registrationSlice\";\r\n\r\nfunction* registerUser({ payload }: ReturnType<typeof actions.registerUser>) {\r\n  const response: RegistrationSuccessResponse | RegistrationErrorResponse = yield call(\r\n    authAPI.registerUser,\r\n    payload,\r\n  );\r\n\r\n  if (isSuccess(response)) {\r\n    yield put(commonActions.fetchUser(response.userId));\r\n  } else {\r\n    yield put(actions.registerUserFailed(response.errors));\r\n  }\r\n}\r\n\r\nfunction* watchRegisterUser() {\r\n  yield takeLatest(actions.registerUser.type, registerUser);\r\n}\r\n\r\nfunction isSuccess(\r\n  response: RegistrationSuccessResponse | RegistrationErrorResponse,\r\n): response is RegistrationSuccessResponse {\r\n  return \"userId\" in response;\r\n}\r\n\r\nexport default function* registrationSagas() {\r\n  yield all([watchRegisterUser()]);\r\n}\r\n","import { put, call, takeLatest, all } from \"redux-saga/effects\";\r\n\r\nimport userAPI from \"api/userAPI\";\r\nimport UserDto from \"model/dto/user/UserDto\";\r\n\r\nimport { actions } from \"./commonSlice\";\r\n\r\nfunction* fetchUser({ payload: userId }: ReturnType<typeof actions.fetchUser>) {\r\n  const user: UserDto = yield call(userAPI.getById, userId);\r\n  yield put(actions.setUser(user));\r\n}\r\n\r\nfunction* watchFetchUser() {\r\n  yield takeLatest(actions.fetchUser.type, fetchUser);\r\n}\r\n\r\nexport default function* commonSagas() {\r\n  yield all([watchFetchUser()]);\r\n}\r\n","import { call, put, select, all, delay, takeLatest, takeEvery } from \"redux-saga/effects\";\r\nimport type { PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport type ImageCommentDto from \"model/dto/imageComment/ImageCommentDto\";\r\nimport type PostCommentDto from \"model/dto/postComment/PostCommentDto\";\r\nimport type PostDto from \"model/dto/post/PostDto\";\r\nimport type PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport type PagedResponse from \"model/pagination/PagedResponse\";\r\nimport postAPI from \"api/postAPI\";\r\n\r\nimport {\r\n  actions,\r\n  getPostsPagination,\r\n  getPostCommentsPagination,\r\n  getImageCommentsPagination,\r\n  getPostInfo,\r\n  getImageInfo,\r\n} from \"./postListSlice\";\r\n\r\nfunction* fetchPosts({ payload: userId }: ReturnType<typeof actions.fetchPosts>) {\r\n  const pagination = getPostsPagination(yield select());\r\n\r\n  const response: PagedResponse<PostDto> = yield call(postAPI.getAll, userId, pagination);\r\n\r\n  yield put(actions.fetchPostsSucceed(response));\r\n}\r\n\r\nfunction* watchFetchPosts() {\r\n  yield takeLatest(actions.fetchPosts.type, fetchPosts);\r\n}\r\n\r\nfunction* fetchPostImages({ payload: postId }: PayloadAction<string>) {\r\n  const data: PostImageDto[] = yield call(postAPI.getImages, postId);\r\n  yield put(actions.fetchPostImagesSucceed({ postId, data }));\r\n}\r\n\r\nfunction* watchFetchPostImages() {\r\n  yield takeEvery(actions.fetchPostImages.type, fetchPostImages);\r\n}\r\n\r\nfunction* fetchPostComments({ payload: postId }: ReturnType<typeof actions.fetchPostComments>) {\r\n  const pagination = getPostCommentsPagination(yield select(), postId);\r\n\r\n  const response: PagedResponse<PostCommentDto> = yield call(\r\n    postAPI.getComments,\r\n    postId,\r\n    pagination,\r\n  );\r\n\r\n  yield put(actions.fetchPostCommentsSucceed({ postId, response }));\r\n}\r\n\r\nfunction* watchFetchPostComments() {\r\n  yield takeEvery(actions.fetchPostComments.type, fetchPostComments);\r\n}\r\n\r\nfunction* fetchMorePostComments({\r\n  payload: postId,\r\n}: ReturnType<typeof actions.fetchMorePostComments>) {\r\n  yield put(actions.fetchPostComments(postId));\r\n}\r\n\r\nfunction* watchFetchMorePostComments() {\r\n  yield takeEvery(actions.fetchMorePostComments.type, fetchMorePostComments);\r\n}\r\n\r\nfunction* fetchImageComments(action: ReturnType<typeof actions.fetchImageComments>) {\r\n  const { postId, imageId } = action.payload;\r\n\r\n  const pagination = getImageCommentsPagination(yield select(), postId, imageId);\r\n\r\n  const response: PagedResponse<ImageCommentDto> = yield call(\r\n    postAPI.getImageComments,\r\n    imageId,\r\n    pagination,\r\n  );\r\n\r\n  yield put(actions.fetchImageCommentsSucceed({ postId, imageId, response }));\r\n}\r\n\r\nfunction* watchFetchImageComments() {\r\n  yield takeLatest(actions.fetchImageComments.type, fetchImageComments);\r\n}\r\n\r\nfunction* fetchMoreImageComments({ payload }: ReturnType<typeof actions.fetchMoreImageComments>) {\r\n  yield put(actions.fetchImageComments(payload));\r\n}\r\n\r\nfunction* watchFetchMoreImageComments() {\r\n  yield takeLatest(actions.fetchMoreImageComments.type, fetchMoreImageComments);\r\n}\r\n\r\nfunction* createPostComment(action: ReturnType<typeof actions.createPostComment>) {\r\n  const { postId, comment } = action.payload;\r\n\r\n  yield call(postAPI.createComment, postId, comment);\r\n\r\n  const pagination = getPostCommentsPagination(yield select(), postId);\r\n\r\n  const response: PagedResponse<PostCommentDto> = yield call(postAPI.getComments, postId, {\r\n    ...pagination,\r\n    fromEnd: true,\r\n    itemsPerPage: pagination.itemsPerPage + 1,\r\n  });\r\n\r\n  yield put(actions.createPostCommentSucceed({ postId, response }));\r\n}\r\n\r\nfunction* watchCreatePostComment() {\r\n  yield takeEvery(actions.createPostComment.type, createPostComment);\r\n}\r\n\r\nfunction* deletePostComment(action: ReturnType<typeof actions.deletePostComment>) {\r\n  const { postId, commentId } = action.payload;\r\n  yield call(postAPI.deleteComment, commentId);\r\n  yield put(actions.fetchPostComments(postId));\r\n}\r\n\r\nfunction* watchDeletePostComment() {\r\n  yield takeEvery(actions.deletePostComment.type, deletePostComment);\r\n}\r\n\r\nfunction* createImageComment(action: ReturnType<typeof actions.createImageComment>) {\r\n  const { postId, imageId, comment } = action.payload;\r\n\r\n  yield call(postAPI.createImageComment, imageId, comment);\r\n\r\n  const pagination = getImageCommentsPagination(yield select(), postId, imageId);\r\n\r\n  const response: PagedResponse<ImageCommentDto> = yield call(postAPI.getImageComments, imageId, {\r\n    ...pagination,\r\n    itemsPerPage: pagination.itemsPerPage + 1,\r\n  });\r\n\r\n  yield put(actions.createImageCommentSucceed({ postId, imageId, response }));\r\n}\r\n\r\nfunction* watchCreateImageComment() {\r\n  yield takeEvery(actions.createImageComment.type, createImageComment);\r\n}\r\n\r\nfunction* deleteImageComment(action: ReturnType<typeof actions.deleteImageComment>) {\r\n  const { postId, imageId, commentId } = action.payload;\r\n  yield call(postAPI.deleteImageComment, commentId);\r\n  yield put(actions.fetchImageComments({ postId, imageId }));\r\n}\r\n\r\nfunction* watchDeleteImageComment() {\r\n  yield takeEvery(actions.deleteImageComment.type, deleteImageComment);\r\n}\r\n\r\nfunction* deletePost({ payload: postId }: ReturnType<typeof actions.deletePost>) {\r\n  yield call(postAPI.deletePost, postId);\r\n  yield put(actions.deletePostSucceed(postId));\r\n}\r\n\r\nfunction* watchDeletePost() {\r\n  yield takeEvery(actions.deletePost.type, deletePost);\r\n}\r\n\r\nfunction* togglePostLike({ payload: postId }: ReturnType<typeof actions.togglePostLike>) {\r\n  yield put(actions.togglePostLikeStarted(postId));\r\n\r\n  yield delay(500);\r\n\r\n  const { liked } = yield select(getPostInfo, postId);\r\n\r\n  if (liked) {\r\n    yield call(postAPI.addLike, postId);\r\n  } else {\r\n    yield call(postAPI.removeLike, postId);\r\n  }\r\n}\r\n\r\nfunction* watchTogglePostLike() {\r\n  yield takeLatest(actions.togglePostLike.type, togglePostLike);\r\n}\r\n\r\nfunction* toggleImageLike(action: ReturnType<typeof actions.toggleImageLike>) {\r\n  const { postId, imageId } = action.payload;\r\n\r\n  yield put(actions.toggleImageLikeStarted({ postId, imageId }));\r\n\r\n  yield delay(500);\r\n\r\n  const { liked } = yield select(getImageInfo, postId, imageId);\r\n\r\n  if (liked) {\r\n    yield call(postAPI.addImageLike, imageId);\r\n  } else {\r\n    yield call(postAPI.removeImageLike, imageId);\r\n  }\r\n}\r\n\r\nfunction* watchToggleImageLike() {\r\n  yield takeLatest(actions.toggleImageLike.type, toggleImageLike);\r\n}\r\n\r\nexport default function* postListSagas() {\r\n  yield all([\r\n    watchFetchPosts(),\r\n    watchFetchPostImages(),\r\n    watchFetchPostComments(),\r\n    watchFetchMorePostComments(),\r\n    watchFetchImageComments(),\r\n    watchFetchMoreImageComments(),\r\n    watchCreatePostComment(),\r\n    watchDeletePostComment(),\r\n    watchCreateImageComment(),\r\n    watchDeleteImageComment(),\r\n    watchDeletePost(),\r\n    watchTogglePostLike(),\r\n    watchToggleImageLike(),\r\n  ]);\r\n}\r\n","import { all } from \"redux-saga/effects\";\r\n\r\nimport homeSagas from \"pages/Home/homeSagas\";\r\nimport profileSagas from \"pages/Profile/profileSagas\";\r\nimport profileEditorSagas from \"pages/ProfileEditor/profileEditorSagas\";\r\nimport loginSagas from \"pages/Login/loginSagas\";\r\nimport registrationSagas from \"pages/Registration/registrationSagas\";\r\nimport commonSagas from \"redux/commonSagas\";\r\nimport postListSagas from \"components/PostList/postListSagas\";\r\n\r\nexport default function* rootSaga() {\r\n  yield all([\r\n    commonSagas(),\r\n    homeSagas(),\r\n    loginSagas(),\r\n    registrationSagas(),\r\n    profileSagas(),\r\n    profileEditorSagas(),\r\n    postListSagas(),\r\n  ]);\r\n}\r\n","import { combineReducers } from \"@reduxjs/toolkit\";\r\n\r\nimport userListReducer from \"./UserList/userListSlice\";\r\nimport postFormReducer from \"./PostForm/postFormSlice\";\r\n\r\nconst reducer = combineReducers({\r\n  postForm: postFormReducer,\r\n  userList: userListReducer,\r\n});\r\n\r\nexport default reducer;\r\n","import { combineReducers } from \"@reduxjs/toolkit\";\r\n\r\nimport home from \"pages/Home/homeSlice\";\r\nimport login from \"pages/Login/loginSlice\";\r\nimport registration from \"pages/Registration/registrationSlice\";\r\nimport profile from \"pages/Profile/profileSlice\";\r\nimport profileEditor from \"pages/ProfileEditor/profileEditorSlice\";\r\nimport postList from \"components/PostList/postListSlice\";\r\n\r\nimport common from \"./commonSlice\";\r\n\r\nconst reducer = combineReducers({\r\n  common,\r\n  home,\r\n  login,\r\n  registration,\r\n  profile,\r\n  profileEditor,\r\n  postList,\r\n});\r\n\r\nexport default reducer;\r\n","import { configureStore, ThunkAction, AnyAction } from \"@reduxjs/toolkit\";\r\nimport createSagaMiddleware from \"redux-saga\";\r\n\r\nimport rootSaga from \"redux/rootSaga\";\r\nimport rootReducer from \"redux/rootReducer\";\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst store = configureStore({\r\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(sagaMiddleware),\r\n  reducer: rootReducer,\r\n  devTools: process.env.NODE_ENV !== \"production\",\r\n});\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport type AppState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport type AppThunk<ReturnType = void> = ThunkAction<ReturnType, AppState, unknown, AnyAction>;\r\n\r\nexport default store;\r\n","import { makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    link: {\r\n      textDecoration: \"none\",\r\n      color: \"inherit\",\r\n      \"&:focus, &:hover, &:visited, &:link, &:active\": {\r\n        textDecoration: \"none\",\r\n      },\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\nexport default function NavLink(props: React.ComponentProps<typeof Link>): JSX.Element {\r\n  const classes = useStyles();\r\n  return <Link className={classes.link} {...props} />;\r\n}\r\n","import { useDispatch } from \"react-redux\";\r\n\r\nimport type { AppDispatch } from \"redux/store\";\r\n\r\nexport default function useAppDispatch() {\r\n  return useDispatch<AppDispatch>();\r\n}\r\n","import { TypedUseSelectorHook, useSelector } from \"react-redux\";\r\n\r\nimport type { AppState } from \"redux/store\";\r\n\r\nconst useAppSelector: TypedUseSelectorHook<AppState> = useSelector;\r\n\r\nexport default useAppSelector;\r\n","import React from \"react\";\r\nimport { Avatar as MuiAvatar } from \"@material-ui/core\";\r\nimport { PhotoCameraOutlined } from \"@material-ui/icons\";\r\n\r\nexport default function Avatar(props: React.ComponentProps<typeof MuiAvatar>): JSX.Element {\r\n  return (\r\n    <MuiAvatar {...props}>\r\n      <PhotoCameraOutlined />\r\n    </MuiAvatar>\r\n  );\r\n}\r\n","export function capitalizeFirstLetter(value: string): string {\r\n  return value.charAt(0).toUpperCase() + value.slice(1).toLowerCase();\r\n}\r\n\r\nexport function wrap(value: string, symbolCount = 20): string {\r\n  if (value.length < symbolCount) {\r\n    return value;\r\n  }\r\n  return `${value.slice(0, symbolCount)}...`;\r\n}\r\n","import { capitalizeFirstLetter } from \"./stringUtils\";\r\n\r\ninterface User {\r\n  firstName: string;\r\n  lastName: string;\r\n}\r\n\r\nexport function getUserName({ firstName, lastName }: User): string {\r\n  return [firstName, lastName]\r\n    .filter((x) => !!x)\r\n    .map((x) => capitalizeFirstLetter(x.trim()))\r\n    .join(\" \");\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA9bSURBVHhe7dwLVFVlFgfw28PGssaaaaZGc9lohoWG6eAD36VpUkIKvjHfD1BJVJCyoYfms0xNS7NpsmyMlT0VQzM1FUERTKAEwSeaiVFZlk7gmf/+2Od4L1x8tFxj4P+31l7nfPs753K95+57zvede3URERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERER0cXR/J0D1zZYeqh+/WVHmt+B8PmgwKf2ur1VtZvo8tPixTz/pgv2Pd944b4Mv9f2FzV846Dlu/SQVX/ZYaveu0esOu8fKbr9o4L0WgnHptdY8U0j3Y2ocms/ddd9rWflJLWcnWs1n5dn+S/YazVZtN/yW7z/1wZvHFx119JDkXcuO9TS5+39NW5J/LpanTWF1WuuPlrvtk++/5M+BFHl0yEmr3qHuKy37pv8ldVuWraFIrGkSJrNy/vZ/+W9M+5dvL+Gbkp0eQken1G3S2zGrs5PZlkdn/7Sum/yrpIimZmzMWBGTl3dzAiNj7/Kd8lBP98l+b3qL80Prxd/eFi95UcDa33AAqJKKHh0Rt3gqB2HHo7eaXV5PMOyi6T95C9faRtnXa2buQLm5NT1n7/npcaL9hU0eu2AVXpMUvf9byyMSdJqJRSMrP06B/BUCYQOS60eGr49u3tkuhU87gvLLpJOk7Lm6SauJgtTq7SekTMlYHbuKfcxSblF8nGBddvKgj01Egru14cgqpj6Dtm6tNeIVKtHRJrlFMmELz6Ji7OulP4O0/KqY0yy3n1Mcr5FUmvVsaKaqwsjzR8iqmjCwpI69B+YYvUdss2yi6RbZFphl/GZt0p/27i9VTs9mbnZfUzSalbOTwEv5sY3n5sb7b9g35DGrx4Y5/fa/qUoku+9FknCMatGYmG4+YNUoZw+ffpBRE/Lsq7Q1OVlcO+k5AFhyZZ7kYREbIvSbhcut+afGZNkFeNM8nyr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\"","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    logo: {\r\n      width: theme.spacing(25),\r\n      height: theme.spacing(8),\r\n      objectFit: \"cover\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\n\r\nimport logo from \"assets/logo.png\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\nexport default function Logo(): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <NavLink to=\"/\">\r\n      <img className={classes.logo} src={logo} alt=\"logo\" />\r\n    </NavLink>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    icon: {\r\n      width: theme.spacing(5),\r\n      height: theme.spacing(5),\r\n      fill: theme.palette.common.white,\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  Box,\r\n  Container,\r\n  IconButton,\r\n  Slide,\r\n  useScrollTrigger,\r\n} from \"@material-ui/core\";\r\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\r\n\r\nimport NavLink from \"components/NavLink/NavLink\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport { getUser } from \"redux/commonSlice\";\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport { actions as loginActions } from \"pages/Login/loginSlice\";\r\n\r\nimport Logo from \"./Logo/Logo\";\r\nimport useStyles from \"./useStyles\";\r\n\r\nfunction HideOnScroll({ children }: { children: React.ReactElement }): JSX.Element {\r\n  const trigger = useScrollTrigger();\r\n\r\n  return (\r\n    <Slide appear={false} direction=\"down\" in={!trigger}>\r\n      {children}\r\n    </Slide>\r\n  );\r\n}\r\n\r\nexport default function Header(): JSX.Element {\r\n  const classes = useStyles();\r\n  const dispatch = useAppDispatch();\r\n  const user = useAppSelector(getUser);\r\n\r\n  return (\r\n    <HideOnScroll>\r\n      <AppBar>\r\n        <Container maxWidth=\"md\">\r\n          <Toolbar>\r\n            <Logo />\r\n\r\n            <Box flexGrow=\"1\" />\r\n\r\n            <NavLink to={user.id}>\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography>{getUserName(user)}</Typography>\r\n\r\n                <Box ml={1}>\r\n                  <Avatar src={user.avatarUrl} />\r\n                </Box>\r\n              </Box>\r\n            </NavLink>\r\n\r\n            <IconButton onClick={() => dispatch(loginActions.logout())}>\r\n              <ExitToAppIcon className={classes.icon} />\r\n            </IconButton>\r\n          </Toolbar>\r\n        </Container>\r\n      </AppBar>\r\n    </HideOnScroll>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\n\r\nexport default function DeleteButton(props: React.ComponentProps<typeof IconButton>): JSX.Element {\r\n  return (\r\n    <IconButton {...props}>\r\n      <DeleteIcon color=\"secondary\" />\r\n    </IconButton>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    avatar: {\r\n      width: theme.spacing(6),\r\n      height: theme.spacing(6),\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Typography, Link, Box } from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\n\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport DeleteButton from \"components/Buttons/DeleteButton/DeleteButton\";\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport type PostDto from \"model/dto/post/PostDto\";\r\n\r\nimport { actions, getIsCurrentUserPost, getPostInfo } from \"../postListSlice\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\ntype PostInfoProps = {\r\n  postId: string;\r\n};\r\n\r\nexport default function PostInfo({ postId }: PostInfoProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const post: PostDto = useAppSelector((state) => getPostInfo(state, postId));\r\n\r\n  const isCurrentUserPost: boolean = useAppSelector((state) => getIsCurrentUserPost(state, postId));\r\n\r\n  const userName = getUserName({\r\n    firstName: post.authorFirstName,\r\n    lastName: post.authorLastName,\r\n  });\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"space-between\">\r\n      <Box display=\"flex\">\r\n        <Avatar className={classes.avatar} src={post.authorAvatarUrl} />\r\n\r\n        <Box display=\"flex\" flexDirection=\"column\" ml={2}>\r\n          <NavLink to={post.authorId}>\r\n            <Link>\r\n              <Typography>{userName}</Typography>\r\n            </Link>\r\n          </NavLink>\r\n\r\n          <Typography variant=\"subtitle2\">{moment(post.createDate).fromNow()}</Typography>\r\n        </Box>\r\n      </Box>\r\n\r\n      {isCurrentUserPost && <DeleteButton onClick={() => dispatch(actions.deletePost(postId))} />}\r\n    </Box>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\nimport { red } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    badge: {\r\n      color: theme.palette.background.paper,\r\n      backgroundColor: red[500],\r\n      border: `2px solid ${theme.palette.background.paper}`,\r\n      padding: \"0 4px\",\r\n    },\r\n    icon: {\r\n      color: red[500],\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { IconButton, Badge } from \"@material-ui/core\";\r\nimport { Favorite, FavoriteBorder } from \"@material-ui/icons\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\ntype LikeButtonProps = {\r\n  active: boolean;\r\n  likeCount: number;\r\n  onClick: () => void;\r\n};\r\n\r\nexport default function LikeButton({ active, likeCount, onClick }: LikeButtonProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <IconButton onClick={onClick}>\r\n      <Badge classes={{ badge: classes.badge }} badgeContent={likeCount}>\r\n        {active ? (\r\n          <Favorite className={classes.icon} />\r\n        ) : (\r\n          <FavoriteBorder className={classes.icon} />\r\n        )}\r\n      </Badge>\r\n    </IconButton>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\nimport { teal } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    badge: {\r\n      color: theme.palette.background.paper,\r\n      backgroundColor: teal[500],\r\n      border: `2px solid ${theme.palette.background.paper}`,\r\n      padding: \"0 4px\",\r\n    },\r\n    icon: {\r\n      color: teal[500],\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { IconButton, Badge } from \"@material-ui/core\";\r\nimport { Chat, ChatOutlined } from \"@material-ui/icons\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\ntype ShareButtonProps = {\r\n  active: boolean;\r\n  shareCount: number;\r\n  onClick: () => void;\r\n};\r\n\r\nexport default function ShareButton({\r\n  active,\r\n  shareCount,\r\n  onClick,\r\n}: ShareButtonProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <IconButton onClick={onClick}>\r\n      <Badge classes={{ badge: classes.badge }} badgeContent={shareCount}>\r\n        {active ? <Chat className={classes.icon} /> : <ChatOutlined className={classes.icon} />}\r\n      </Badge>\r\n    </IconButton>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nimport LikeButton from \"components/Buttons/LikeButton/LikeButton\";\r\nimport ShareButton from \"components/Buttons/ShareButton/ShareButton\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport type PostDto from \"model/dto/post/PostDto\";\r\n\r\nimport { actions, getPostInfo } from \"../postListSlice\";\r\n\r\ntype PostActivitiesProps = {\r\n  postId: string;\r\n};\r\n\r\nexport function PostActivities({ postId }: PostActivitiesProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const post: PostDto = useAppSelector((state) => getPostInfo(state, postId));\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <LikeButton\r\n        active={post.liked}\r\n        likeCount={post.likeCount}\r\n        onClick={() => dispatch(actions.togglePostLike(postId))}\r\n      />\r\n\r\n      <ShareButton\r\n        active={post.shared}\r\n        shareCount={post.shareCount}\r\n        onClick={() => dispatch(actions.sharePost(postId))}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Typography, Box, Link } from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\n\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport type PostCommentDto from \"model/dto/postComment/PostCommentDto\";\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\nimport DeleteButton from \"components/Buttons/DeleteButton/DeleteButton\";\r\n\r\nimport { actions, getIsCurrentUserComment, getPostCommentById } from \"../postListSlice\";\r\n\r\ntype PostCommentProps = {\r\n  postId: string;\r\n  commentId: string;\r\n};\r\n\r\nexport default function PostComment({ postId, commentId }: PostCommentProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const comment: PostCommentDto = useAppSelector((state) =>\r\n    getPostCommentById(state, postId, commentId),\r\n  );\r\n  const isCurrentUserComment = useAppSelector((state) =>\r\n    getIsCurrentUserComment(state, postId, commentId),\r\n  );\r\n  const authorName = getUserName({\r\n    firstName: comment.authorFirstName,\r\n    lastName: comment.authorLastName,\r\n  });\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Avatar src={comment.avatarUrl} />\r\n\r\n      <Box display=\"flex\" flexDirection=\"column\" ml={2}>\r\n        <NavLink to={comment.authorId}>\r\n          <Link>{authorName}</Link>\r\n        </NavLink>\r\n\r\n        <Typography variant=\"body2\" style={{ wordBreak: \"break-all\" }}>\r\n          {comment.text}\r\n        </Typography>\r\n\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <Typography variant=\"caption\">{moment(comment.createDate).fromNow()}</Typography>\r\n\r\n          {isCurrentUserComment && (\r\n            <DeleteButton\r\n              size=\"small\"\r\n              onClick={() => dispatch(actions.deletePostComment({ postId, commentId }))}\r\n            />\r\n          )}\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    form: {\r\n      width: \"100%\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Box, TextField, Button, Collapse } from \"@material-ui/core\";\r\nimport { Formik, Form, FormikHelpers } from \"formik\";\r\nimport * as yup from \"yup\";\r\n\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport type PostCommentCreateDto from \"model/dto/postComment/PostCommentCreateDto\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nimport { actions } from \"../postListSlice\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\nconst initialValues: PostCommentCreateDto = {\r\n  text: \"\",\r\n};\r\n\r\nconst validationSchema = yup.object({\r\n  text: yup.string().trim().required(),\r\n});\r\n\r\ntype PostCommentFormProps = {\r\n  postId: string;\r\n};\r\n\r\nexport default function PostCommentForm({ postId }: PostCommentFormProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const avatarUrl = useAppSelector((state) => getUser(state).avatarUrl);\r\n\r\n  const inputRef = React.useRef<HTMLInputElement | null>(null);\r\n\r\n  const [isButtonsVisible, setIsButtonsVisible] = React.useState(false);\r\n\r\n  function handleSubmit(\r\n    comment: PostCommentCreateDto,\r\n    { resetForm, setSubmitting }: FormikHelpers<PostCommentCreateDto>,\r\n  ) {\r\n    inputRef.current?.blur();\r\n    dispatch(actions.createPostComment({ postId, comment }));\r\n    setIsButtonsVisible(false);\r\n    resetForm();\r\n    setSubmitting(false);\r\n  }\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={initialValues}\r\n      validationSchema={validationSchema}\r\n      validateOnChange\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {({ values, isSubmitting, handleBlur, handleChange, resetForm }) => (\r\n        <Form className={classes.form} autoComplete=\"off\">\r\n          <Box display=\"flex\" justifyContent=\"center\">\r\n            <Avatar src={avatarUrl} />\r\n\r\n            <Box ml={2} width=\"100%\">\r\n              <TextField\r\n                inputRef={inputRef}\r\n                id=\"text\"\r\n                placeholder=\"Leave a comment...\"\r\n                value={values.text}\r\n                onFocus={() => setIsButtonsVisible(true)}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                fullWidth\r\n              />\r\n            </Box>\r\n          </Box>\r\n\r\n          <Collapse in={isButtonsVisible}>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\" mt={1}>\r\n              <Box display=\"flex\">\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    resetForm();\r\n                    setIsButtonsVisible(false);\r\n                  }}\r\n                >\r\n                  cancel\r\n                </Button>\r\n\r\n                <Box ml={2}>\r\n                  <Button type=\"submit\" variant=\"contained\" color=\"primary\" disabled={isSubmitting}>\r\n                    add\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          </Collapse>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link, Box } from \"@material-ui/core\";\r\n\r\nimport PostComment from \"components/PostList/PostComment/PostComment\";\r\nimport PostCommentForm from \"components/PostList/PostCommentForm/PostCommentForm\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\n\r\nimport { actions, getPostCommentIds, getPostCommentsPagination } from \"../postListSlice\";\r\n\r\ntype PostCommentListType = {\r\n  postId: string;\r\n};\r\n\r\nexport function PostCommentList({ postId }: PostCommentListType): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const commentIds: string[] = useAppSelector((state) => getPostCommentIds(state, postId));\r\n\r\n  const { fromEnd, currentPage, totalPages } = useAppSelector((state) =>\r\n    getPostCommentsPagination(state, postId),\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.fetchPostComments(postId));\r\n  }, [postId]);\r\n\r\n  return (\r\n    <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"start\">\r\n      <Box my={2}>\r\n        <PostCommentForm postId={postId} />\r\n      </Box>\r\n\r\n      {fromEnd && currentPage < totalPages && (\r\n        <Box mt={2}>\r\n          <Link\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={() => dispatch(actions.fetchMorePostComments(postId))}\r\n          >\r\n            Show previous comments\r\n          </Link>\r\n        </Box>\r\n      )}\r\n\r\n      {(fromEnd ? commentIds.reverse() : commentIds).map((id) => (\r\n        <Box key={id} mt={2}>\r\n          <PostComment postId={postId} commentId={id} />\r\n        </Box>\r\n      ))}\r\n\r\n      {!fromEnd && currentPage < totalPages && (\r\n        <Box mt={2}>\r\n          <Link\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={() => dispatch(actions.fetchMorePostComments(postId))}\r\n          >\r\n            Show more comments\r\n          </Link>\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","/* eslint-disable no-unused-vars */\r\nimport React from \"react\";\r\nimport { Grid, GridSpacing } from \"@material-ui/core\";\r\n\r\nconst SPACING: GridSpacing = 1;\r\n\r\ntype ImageGridProps = {\r\n  imagesCount: number;\r\n  renderImage: (index: number) => JSX.Element;\r\n};\r\n\r\nexport default function ImageGrid({ imagesCount, renderImage }: ImageGridProps): JSX.Element {\r\n  let elements: JSX.Element[] = [];\r\n\r\n  const indexes = Array.from(Array(imagesCount)).map((_, index) => index);\r\n\r\n  switch (imagesCount) {\r\n    case 1:\r\n    case 2:\r\n      elements = indexes.map((index) => (\r\n        <Grid key={index} item xs>\r\n          {renderImage(index)}\r\n        </Grid>\r\n      ));\r\n      break;\r\n\r\n    case 3:\r\n    case 4:\r\n      elements = [\r\n        <Grid key={0} item xs={8}>\r\n          {renderImage(0)}\r\n        </Grid>,\r\n\r\n        <Grid key={1} container item direction=\"column\" xs={4} spacing={SPACING}>\r\n          {indexes.slice(1).map((index) => (\r\n            <Grid key={index} item xs>\r\n              {renderImage(index)}\r\n            </Grid>\r\n          ))}\r\n        </Grid>,\r\n      ];\r\n      break;\r\n\r\n    case 5:\r\n      elements = [\r\n        ...indexes.slice(0, 2).map((index) => (\r\n          <Grid key={index} item xs={6}>\r\n            {renderImage(index)}\r\n          </Grid>\r\n        )),\r\n\r\n        ...indexes.slice(2).map((index) => (\r\n          <Grid key={index} item xs>\r\n            {renderImage(index)}\r\n          </Grid>\r\n        )),\r\n      ];\r\n      break;\r\n\r\n    case 6:\r\n    case 7:\r\n    case 8:\r\n      elements = [\r\n        <Grid key={0} item xs={12}>\r\n          {renderImage(0)}\r\n        </Grid>,\r\n\r\n        ...indexes.slice(1).map((index) => (\r\n          <Grid key={index} item xs>\r\n            {renderImage(index)}\r\n          </Grid>\r\n        )),\r\n      ];\r\n      break;\r\n\r\n    case 9:\r\n      elements = indexes.map((index) => (\r\n        <Grid key={index} item xs={4}>\r\n          {renderImage(index)}\r\n        </Grid>\r\n      ));\r\n      break;\r\n\r\n    case 10:\r\n      elements = [\r\n        ...indexes.slice(0, 2).map((index) => (\r\n          <Grid key={index} item xs={6}>\r\n            {renderImage(index)}\r\n          </Grid>\r\n        )),\r\n\r\n        ...indexes.slice(2).map((index) => (\r\n          <Grid key={index} item xs={3}>\r\n            {renderImage(index)}\r\n          </Grid>\r\n        )),\r\n      ];\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {!!elements.length && (\r\n        <Grid container spacing={SPACING}>\r\n          {elements}\r\n        </Grid>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    root: {\r\n      position: \"relative\",\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n    },\r\n    sliderView: {\r\n      position: \"relative\",\r\n      zIndex: 1,\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      display: \"flex\",\r\n      overflowY: \"hidden\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      backgroundColor: \"rgba(0, 0, 0, 0.9)\",\r\n    },\r\n    slide: {\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      position: \"absolute\",\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      display: \"flex\",\r\n    },\r\n    leftArrowBox: {\r\n      position: \"relative\",\r\n      zIndex: 2,\r\n      width: \"34%\",\r\n      display: \"flex\",\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"center\",\r\n      cursor: \"pointer\",\r\n      opacity: 0.3,\r\n      \"&:hover\": {\r\n        opacity: 1,\r\n      },\r\n    },\r\n    rightArrowBox: {\r\n      position: \"relative\",\r\n      zIndex: 2,\r\n      width: \"66%\",\r\n      display: \"flex\",\r\n      justifyContent: \"flex-end\",\r\n      alignItems: \"center\",\r\n      cursor: \"pointer\",\r\n      opacity: 0.3,\r\n      \"&:hover\": {\r\n        opacity: 1,\r\n      },\r\n    },\r\n    arrowIcon: {\r\n      width: theme.spacing(6),\r\n      height: theme.spacing(6),\r\n      color: theme.palette.common.white,\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { ChevronLeftRounded, ChevronRightRounded } from \"@material-ui/icons\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\ninterface NavigationProps {\r\n  gotoPrev: () => void;\r\n  gotoNext: () => void;\r\n}\r\n\r\nexport default function Navigation({ gotoPrev, gotoNext }: NavigationProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.leftArrowBox} onClick={gotoPrev}>\r\n        <ChevronLeftRounded className={classes.arrowIcon} />\r\n      </div>\r\n\r\n      <div className={classes.rightArrowBox} onClick={gotoNext}>\r\n        <ChevronRightRounded className={classes.arrowIcon} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/* eslint-disable no-unused-vars */\r\nimport React from \"react\";\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport { virtualize, bindKeyboard } from \"react-swipeable-views-utils\";\r\n\r\nimport useStyles from \"./useStyles\";\r\nimport Navigation from \"./Navigation/Navigation\";\r\n\r\nconst VirtualizeSwipeableViews = bindKeyboard(virtualize(SwipeableViews));\r\n\r\ninterface SliderProps {\r\n  slideCount: number;\r\n  selectedIndex: number;\r\n  renderSlide: (index: number, key: number) => JSX.Element;\r\n  onSlideChange: (index: number) => void;\r\n}\r\n\r\nexport default function Slider({\r\n  slideCount,\r\n  selectedIndex,\r\n  renderSlide,\r\n  onSlideChange,\r\n}: SliderProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  function mod(index: number) {\r\n    return (slideCount + (index % slideCount)) % slideCount;\r\n  }\r\n\r\n  function gotoPrev() {\r\n    onSlideChange(mod(selectedIndex - 1));\r\n  }\r\n\r\n  function gotoNext() {\r\n    onSlideChange(mod(selectedIndex + 1));\r\n  }\r\n\r\n  function handleIndexChange(index: number) {\r\n    onSlideChange(mod(index));\r\n  }\r\n\r\n  function slideRenderer({ index, key }: { index: number; key: number }) {\r\n    return renderSlide(mod(index), key);\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {slideCount > 1 && <Navigation gotoPrev={gotoPrev} gotoNext={gotoNext} />}\r\n\r\n      <VirtualizeSwipeableViews\r\n        className={classes.sliderView}\r\n        slideClassName={classes.slide}\r\n        index={selectedIndex}\r\n        onChangeIndex={handleIndexChange}\r\n        slideRenderer={slideRenderer}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nimport LikeButton from \"components/Buttons/LikeButton/LikeButton\";\r\nimport ShareButton from \"components/Buttons/ShareButton/ShareButton\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport type PostImageDto from \"model/dto/postImage/PostImageDto\";\r\n\r\nimport { actions, getImageInfo } from \"../postListSlice\";\r\n\r\ntype ImageActivitiesProps = {\r\n  postId: string;\r\n  imageId: string;\r\n};\r\n\r\nexport default function ImageActivities({ postId, imageId }: ImageActivitiesProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const image: PostImageDto = useAppSelector((state) => getImageInfo(state, postId, imageId));\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <LikeButton\r\n        active={image.liked}\r\n        likeCount={image.likeCount}\r\n        onClick={() => dispatch(actions.toggleImageLike({ postId, imageId }))}\r\n      />\r\n\r\n      <ShareButton\r\n        active={image.shared}\r\n        shareCount={image.shareCount}\r\n        onClick={() => dispatch(actions.shareImage({ postId, imageId }))}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    avatar: {\r\n      width: theme.spacing(6),\r\n      height: theme.spacing(6),\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Box, Link, Typography } from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\n\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport type PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport { getImageInfo, getPostInfo } from \"components/PostList/postListSlice\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport type PostDto from \"model/dto/post/PostDto\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\nimport Avatar from \"../../Avatar/Avatar\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\ntype ImageInfoProps = {\r\n  postId: string;\r\n  imageId: string;\r\n};\r\n\r\nexport default function ImageInfo({ postId, imageId }: ImageInfoProps): JSX.Element {\r\n  const classes = useStyles();\r\n  const post: PostDto = useAppSelector((state) => getPostInfo(state, postId));\r\n  const image: PostImageDto = useAppSelector((state) => getImageInfo(state, postId, imageId));\r\n  const authorName = getUserName({\r\n    firstName: post.authorFirstName,\r\n    lastName: post.authorLastName,\r\n  });\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Avatar className={classes.avatar} src={post.authorAvatarUrl} />\r\n\r\n      <Box display=\"flex\" flexDirection=\"column\" ml={2}>\r\n        <NavLink to={post.authorId}>\r\n          <Link>\r\n            <Typography>{authorName}</Typography>\r\n          </Link>\r\n        </NavLink>\r\n\r\n        <Typography variant=\"subtitle2\">{moment(image.createDate).fromNow()}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Typography, Box, Link } from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\n\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport type ImageCommentDto from \"model/dto/imageComment/ImageCommentDto\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport DeleteButton from \"components/Buttons/DeleteButton/DeleteButton\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\nimport { actions, getImageCommentById, getIsCurrentUserImageComment } from \"../postListSlice\";\r\n\r\ntype ImageCommentProps = {\r\n  postId: string;\r\n  imageId: string;\r\n  commentId: string;\r\n};\r\n\r\nexport default function ImageComment({\r\n  postId,\r\n  imageId,\r\n  commentId,\r\n}: ImageCommentProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const comment: ImageCommentDto = useAppSelector((state) =>\r\n    getImageCommentById(state, postId, imageId, commentId),\r\n  );\r\n\r\n  const userName: string = getUserName({\r\n    firstName: comment.authorFirstName,\r\n    lastName: comment.authorLastName,\r\n  });\r\n\r\n  const isCurrentUserComment: boolean = useAppSelector((state) =>\r\n    getIsCurrentUserImageComment(state, postId, imageId, commentId),\r\n  );\r\n\r\n  function handleDelete() {\r\n    dispatch(actions.deleteImageComment({ postId, imageId, commentId }));\r\n  }\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Avatar src={comment.avatarUrl} />\r\n\r\n      <Box display=\"flex\" flexDirection=\"column\" ml={2}>\r\n        <NavLink to={comment.authorId}>\r\n          <Link>{userName}</Link>\r\n        </NavLink>\r\n\r\n        <Typography variant=\"body2\">{comment.text}</Typography>\r\n\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <Typography variant=\"caption\">{moment(comment.createDate).fromNow()}</Typography>\r\n\r\n          {isCurrentUserComment && <DeleteButton size=\"small\" onClick={handleDelete} />}\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Grid, Box, Divider, Link } from \"@material-ui/core\";\r\n\r\nimport ImageComment from \"components/PostList/ImageComment/ImageComment\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\n\r\nimport { actions, getImageCommentIds, getImageCommentsPagination } from \"../postListSlice\";\r\n\r\ntype ImageCommentListProps = {\r\n  postId: string;\r\n  imageId: string;\r\n};\r\n\r\nexport default function ImageCommentList({ postId, imageId }: ImageCommentListProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const commentIds: string[] = useAppSelector((state) =>\r\n    getImageCommentIds(state, postId, imageId),\r\n  );\r\n\r\n  const canFetchMoreComments = useAppSelector((state) => {\r\n    const { currentPage, totalPages } = getImageCommentsPagination(state, postId, imageId);\r\n    return currentPage < totalPages;\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.fetchImageComments({ postId, imageId }));\r\n  }, [postId, imageId, dispatch]);\r\n\r\n  return (\r\n    <Grid container direction=\"column\">\r\n      {canFetchMoreComments && (\r\n        <Grid item xs>\r\n          <Divider />\r\n\r\n          <Box display=\"flex\" justifyContent=\"center\" my={1}>\r\n            <Link\r\n              component=\"button\"\r\n              style={{ cursor: \"pointer\" }}\r\n              onClick={() => dispatch(actions.fetchMoreImageComments({ postId, imageId }))}\r\n            >\r\n              Show previous comments\r\n            </Link>\r\n          </Box>\r\n        </Grid>\r\n      )}\r\n\r\n      {commentIds.reverse().map((commentId) => (\r\n        <Grid key={commentId} item xs=\"auto\">\r\n          <Divider />\r\n\r\n          <Box p={1}>\r\n            <ImageComment postId={postId} imageId={imageId} commentId={commentId} />\r\n          </Box>\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n}\r\n","import { makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    form: {\r\n      width: \"100%\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Box, TextField, Button, Collapse } from \"@material-ui/core\";\r\nimport { Formik, Form, FormikHelpers } from \"formik\";\r\nimport * as yup from \"yup\";\r\n\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport type ImageCommentCreateDto from \"model/dto/imageComment/ImageCommentCreateDto\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nimport { actions } from \"../postListSlice\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\nconst initialValues: ImageCommentCreateDto = {\r\n  text: \"\",\r\n};\r\n\r\nconst validationSchema = yup.object({\r\n  text: yup.string().trim().required(\"Required\"),\r\n});\r\n\r\ntype ImageCommentFormProps = {\r\n  postId: string;\r\n  imageId: string;\r\n};\r\n\r\nexport default function ImageCommentForm({ postId, imageId }: ImageCommentFormProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const avatarUrl = useAppSelector((state) => getUser(state).avatarUrl);\r\n\r\n  const inputRef = React.useRef<HTMLInputElement | null>(null);\r\n\r\n  const [isButtonsVisible, setIsButtonsVisible] = React.useState(false);\r\n\r\n  function handleSubmit(\r\n    comment: ImageCommentCreateDto,\r\n    { resetForm, setSubmitting }: FormikHelpers<ImageCommentCreateDto>,\r\n  ) {\r\n    inputRef.current?.blur();\r\n    dispatch(actions.createImageComment({ postId, imageId, comment }));\r\n    setIsButtonsVisible(false);\r\n    resetForm();\r\n    setSubmitting(false);\r\n  }\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={initialValues}\r\n      validationSchema={validationSchema}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {({ values, isSubmitting, handleBlur, handleChange, resetForm }) => (\r\n        <Form className={classes.form} autoComplete=\"off\">\r\n          <Box display=\"flex\" justifyContent=\"center\">\r\n            <Avatar src={avatarUrl} />\r\n\r\n            <Box ml={2} width=\"100%\">\r\n              <TextField\r\n                inputRef={inputRef}\r\n                id=\"text\"\r\n                placeholder=\"Leave a comment...\"\r\n                value={values.text}\r\n                onFocus={() => setIsButtonsVisible(true)}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                fullWidth\r\n              />\r\n            </Box>\r\n          </Box>\r\n\r\n          <Collapse in={isButtonsVisible}>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\" mt={1}>\r\n              <Box display=\"flex\">\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    resetForm();\r\n                    setIsButtonsVisible(false);\r\n                  }}\r\n                >\r\n                  cancel\r\n                </Button>\r\n\r\n                <Box ml={2}>\r\n                  <Button type=\"submit\" variant=\"contained\" color=\"primary\" disabled={isSubmitting}>\r\n                    add\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          </Collapse>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    modal: {\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n    },\r\n    content: {\r\n      width: theme.breakpoints.values.md,\r\n      backgroundColor: theme.palette.background.paper,\r\n      \"&:focus\": {\r\n        outline: \"none\",\r\n      },\r\n    },\r\n    image: {\r\n      maxWidth: \"100%\",\r\n      maxHeight: \"100%\",\r\n      objectFit: \"cover\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Grid, Box, Divider, Modal } from \"@material-ui/core\";\r\n\r\nimport type PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport ImageSlider from \"components/Slider/Slider\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\n\r\nimport { actions, getImages, getSelectedImageIndex, getImageCommentsCount } from \"../postListSlice\";\r\nimport Activities from \"../ImageActivities/ImageActivities\";\r\nimport ImageInfo from \"../ImageInfo/ImageInfo\";\r\nimport ImageCommentList from \"../ImageCommentList/ImageCommentList\";\r\nimport ImageCommentForm from \"../ImageCommentForm/ImageCommentForm\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\ntype ImageViewerProps = {\r\n  postId: string;\r\n};\r\n\r\nexport default function ImageViewer({ postId }: ImageViewerProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const images: PostImageDto[] = useAppSelector((state) => getImages(state, postId));\r\n\r\n  const selectedImageIndex: number = useAppSelector(\r\n    (state) => getSelectedImageIndex(state, postId)!,\r\n  );\r\n\r\n  const selectedImage: PostImageDto = images[selectedImageIndex];\r\n\r\n  const hasAnyComment: boolean = useAppSelector(\r\n    (state) => getImageCommentsCount(state, postId, selectedImage.id) > 0,\r\n  );\r\n\r\n  function handleSlideChange(index: number) {\r\n    dispatch(actions.setSelectedImage({ postId, index }));\r\n  }\r\n\r\n  function handleClose() {\r\n    dispatch(actions.setSelectedImage({ postId, index: null }));\r\n  }\r\n\r\n  return (\r\n    <Modal className={classes.modal} onClose={handleClose} open disablePortal>\r\n      <Box className={classes.content} display=\"flex\" justifyContent=\"center\" height=\"80vh\">\r\n        <Box width=\"66%\">\r\n          <ImageSlider\r\n            slideCount={images.length}\r\n            selectedIndex={selectedImageIndex}\r\n            renderSlide={(index: number, key: number) => (\r\n              <img key={key} className={classes.image} src={images[index].url} />\r\n            )}\r\n            onSlideChange={handleSlideChange}\r\n          />\r\n        </Box>\r\n\r\n        <Box width=\"34%\" display=\"flex\" flexDirection=\"column\">\r\n          <Box\r\n            style={{\r\n              height: \"100%\",\r\n              overflowY: \"auto\",\r\n            }}\r\n          >\r\n            <Grid container direction=\"column\">\r\n              <Grid item xs>\r\n                <Box p={1}>\r\n                  <ImageInfo postId={postId} imageId={selectedImage.id} />\r\n                </Box>\r\n              </Grid>\r\n\r\n              <Grid item xs>\r\n                <Divider />\r\n\r\n                <Box px={1} py={2}>\r\n                  <Activities postId={postId} imageId={selectedImage.id} />\r\n                </Box>\r\n\r\n                {!hasAnyComment && <Divider />}\r\n              </Grid>\r\n\r\n              <Grid item xs=\"auto\">\r\n                <ImageCommentList postId={postId} imageId={selectedImage.id} />\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n\r\n          <Box width=\"100%\">\r\n            <Divider />\r\n\r\n            <Box p={1}>\r\n              <ImageCommentForm postId={postId} imageId={selectedImage.id} />\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n","import { makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) =>\r\n  createStyles({\r\n    image: {\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      objectFit: \"cover\",\r\n      cursor: \"pointer\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\n\r\nimport ImageGrid from \"components/ImageGrid/ImageGrid\";\r\nimport ImageViewer from \"components/PostList/ImageViewer/ImageViewer\";\r\nimport type PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\n\r\nimport { actions, getImages, getSelectedImageIndex } from \"../postListSlice\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\ntype PostAttachmentsProps = {\r\n  postId: string;\r\n};\r\n\r\nexport default function PostAttachments({ postId }: PostAttachmentsProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.fetchPostImages(postId));\r\n  }, [postId]);\r\n\r\n  const images: PostImageDto[] = useAppSelector((state) => getImages(state, postId));\r\n\r\n  const isImageSelected: boolean = useAppSelector(\r\n    (state) => getSelectedImageIndex(state, postId) != null,\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <ImageGrid\r\n        imagesCount={images.length}\r\n        renderImage={(index: number) => (\r\n          <img\r\n            className={classes.image}\r\n            src={images[index].url}\r\n            onClick={() => dispatch(actions.setSelectedImage({ postId, index }))}\r\n          />\r\n        )}\r\n      />\r\n\r\n      {isImageSelected && <ImageViewer postId={postId} />}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Typography, Paper, Box } from \"@material-ui/core\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\n\r\nimport PostInfo from \"../PostInfo/PostInfo\";\r\nimport { getPostInfo } from \"../postListSlice\";\r\nimport { PostActivities } from \"../PostActivities/PostActivities\";\r\nimport { PostCommentList } from \"../PostCommentList/PostCommentList\";\r\nimport PostAttachments from \"../PostAttachments/PostAttachments\";\r\n\r\ntype PostProps = {\r\n  postId: string;\r\n};\r\n\r\nexport default function Post({ postId }: PostProps): JSX.Element {\r\n  const body: string = useAppSelector((state) => getPostInfo(state, postId).body);\r\n\r\n  return (\r\n    <Paper elevation={3}>\r\n      <Box bgcolor=\"grey.300\" px={3} py={1} width=\"100%\">\r\n        <PostInfo postId={postId} />\r\n      </Box>\r\n\r\n      <Box p={2}>\r\n        <Typography variant=\"body1\" style={{ wordBreak: \"break-all\" }}>\r\n          {body}\r\n        </Typography>\r\n      </Box>\r\n\r\n      <Box px={2}>\r\n        <PostAttachments postId={postId} />\r\n      </Box>\r\n\r\n      <Box display=\"flex\" p={2}>\r\n        <PostActivities postId={postId} />\r\n      </Box>\r\n\r\n      <Box bgcolor=\"grey.300\" px={3} py={2}>\r\n        <PostCommentList postId={postId} />\r\n      </Box>\r\n    </Paper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { actions, getLoaded, getPostIds } from \"components/PostList/postListSlice\";\r\n\r\nimport Post from \"./Post/Post\";\r\n\r\nexport default function PostList(): JSX.Element {\r\n  const postIds = useAppSelector(getPostIds);\r\n\r\n  return (\r\n    <Box display=\"flex\" flexDirection=\"column\" width=\"100%\">\r\n      {postIds.map((id, index) => (\r\n        <Box key={id} mt={index && 2}>\r\n          <Post postId={id} />\r\n        </Box>\r\n      ))}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport function usePostList(userId: string) {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n  const loaded = useAppSelector(getLoaded);\r\n  const hasAnyPosts = useAppSelector((state) => !!getPostIds(state).length);\r\n\r\n  React.useEffect(() => {\r\n    if (!loaded) {\r\n      dispatch(actions.fetchPosts(userId));\r\n    }\r\n  }, [userId, loaded]);\r\n\r\n  // TODO: not fires when using backward/forward arrows inside browser window\r\n  React.useEffect(() => history.listen(() => dispatch(actions.reset())), []);\r\n\r\n  return [loaded, hasAnyPosts] as const;\r\n}\r\n","import { makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) =>\r\n  createStyles({\r\n    image: {\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      objectFit: \"cover\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nimport DeleteButton from \"components/Buttons/DeleteButton/DeleteButton\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\ntype UploadImageProps = {\r\n  url: string;\r\n  deleteDisabled: boolean;\r\n  onDelete: () => void;\r\n};\r\n\r\nexport default function UploadImage({\r\n  url,\r\n  deleteDisabled,\r\n  onDelete,\r\n}: UploadImageProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box position=\"relative\" width=\"100%\" height=\"100%\">\r\n      <img className={classes.image} src={url} />\r\n\r\n      {!deleteDisabled && (\r\n        <Box position=\"absolute\" top={0} right={0}>\r\n          <DeleteButton onClick={onDelete} />\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\n\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nexport default function UserInfo(): JSX.Element {\r\n  const user = useAppSelector(getUser);\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Avatar src={user.avatarUrl} />\r\n\r\n      <Box display=\"flex\" alignItems=\"center\" ml={2}>\r\n        <Typography align=\"center\">{getUserName(user)}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Paper, Box, TextField, Button, IconButton } from \"@material-ui/core\";\r\nimport { AddAPhoto, PlayCircleOutline } from \"@material-ui/icons\";\r\nimport { useFormik } from \"formik\";\r\nimport * as yup from \"yup\";\r\n\r\nimport ImageGrid from \"components/ImageGrid/ImageGrid\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport type PostCreateDto from \"model/dto/post/PostCreateDto\";\r\n\r\nimport { actions, getIsSubmitting } from \"./postFormSlice\";\r\nimport UploadImage from \"./UploadImage/UploadImage\";\r\nimport UserInfo from \"./UserInfo/UserInfo\";\r\n\r\nconst initialValues: PostCreateDto = {\r\n  body: \"\",\r\n  images: [],\r\n};\r\n\r\nconst validationSchema = yup.object({\r\n  body: yup.string().trim().required(),\r\n});\r\n\r\nexport default function PostForm(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const isSubmitting = useAppSelector(getIsSubmitting);\r\n\r\n  const { values, ...formik } = useFormik({\r\n    initialValues,\r\n    validationSchema,\r\n    onSubmit(post: PostCreateDto) {\r\n      dispatch(actions.createPost(post));\r\n    },\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    formik.setSubmitting(isSubmitting);\r\n    if (!isSubmitting) {\r\n      formik.resetForm();\r\n    }\r\n  }, [isSubmitting]);\r\n\r\n  const uploadDisabled = isSubmitting || values.images.length > 9;\r\n\r\n  function handleAddImage(event: React.ChangeEvent<HTMLInputElement>) {\r\n    const file: File | undefined = event.target.files?.[0];\r\n\r\n    if (file && file.type.match(\"image.*\")) {\r\n      formik.setFieldValue(\"images\", [...values.images, URL.createObjectURL(file)]);\r\n    }\r\n\r\n    event.target.value = \"\";\r\n  }\r\n\r\n  function handleDeleteImage(index: number) {\r\n    const images = [...values.images];\r\n    images.splice(index, 1);\r\n    formik.setFieldValue(\"images\", images);\r\n  }\r\n\r\n  return (\r\n    <Paper elevation={4}>\r\n      <Box px={2} py={1} bgcolor=\"grey.300\">\r\n        <UserInfo />\r\n      </Box>\r\n\r\n      <form autoComplete=\"off\" onSubmit={formik.handleSubmit} onReset={formik.handleReset}>\r\n        <Box px={3} pt={3} bgcolor=\"background.paper\">\r\n          <TextField\r\n            id=\"body\"\r\n            name=\"body\"\r\n            placeholder=\"What's new?\"\r\n            variant=\"outlined\"\r\n            rows={4}\r\n            rowsMax={5}\r\n            value={values.body}\r\n            onChange={formik.handleChange}\r\n            onBlur={formik.handleBlur}\r\n            disabled={isSubmitting}\r\n            multiline\r\n            fullWidth\r\n          />\r\n        </Box>\r\n\r\n        <Box display=\"flex\" justifyContent=\"flex-start\" p={2}>\r\n          <input\r\n            id=\"addImage\"\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={handleAddImage}\r\n            hidden\r\n            disabled={uploadDisabled}\r\n          />\r\n          <label htmlFor=\"addImage\">\r\n            <IconButton component=\"span\" color=\"secondary\" disabled={uploadDisabled}>\r\n              <AddAPhoto color=\"inherit\" />\r\n            </IconButton>\r\n          </label>\r\n\r\n          <IconButton color=\"secondary\" disabled={isSubmitting}>\r\n            <PlayCircleOutline color=\"inherit\" />\r\n          </IconButton>\r\n        </Box>\r\n\r\n        {!!values.images.length && (\r\n          <Box px={3} pb={3}>\r\n            <ImageGrid\r\n              imagesCount={values.images.length}\r\n              renderImage={(index: number) => (\r\n                <UploadImage\r\n                  url={values.images[index]}\r\n                  deleteDisabled={isSubmitting}\r\n                  onDelete={() => handleDeleteImage(index)}\r\n                />\r\n              )}\r\n            />\r\n          </Box>\r\n        )}\r\n\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" p={2} bgcolor=\"grey.300\">\r\n          <Button type=\"submit\" variant=\"contained\" color=\"primary\" disabled={isSubmitting}>\r\n            post\r\n          </Button>\r\n        </Box>\r\n      </form>\r\n    </Paper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, CircularProgress } from \"@material-ui/core\";\r\n\r\nexport default function Progress(\r\n  props: React.ComponentProps<typeof CircularProgress>,\r\n): JSX.Element {\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n      <CircularProgress color=\"secondary\" {...props} />\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Paper,\r\n  Box,\r\n  TextField,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\n\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport Progress from \"components/Progress/Progress\";\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\nimport { actions, getLoading, getSearchText, getUsers } from \"./userListSlice\";\r\n\r\nexport default function UserList(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const loading = useAppSelector(getLoading);\r\n\r\n  const searchText = useAppSelector(getSearchText);\r\n\r\n  const users = useAppSelector(getUsers);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.searchUsers());\r\n  }, []);\r\n\r\n  return (\r\n    <Paper elevation={4}>\r\n      <Box padding={2}>\r\n        <TextField\r\n          id=\"searchText\"\r\n          variant=\"outlined\"\r\n          placeholder=\"Search user...\"\r\n          value={searchText}\r\n          onChange={(e) => dispatch(actions.changeSearchText(e.target.value))}\r\n          InputProps={{\r\n            endAdornment: <>{loading && <Progress size={20} />}</>,\r\n          }}\r\n          fullWidth\r\n        />\r\n\r\n        {!users.length && !loading && (\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" mt={2}>\r\n            <Typography color=\"textSecondary\" align=\"center\">\r\n              No matching users...\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n\r\n        {!!users.length && (\r\n          <List>\r\n            {users.map((x) => (\r\n              <NavLink key={x.id} to={`/${x.id}`}>\r\n                <ListItem button>\r\n                  <ListItemIcon>\r\n                    <Avatar src={x.avatarUrl} />\r\n                  </ListItemIcon>\r\n\r\n                  <ListItemText primary={getUserName(x)} />\r\n                </ListItem>\r\n              </NavLink>\r\n            ))}\r\n          </List>\r\n        )}\r\n      </Box>\r\n    </Paper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nimport Progress from \"components/Progress/Progress\";\r\n\r\nexport default function PageProgress(): JSX.Element {\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"100vh\">\r\n      <Progress />\r\n    </Box>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\nimport { grey } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    typo: {\r\n      color: grey[500],\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Typography, Grid, GridSpacing } from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { capitalizeFirstLetter } from \"utils/stringUtils\";\r\n\r\nimport { getProfile } from \"../profileSlice\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\nconst SPACING: GridSpacing = 1;\r\n\r\nexport default function AdditionalInfo(): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dateOfBirth = useAppSelector((state) => getProfile(state).dateOfBirth);\r\n\r\n  const about = useAppSelector((state) => getProfile(state).about);\r\n\r\n  return (\r\n    <Grid container spacing={SPACING}>\r\n      <Grid container item spacing={SPACING}>\r\n        <Grid item xs={3}>\r\n          <Typography className={classes.typo}>Date of birth:</Typography>\r\n        </Grid>\r\n\r\n        <Grid item xs={9}>\r\n          <Typography variant=\"body2\">\r\n            {capitalizeFirstLetter(moment(dateOfBirth).format(\"LL\").toLocaleLowerCase())}\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Grid container item spacing={SPACING}>\r\n        <Grid item xs={3}>\r\n          <Typography className={classes.typo}>About:</Typography>\r\n        </Grid>\r\n\r\n        <Grid item xs={9}>\r\n          <Typography variant=\"body2\">{about}</Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nexport default function EditButton(props: React.ComponentProps<typeof IconButton>): JSX.Element {\r\n  return (\r\n    <IconButton {...props}>\r\n      <EditIcon color=\"secondary\" />\r\n    </IconButton>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n  TextField,\r\n  Button,\r\n} from \"@material-ui/core\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\n\r\nimport { actions, getProfile } from \"../profileSlice\";\r\n\r\ntype DialogProps = React.ComponentProps<typeof Dialog>;\r\n\r\ntype DeleteProfileDialogProps = Omit<DialogProps, \"onClose\"> & {\r\n  onClose: () => void;\r\n};\r\n\r\nexport default function DeleteProfileDialog(props: DeleteProfileDialogProps): JSX.Element {\r\n  const { onClose } = props;\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const email = useAppSelector((state) => getProfile(state).email);\r\n\r\n  const [emailConfirm, setEmailConfirm] = React.useState(\"\");\r\n\r\n  function handleDelete() {\r\n    dispatch(actions.deleteProfile());\r\n  }\r\n\r\n  return (\r\n    <Dialog {...props}>\r\n      <DialogTitle>Are you sure you want to delete your profile?</DialogTitle>\r\n\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          To confirm your action, please enter your email address here\r\n        </DialogContentText>\r\n\r\n        <TextField\r\n          id=\"email\"\r\n          label=\"Email Address\"\r\n          type=\"email\"\r\n          margin=\"dense\"\r\n          value={emailConfirm}\r\n          onChange={(e) => setEmailConfirm(e.target.value)}\r\n          fullWidth\r\n          autoFocus\r\n        />\r\n      </DialogContent>\r\n\r\n      <DialogActions>\r\n        <Button variant=\"outlined\" color=\"primary\" onClick={onClose}>\r\n          Cancel\r\n        </Button>\r\n\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          disabled={email !== emailConfirm}\r\n          onClick={handleDelete}\r\n        >\r\n          OK\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\nimport { grey } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => {\r\n  const color = grey[500];\r\n\r\n  return createStyles({\r\n    avatar: {\r\n      width: theme.spacing(15),\r\n      height: theme.spacing(15),\r\n    },\r\n    userName: {\r\n      fontWeight: \"bold\",\r\n    },\r\n    userEmail: {\r\n      color,\r\n    },\r\n  });\r\n});\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\n\r\nimport ViewStatus from \"./ViewStatus/ViewStatus\";\r\nimport EditStatus from \"./EditStatus/EditStatus\";\r\n\r\nenum StatusMode {\r\n  view,\r\n  edit,\r\n}\r\n\r\nexport default function Status(): JSX.Element {\r\n  const [mode, setMode] = React.useState(StatusMode.view);\r\n\r\n  switch (mode) {\r\n    case StatusMode.view:\r\n      return <ViewStatus onEdit={() => setMode(StatusMode.edit)} />;\r\n    case StatusMode.edit:\r\n      return <EditStatus onClose={() => setMode(StatusMode.view)} />;\r\n    default:\r\n      throw new Error();\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { actions, getProfile } from \"pages/Profile/profileSlice\";\r\n\r\nexport default function FollowButton(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const isFollow: boolean = useAppSelector((state) => getProfile(state).isCurrentUserFollow);\r\n\r\n  return (\r\n    <Button\r\n      variant={isFollow ? \"outlined\" : \"contained\"}\r\n      color=\"primary\"\r\n      style={{ textTransform: \"none\" }}\r\n      onClick={() => dispatch(actions.toggleFollowProfile())}\r\n    >\r\n      {isFollow ? \"Unfollow\" : \"Follow\"}\r\n    </Button>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, Avatar, Typography } from \"@material-ui/core\";\r\n\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport DeleteButton from \"components/Buttons/DeleteButton/DeleteButton\";\r\nimport EditButton from \"components/Buttons/EditButton/EditButton\";\r\nimport type UserProfileDto from \"model/dto/userProfile/UserProfileDto\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\nimport DeleteProfileDialog from \"../DeleteProfileDialog/DeleteProfileDialog\";\r\nimport { getIsCurrentUserProfile, getProfile } from \"../profileSlice\";\r\n\r\nimport useStyles from \"./useStyles\";\r\nimport FollowButton from \"./FollowButton/FollowButton\";\r\n\r\nexport default function MainInfo(): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const profile: UserProfileDto = useAppSelector(getProfile);\r\n\r\n  const isCurrentUserProfile = useAppSelector(getIsCurrentUserProfile);\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Box display=\"flex\">\r\n        <Avatar className={classes.avatar} src={profile.avatarUrl} />\r\n\r\n        <Box display=\"flex\" flexDirection=\"column\" ml={2}>\r\n          <Typography className={classes.userName} variant=\"h6\">\r\n            {getUserName(profile)}\r\n          </Typography>\r\n\r\n          {isCurrentUserProfile && (\r\n            <Typography className={classes.userEmail} variant=\"body2\">\r\n              {profile.email}\r\n            </Typography>\r\n          )}\r\n        </Box>\r\n      </Box>\r\n\r\n      <Box flexGrow=\"1\" />\r\n\r\n      <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"flex-start\">\r\n        {isCurrentUserProfile ? (\r\n          <div>\r\n            <NavLink\r\n              to={{\r\n                pathname: `${profile.userId}/edit`,\r\n                state: {\r\n                  profileId: profile.id,\r\n                },\r\n              }}\r\n            >\r\n              <EditButton />\r\n            </NavLink>\r\n\r\n            <DeleteButton onClick={() => setOpen(true)} />\r\n          </div>\r\n        ) : (\r\n          <FollowButton />\r\n        )}\r\n      </Box>\r\n\r\n      <DeleteProfileDialog open={open} onClose={() => setOpen(false)} />\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\n\r\nimport EditButton from \"components/Buttons/EditButton/EditButton\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { getIsCurrentUserProfile, getProfile } from \"pages/Profile/profileSlice\";\r\n\r\ntype ViewStatusProps = {\r\n  onEdit: () => void;\r\n};\r\n\r\nexport default function ViewStatus({ onEdit }: ViewStatusProps): JSX.Element {\r\n  const status = useAppSelector((state) => getProfile(state).status);\r\n\r\n  const isCurrentUserProfile = useAppSelector(getIsCurrentUserProfile);\r\n\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\" maxWidth=\"100%\">\r\n      <Box flexGrow=\"1\">\r\n        {status ? (\r\n          <Typography style={{ overflowWrap: \"anywhere\" }}>{status}</Typography>\r\n        ) : (\r\n          isCurrentUserProfile && (\r\n            <Typography variant=\"body2\" color=\"textSecondary\">\r\n              Set status\r\n            </Typography>\r\n          )\r\n        )}\r\n      </Box>\r\n\r\n      {isCurrentUserProfile && <EditButton onClick={onEdit} />}\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, TextField, Button } from \"@material-ui/core\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { actions, getProfile } from \"pages/Profile/profileSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\n\r\ntype EditStatusProps = {\r\n  onClose: () => void;\r\n};\r\n\r\nexport default function EditStatus({ onClose }: EditStatusProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const status = (useAppSelector((state) => getProfile(state).status) ?? \"\").trim();\r\n\r\n  const [text, setText] = React.useState(status);\r\n\r\n  function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\r\n    event.preventDefault();\r\n\r\n    const newStatus = text.trim();\r\n\r\n    if (status !== newStatus) {\r\n      dispatch(actions.setStatus(newStatus));\r\n    }\r\n\r\n    onClose();\r\n  }\r\n\r\n  function handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    setText(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <Box display=\"flex\" flexDirection=\"column\">\r\n        <TextField\r\n          id=\"text\"\r\n          name=\"text\"\r\n          variant=\"outlined\"\r\n          rows={4}\r\n          rowsMax={5}\r\n          value={text}\r\n          onChange={handleChange}\r\n          inputProps={{\r\n            maxLength: 200,\r\n          }}\r\n          multiline\r\n          fullWidth\r\n        />\r\n\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" mt={1}>\r\n          <Box display=\"flex\">\r\n            <Button variant=\"outlined\" color=\"primary\" onClick={onClose}>\r\n              cancel\r\n            </Button>\r\n\r\n            <Box ml={2}>\r\n              <Button type=\"submit\" variant=\"contained\" color=\"primary\">\r\n                add\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </form>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\ntype TabPanelProps = {\r\n  index: number;\r\n  value: number;\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport default function TabPanel({ value, index, children }: TabPanelProps): JSX.Element {\r\n  return (\r\n    <div style={{ display: value === index ? \"block\" : \"none\", width: \"100%\" }}>{children}</div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\n\r\nimport { actions, getIsFollow } from \"../../followingsSectionSlice\";\r\n\r\ntype FollowButtonProps = {\r\n  followingId: string;\r\n};\r\n\r\nexport default function FollowButton({ followingId }: FollowButtonProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const isFollow: boolean = useAppSelector((state) => getIsFollow(state, followingId));\r\n\r\n  return (\r\n    <Button\r\n      variant={isFollow ? \"outlined\" : \"contained\"}\r\n      color=\"primary\"\r\n      style={{ textTransform: \"none\" }}\r\n      onClick={() => dispatch(actions.toggleFollow(followingId))}\r\n    >\r\n      {isFollow ? \"Unfollow\" : \"Follow\"}\r\n    </Button>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    avatar: {\r\n      width: theme.spacing(10),\r\n      height: theme.spacing(10),\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Box, Avatar, Typography, Grid, Link } from \"@material-ui/core\";\r\n\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { wrap } from \"utils/stringUtils\";\r\nimport type FollowingDto from \"model/dto/following/FollowingDto\";\r\nimport { getIsCurrentUserProfile } from \"pages/Profile/profileSlice\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\nimport { getFollowingInfo } from \"../followingsSectionSlice\";\r\n\r\nimport FollowButton from \"./FollowButton/FollowButton\";\r\nimport useStyles from \"./useStyles\";\r\n\r\ntype FollowingProps = {\r\n  followingId: string;\r\n};\r\n\r\nexport default function Following({ followingId }: FollowingProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const following: FollowingDto = useAppSelector((state) => getFollowingInfo(state, followingId));\r\n\r\n  const isCurrentUserProfile = useAppSelector(getIsCurrentUserProfile);\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Box display=\"flex\" justifyContent=\"center\">\r\n        <Avatar className={classes.avatar} src={following.avatarUrl} />\r\n      </Box>\r\n\r\n      <Box ml={4}>\r\n        <Grid container direction=\"column\" spacing={1}>\r\n          <Grid item xs>\r\n            <NavLink to={following.userId}>\r\n              <Link>{getUserName(following)}</Link>\r\n            </NavLink>\r\n          </Grid>\r\n\r\n          <Grid item xs>\r\n            <Typography variant=\"body2\">\r\n              {!!following.status && wrap(following.status, 50)}\r\n            </Typography>\r\n          </Grid>\r\n\r\n          <Grid item xs>\r\n            {isCurrentUserProfile && <FollowButton followingId={followingId} />}\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\n\r\nimport { actions, getFollowingIds } from \"../followingsSectionSlice\";\r\nimport Following from \"../Following/Following\";\r\n\r\nexport default function FollowingList(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const followingIds: string[] = useAppSelector(getFollowingIds);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.fetchFollowings());\r\n  }, []);\r\n\r\n  return (\r\n    <Grid container direction=\"column\" spacing={5}>\r\n      {followingIds.map((id) => (\r\n        <Grid key={id} item xs>\r\n          <Following followingId={id} />\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { TextField } from \"@material-ui/core\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport Progress from \"components/Progress/Progress\";\r\n\r\nimport { actions, getLoading, getSearchText } from \"../followingsSectionSlice\";\r\n\r\nexport default function FollowingsSearch(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const searchText = useAppSelector(getSearchText);\r\n\r\n  const loading = useAppSelector(getLoading);\r\n\r\n  function handleOnChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    dispatch(actions.changeSearchText(event.target.value));\r\n  }\r\n\r\n  return (\r\n    <TextField\r\n      name=\"searchText\"\r\n      placeholder=\"Search by followings...\"\r\n      variant=\"outlined\"\r\n      value={searchText}\r\n      onChange={handleOnChange}\r\n      InputProps={{\r\n        endAdornment: <>{loading && <Progress size={20} />}</>,\r\n      }}\r\n      fullWidth\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nimport FollowingList from \"./FollowingList/FollowingList\";\r\nimport FollowingsSearch from \"./FollowingsSearch/FollowingsSearch\";\r\n\r\nexport default function FollowingsSection(): JSX.Element {\r\n  return (\r\n    <Box display=\"flex\" flexDirection=\"column\">\r\n      <FollowingsSearch />\r\n\r\n      <Box mt={2}>\r\n        <FollowingList />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    avatar: {\r\n      width: theme.spacing(10),\r\n      height: theme.spacing(10),\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Box, Avatar, Typography, Grid, Link, Button } from \"@material-ui/core\";\r\n\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { wrap } from \"utils/stringUtils\";\r\nimport type FollowerDto from \"model/dto/follower/FollowerDto\";\r\nimport { getIsCurrentUserProfile } from \"pages/Profile/profileSlice\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\nimport { actions, getFollowerInfo, getBlocked } from \"../followersSectionSlice\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\ntype FollowingProps = {\r\n  followerId: string;\r\n};\r\n\r\nexport default function Follower({ followerId }: FollowingProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const follower: FollowerDto = useAppSelector((state) => getFollowerInfo(state, followerId));\r\n\r\n  const blocked: boolean = useAppSelector((state) => getBlocked(state, followerId));\r\n\r\n  const isCurrentUserProfile = useAppSelector(getIsCurrentUserProfile);\r\n\r\n  function handleBlockFollower() {\r\n    dispatch(actions.blockFollower(followerId));\r\n  }\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Box display=\"flex\" justifyContent=\"center\">\r\n        <Avatar className={classes.avatar} src={follower.avatarUrl} />\r\n      </Box>\r\n\r\n      <Box ml={4}>\r\n        <Grid container direction=\"column\" spacing={1}>\r\n          <Grid item xs>\r\n            <NavLink to={follower.followerId}>\r\n              <Link>{getUserName(follower)}</Link>\r\n            </NavLink>\r\n          </Grid>\r\n\r\n          <Grid item xs>\r\n            <Typography variant=\"body2\">\r\n              {!!follower.status && wrap(follower.status, 50)}\r\n            </Typography>\r\n          </Grid>\r\n\r\n          <Grid item xs>\r\n            {isCurrentUserProfile\r\n              && (blocked ? (\r\n                <Typography variant=\"body2\" color=\"textSecondary\">\r\n                  user was blocked\r\n                </Typography>\r\n              ) : (\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  style={{ textTransform: \"none\" }}\r\n                  onClick={handleBlockFollower}\r\n                >\r\n                  Block\r\n                </Button>\r\n              ))}\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\n\r\nimport { actions, getFollowerIds } from \"../followersSectionSlice\";\r\nimport Follower from \"../Follower/Follower\";\r\n\r\nexport default function FollowerList(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const followerIds: string[] = useAppSelector(getFollowerIds);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.fetchFollowers());\r\n  }, []);\r\n\r\n  return (\r\n    <Grid container direction=\"column\" spacing={5}>\r\n      {followerIds.map((id) => (\r\n        <Grid key={id} item xs>\r\n          <Follower followerId={id} />\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { TextField } from \"@material-ui/core\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport Progress from \"components/Progress/Progress\";\r\n\r\nimport { actions, getLoading, getSearchText } from \"../followersSectionSlice\";\r\n\r\nexport default function FollowersSearch(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const searchText = useAppSelector(getSearchText);\r\n\r\n  const loading = useAppSelector(getLoading);\r\n\r\n  function handleOnChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    dispatch(actions.changeSearchText(event.target.value));\r\n  }\r\n\r\n  return (\r\n    <TextField\r\n      name=\"searchText\"\r\n      placeholder=\"Search by followers...\"\r\n      variant=\"outlined\"\r\n      value={searchText}\r\n      onChange={handleOnChange}\r\n      InputProps={{\r\n        endAdornment: <>{loading && <Progress size={20} />}</>,\r\n      }}\r\n      fullWidth\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nimport FollowerList from \"./FollowerList/FollowerList\";\r\nimport FollowersSearch from \"./FollowersSearch/FollowersSearch\";\r\n\r\nexport default function FollowersSection(): JSX.Element {\r\n  return (\r\n    <Box display=\"flex\" flexDirection=\"column\">\r\n      <FollowersSearch />\r\n\r\n      <Box mt={2}>\r\n        <FollowerList />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\n\r\nimport PostList, { usePostList } from \"components/PostList/PostList\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { getProfile } from \"pages/Profile/profileSlice\";\r\nimport Progress from \"components/Progress/Progress\";\r\n\r\nexport default function PostsSection(): JSX.Element {\r\n  const userId = useAppSelector((state) => getProfile(state).userId);\r\n\r\n  const [loaded, hasAnyPosts] = usePostList(userId);\r\n\r\n  function Content() {\r\n    if (!loaded) {\r\n      return <Progress />;\r\n    }\r\n\r\n    if (!hasAnyPosts) {\r\n      return <Typography color=\"textSecondary\">There are no posts yet</Typography>;\r\n    }\r\n\r\n    return <PostList />;\r\n  }\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n      <Content />\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, Paper, Tabs, Tab } from \"@material-ui/core\";\r\n\r\nimport TabPanel from \"components/TabPanel/TabPanel\";\r\n\r\nimport FollowingsSection from \"./FollowingsSection/FollowingsSection\";\r\nimport FollowersSection from \"./FollowersSection/FollowersSection\";\r\nimport PostsSection from \"./PostsSection/PostsSection\";\r\n\r\nexport default function ProfileSections(): JSX.Element {\r\n  const [currentTab, setCurrentTab] = React.useState(0);\r\n\r\n  return (\r\n    <div>\r\n      <Paper style={{ width: \"100%\" }}>\r\n        <Tabs\r\n          value={currentTab}\r\n          onChange={(_, tab: number) => setCurrentTab(tab)}\r\n          variant=\"fullWidth\"\r\n        >\r\n          {[\"POSTS\", \"FOLLOWINGS\", \"FOLLOWERS\"].map((x) => (\r\n            <Tab key={x} label={x} />\r\n          ))}\r\n        </Tabs>\r\n      </Paper>\r\n\r\n      <TabPanel value={currentTab} index={0}>\r\n        <Box py={2}>\r\n          <PostsSection />\r\n        </Box>\r\n      </TabPanel>\r\n\r\n      <TabPanel value={currentTab} index={1}>\r\n        <Box py={2}>\r\n          <FollowingsSection />\r\n        </Box>\r\n      </TabPanel>\r\n\r\n      <TabPanel value={currentTab} index={2}>\r\n        <Box py={2}>\r\n          <FollowersSection />\r\n        </Box>\r\n      </TabPanel>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Container, Box, Paper, Divider, Link, Collapse } from \"@material-ui/core\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nimport Header from \"components/Header/Header\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport PageProgress from \"components/PageProgress/PageProgress\";\r\n\r\nimport { actions, getLoaded } from \"./profileSlice\";\r\nimport AdditionalInfo from \"./AdditionalInfo/AdditionalInfo\";\r\nimport MainInfo from \"./MainInfo/MainInfo\";\r\nimport Status from \"./Status/Status\";\r\nimport ProfileSections from \"./ProfileSections/ProfileSections\";\r\n\r\ntype ProfileParams = {\r\n  userId: string;\r\n};\r\n\r\nexport default function Profile(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const history = useHistory();\r\n\r\n  const { userId } = useParams<ProfileParams>();\r\n\r\n  const loaded = useAppSelector(getLoaded);\r\n\r\n  React.useEffect(() => {\r\n    if (!loaded) {\r\n      dispatch(actions.fetchProfile(userId));\r\n    }\r\n  }, [userId, loaded]);\r\n\r\n  // TODO: not fires when using backward/forward arrows inside browser window\r\n  React.useEffect(() => history.listen(() => dispatch(actions.reset())), []);\r\n\r\n  return loaded ? <PageContent /> : <PageProgress />;\r\n}\r\n\r\nfunction PageContent(): JSX.Element {\r\n  const [showInfo, setShowInfo] = React.useState(false);\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n\r\n      <Box mt={12}>\r\n        <Container maxWidth=\"sm\">\r\n          <Paper>\r\n            <Box display=\"flex\" flexDirection=\"column\" px={3} pt={6}>\r\n              <MainInfo />\r\n\r\n              <Box mt={2}>\r\n                <Divider />\r\n              </Box>\r\n\r\n              <Status />\r\n\r\n              <Box my={1}>\r\n                <Link style={{ cursor: \"pointer\" }} onClick={() => setShowInfo(!showInfo)}>\r\n                  {showInfo ? \"Hide\" : \"Show\"}\n                  {' '}\n                  more information\r\n                </Link>\r\n              </Box>\r\n\r\n              <Collapse in={showInfo}>\r\n                <Box mt={1}>\r\n                  <AdditionalInfo />\r\n                </Box>\r\n              </Collapse>\r\n\r\n              <Box display=\"flex\" justifyContent=\"center\" mt={2}>\r\n                <ProfileSections />\r\n              </Box>\r\n            </Box>\r\n          </Paper>\r\n        </Container>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nexport default function Title(): JSX.Element {\r\n  return (\r\n    <Typography style={{ textTransform: \"uppercase\" }} variant=\"h4\" color=\"primary\">\r\n      edit profile\r\n    </Typography>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    avatar: {\r\n      width: theme.spacing(25),\r\n      height: theme.spacing(25),\r\n    },\r\n    avatarIcon: {\r\n      width: theme.spacing(10),\r\n      height: theme.spacing(10),\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Container, Box, Paper, Button, TextField, Avatar } from \"@material-ui/core\";\r\nimport { CloudUpload, PhotoCameraOutlined } from \"@material-ui/icons\";\r\nimport { useFormik } from \"formik\";\r\nimport * as yup from \"yup\";\r\nimport { Redirect, useHistory, useLocation } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\n\r\nimport Header from \"components/Header/Header\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport PageProgress from \"components/PageProgress/PageProgress\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport type UserProfileEditDto from \"model/dto/userProfile/UserProfileEditDto\";\r\n\r\nimport {\r\n  actions,\r\n  getIsSubmitting,\r\n  getSubmitted,\r\n  getLoaded,\r\n  getProfile,\r\n} from \"./profileEditorSlice\";\r\nimport Title from \"./Title/Title\";\r\nimport useStyles from \"./useStyles\";\r\n\r\nconst SPACING = 2;\r\n\r\ntype ProfileEditorLocationState = {\r\n  profileId: string;\r\n};\r\n\r\nconst today = format();\r\n\r\nfunction format(date?: string) {\r\n  return moment(date).format(\"YYYY-MM-DD\");\r\n}\r\n\r\nconst validationSchema = yup.object({\r\n  firstName: yup.string().trim().required(\"Required\").max(50),\r\n  lastName: yup.string().trim().required(\"Required\").max(50),\r\n  dateOfBirth: yup.date().required(\"Required\").max(today),\r\n  avatarUrl: yup.string().notRequired(),\r\n  about: yup.string().notRequired().max(800),\r\n});\r\n\r\nexport default function ProfileEditor(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const { state } = useLocation<ProfileEditorLocationState | undefined>();\r\n\r\n  const profileId = state?.profileId;\r\n\r\n  const loaded = useAppSelector(getLoaded);\r\n\r\n  React.useEffect(() => {\r\n    if (profileId) {\r\n      dispatch(actions.fetchProfile(profileId));\r\n    }\r\n  }, [profileId]);\r\n\r\n  if (!profileId) {\r\n    return <Redirect to=\"*\" />;\r\n  }\r\n\r\n  return loaded ? <PageContent /> : <PageProgress />;\r\n}\r\n\r\nfunction PageContent(): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const history = useHistory();\r\n\r\n  const profile = useAppSelector(getProfile);\r\n\r\n  const initialValues: UserProfileEditDto = {\r\n    ...profile,\r\n    dateOfBirth: format(profile.dateOfBirth),\r\n  };\r\n\r\n  const isSubmitting = useAppSelector(getIsSubmitting);\r\n\r\n  const submitted = useAppSelector(getSubmitted);\r\n\r\n  React.useEffect(() => {\r\n    if (submitted) {\r\n      history.goBack();\r\n      dispatch(actions.reset());\r\n    }\r\n  }, [submitted]);\r\n\r\n  const { values, touched, errors, dirty, isValid, ...formik } = useFormik({\r\n    initialValues,\r\n    validationSchema,\r\n    onSubmit: () => {\r\n      dispatch(actions.saveProfile(values));\r\n    },\r\n  });\r\n\r\n  function handleFileUpload(event: React.ChangeEvent<HTMLInputElement>) {\r\n    const file: File | undefined = event.target.files?.[0];\r\n    if (file) {\r\n      formik.setFieldValue(\"avatarUrl\", URL.createObjectURL(file));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n\r\n      <Box mt={12}>\r\n        <Container maxWidth=\"sm\">\r\n          <Paper>\r\n            <Box display=\"flex\" justifyContent=\"center\" p={6}>\r\n              <Title />\r\n            </Box>\r\n\r\n            <Box display=\"flex\" justifyContent=\"center\">\r\n              <Avatar className={classes.avatar} src={values.avatarUrl}>\r\n                <PhotoCameraOutlined className={classes.avatarIcon} />\r\n              </Avatar>\r\n            </Box>\r\n\r\n            <Box display=\"flex\" justifyContent=\"center\" mt={2}>\r\n              <input\r\n                id=\"upload-image\"\r\n                form=\"form\"\r\n                type=\"file\"\r\n                accept=\"image/png\"\r\n                style={{ display: \"none\" }}\r\n                onChange={handleFileUpload}\r\n              />\r\n\r\n              <label htmlFor=\"upload-image\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  component=\"span\"\r\n                  startIcon={<CloudUpload />}\r\n                >\r\n                  upload image\r\n                </Button>\r\n              </label>\r\n            </Box>\r\n\r\n            <Box mt={2}>\r\n              <form\r\n                id=\"form\"\r\n                autoComplete=\"off\"\r\n                onSubmit={formik.handleSubmit}\r\n                onReset={formik.handleReset}\r\n              >\r\n                <Box display=\"flex\" flexDirection=\"column\" p={2}>\r\n                  <TextField\r\n                    id=\"firstName\"\r\n                    label=\"First name\"\r\n                    variant=\"outlined\"\r\n                    value={values.firstName}\r\n                    helperText={touched.firstName && errors.firstName}\r\n                    error={touched.firstName && !!errors.firstName}\r\n                    disabled={isSubmitting}\r\n                    onChange={formik.handleChange}\r\n                    onBlur={formik.handleBlur}\r\n                    fullWidth\r\n                  />\r\n\r\n                  <Box mt={SPACING}>\r\n                    <TextField\r\n                      id=\"lastName\"\r\n                      label=\"Last name\"\r\n                      variant=\"outlined\"\r\n                      value={values.lastName}\r\n                      helperText={touched.lastName && errors.lastName}\r\n                      error={touched.lastName && !!errors.lastName}\r\n                      disabled={isSubmitting}\r\n                      onChange={formik.handleChange}\r\n                      onBlur={formik.handleBlur}\r\n                      fullWidth\r\n                    />\r\n                  </Box>\r\n\r\n                  <Box mt={SPACING}>\r\n                    <TextField\r\n                      id=\"dateOfBirth\"\r\n                      label=\"Date of birth\"\r\n                      type=\"date\"\r\n                      variant=\"outlined\"\r\n                      value={values.dateOfBirth}\r\n                      helperText={touched.dateOfBirth && errors.dateOfBirth}\r\n                      error={touched.dateOfBirth && !!errors.dateOfBirth}\r\n                      disabled={isSubmitting}\r\n                      onChange={formik.handleChange}\r\n                      onBlur={formik.handleBlur}\r\n                      InputLabelProps={{\r\n                        shrink: true,\r\n                      }}\r\n                      fullWidth\r\n                    />\r\n                  </Box>\r\n\r\n                  <Box mt={SPACING}>\r\n                    <TextField\r\n                      id=\"about\"\r\n                      label=\"About\"\r\n                      variant=\"outlined\"\r\n                      rowsMax={10}\r\n                      value={values.about}\r\n                      helperText={touched.about && errors.about}\r\n                      error={touched.about && !!errors.about}\r\n                      disabled={isSubmitting}\r\n                      onChange={formik.handleChange}\r\n                      onBlur={formik.handleBlur}\r\n                      multiline\r\n                      fullWidth\r\n                    />\r\n                  </Box>\r\n\r\n                  <Box display=\"flex\" justifyContent=\"flex-end\" mt={2}>\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      color=\"primary\"\r\n                      disabled={isSubmitting}\r\n                      onClick={() => history.goBack()}\r\n                    >\r\n                      cancel\r\n                    </Button>\r\n\r\n                    <Box ml={1}>\r\n                      <Button\r\n                        type=\"submit\"\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={!(dirty && isValid && !isSubmitting)}\r\n                      >\r\n                        save\r\n                      </Button>\r\n                    </Box>\r\n                  </Box>\r\n                </Box>\r\n              </form>\r\n            </Box>\r\n          </Paper>\r\n        </Container>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link, Typography } from \"@material-ui/core\";\r\n\r\nexport default function Copyright(): JSX.Element {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\">\r\n      {\"Copyright © \"}\r\n      <Link color=\"inherit\">Social Media App</Link>\r\n      {` ${new Date().getFullYear()}.`}\r\n    </Typography>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { IconButton, TextField } from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\n\r\ntype PasswordFieldProps = React.ComponentProps<typeof TextField>;\r\n\r\nexport default function PasswordField(props: PasswordFieldProps): JSX.Element {\r\n  const [showPassword, setShowPassword] = React.useState(false);\r\n\r\n  return (\r\n    <TextField\r\n      autoComplete=\"current-password\"\r\n      variant=\"outlined\"\r\n      {...props}\r\n      type={showPassword ? \"text\" : \"password\"}\r\n      InputProps={{\r\n        // eslint-disable-next-line react/destructuring-assignment\r\n        ...props.InputProps,\r\n        endAdornment: (\r\n          <IconButton edge=\"end\" onClick={() => setShowPassword(!showPassword)}>\r\n            {showPassword ? <Visibility /> : <VisibilityOff />}\r\n          </IconButton>\r\n        ),\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      backgroundColor: theme.palette.background.paper,\r\n      height: \"100vh\",\r\n      paddingTop: theme.spacing(4),\r\n    },\r\n    avatar: {\r\n      backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    icon: {\r\n      color: theme.palette.common.white,\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    link: {\r\n      \"&:hover\": {\r\n        cursor: \"pointer\",\r\n      },\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Box, Typography, Link } from \"@material-ui/core\";\r\n\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\nexport default function Links(): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"space-between\">\r\n      <Link className={classes.link}>\r\n        <Typography variant=\"body2\">Forgot password?</Typography>\r\n      </Link>\r\n\r\n      <NavLink to=\"/registration\">\r\n        <Link className={classes.link}>\r\n          <Typography variant=\"body2\">Sign up</Typography>\r\n        </Link>\r\n      </NavLink>\r\n    </Box>\r\n  );\r\n}\r\n","/* eslint-disable @typescript-eslint/no-shadow */\r\nimport React from \"react\";\r\nimport {\r\n  Container,\r\n  Box,\r\n  Button,\r\n  Avatar,\r\n  FormControlLabel,\r\n  Checkbox,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { LockOutlined } from \"@material-ui/icons\";\r\nimport { Formik, Form } from \"formik\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport * as yup from \"yup\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\nimport Copyright from \"components/Copyright/Copyright\";\r\nimport PasswordField from \"components/PasswordField/PasswordField\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport type LoginVm from \"model/login/loginVm\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nimport { actions, getErrors, getIsSubmitting } from \"./loginSlice\";\r\nimport useStyles from \"./useStyles\";\r\nimport Links from \"./Links/Links\";\r\n\r\nconst SPACING = 2;\r\n\r\ntype FormValues = LoginVm & {\r\n  rememberMe: boolean;\r\n};\r\n\r\nconst initialValues: FormValues = {\r\n  email: \"\",\r\n  password: \"\",\r\n  rememberMe: false,\r\n};\r\n\r\nconst validationSchema = yup.object({\r\n  email: yup.string().trim().required(\"Required\"),\r\n  password: yup.string().trim().required(\"Required\"),\r\n});\r\n\r\ntype LoginLocationState = {\r\n  from?: Location;\r\n};\r\n\r\nexport default function Login(): JSX.Element {\r\n  const classes = useStyles();\r\n  const dispatch = useAppDispatch();\r\n  const location = useLocation<LoginLocationState>();\r\n  const history = useHistory();\r\n\r\n  const isSubmitting = useAppSelector(getIsSubmitting);\r\n  const isLoggedIn = useAppSelector((state) => !!getUser(state));\r\n  const errors = useAppSelector(getErrors);\r\n\r\n  // eslint-disable-next-line consistent-return\r\n  React.useEffect(() => {\r\n    if (isLoggedIn) {\r\n      history.replace(location.state?.from ?? \"/\");\r\n      return () => {\r\n        dispatch(actions.loginSucceed());\r\n      };\r\n    }\r\n  }, [isLoggedIn, history, location]);\r\n\r\n  React.useEffect(() => history.listen(() => dispatch(actions.reset())), []);\r\n\r\n  function handleSubmit(values: LoginVm) {\r\n    dispatch(actions.login(values));\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Container maxWidth=\"xs\">\r\n        <Box display=\"flex\" justifyContent=\"center\">\r\n          <Avatar className={classes.avatar}>\r\n            <LockOutlined className={classes.icon} />\r\n          </Avatar>\r\n        </Box>\r\n\r\n        <Box display=\"flex\" justifyContent=\"center\" mt={SPACING}>\r\n          <Typography style={{ textTransform: \"capitalize\" }} variant=\"h5\">\r\n            sign in\r\n          </Typography>\r\n        </Box>\r\n\r\n        {!!errors.length && (\r\n          <Box mt={SPACING}>\r\n            {errors.map((error, index) => (\r\n              <Alert key={index} severity=\"error\" style={{ width: \"100%\" }}>\r\n                {error}\r\n              </Alert>\r\n            ))}\r\n          </Box>\r\n        )}\r\n\r\n        <Box display=\"flex\" mt={SPACING}>\r\n          <Typography variant=\"body2\" color=\"textSecondary\">\r\n            admin admin | user user\r\n          </Typography>\r\n        </Box>\r\n\r\n        <Box mt={SPACING}>\r\n          <Formik\r\n            initialValues={initialValues}\r\n            validationSchema={validationSchema}\r\n            onSubmit={handleSubmit}\r\n          >\r\n            {({ values, touched, errors, handleChange, handleBlur }) => (\r\n              <Form>\r\n                <TextField\r\n                  id=\"email\"\r\n                  label=\"Email\"\r\n                  variant=\"outlined\"\r\n                  value={values.email}\r\n                  helperText={touched.email && errors.email}\r\n                  error={touched.email && !!errors.email}\r\n                  disabled={isSubmitting}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  fullWidth\r\n                />\r\n\r\n                <Box mt={SPACING}>\r\n                  <PasswordField\r\n                    id=\"password\"\r\n                    label=\"Password\"\r\n                    value={values.password}\r\n                    helperText={touched.password && errors.password}\r\n                    error={touched.password && !!errors.password}\r\n                    disabled={isSubmitting}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    fullWidth\r\n                  />\r\n                </Box>\r\n\r\n                <Box mt={SPACING}>\r\n                  <FormControlLabel\r\n                    id=\"rememberMe\"\r\n                    label=\"Remember me\"\r\n                    control={<Checkbox />}\r\n                    value={values.rememberMe}\r\n                    disabled={isSubmitting}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                  />\r\n                </Box>\r\n\r\n                <Box mt={SPACING}>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disabled={isSubmitting}\r\n                    fullWidth\r\n                  >\r\n                    sign in\r\n                  </Button>\r\n                </Box>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n        </Box>\r\n\r\n        <Box mt={2}>\r\n          <Links />\r\n        </Box>\r\n\r\n        <Box display=\"flex\" justifyContent=\"center\" mt={6}>\r\n          <Copyright />\r\n        </Box>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      backgroundColor: theme.palette.background.paper,\r\n      height: \"100vh\",\r\n      paddingTop: theme.spacing(1),\r\n    },\r\n    avatar: {\r\n      backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    icon: {\r\n      color: theme.palette.common.white,\r\n    },\r\n    link: {\r\n      \"&:hover\": {\r\n        cursor: \"pointer\",\r\n      },\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","/* eslint-disable @typescript-eslint/no-shadow */\r\nimport React from \"react\";\r\nimport {\r\n  Container,\r\n  Box,\r\n  Grid,\r\n  Button,\r\n  Avatar,\r\n  Link,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { LockOutlined } from \"@material-ui/icons\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport { Formik, Form } from \"formik\";\r\nimport moment from \"moment\";\r\nimport * as yup from \"yup\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Copyright from \"components/Copyright/Copyright\";\r\nimport PasswordField from \"components/PasswordField/PasswordField\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport type RegistrationVm from \"model/registration/registrationVm\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nimport { actions, getErrors, getIsSubmitting } from \"./registrationSlice\";\r\nimport useStyles from \"./useStyles\";\r\n\r\nconst SPACING = 2;\r\n\r\ntype FormValues = RegistrationVm & {\r\n  passwordConfirm: string;\r\n};\r\n\r\nconst initialValues: FormValues = {\r\n  firstName: \"\",\r\n  lastName: \"\",\r\n  email: \"\",\r\n  dateOfBirth: \"\",\r\n  password: \"\",\r\n  passwordConfirm: \"\",\r\n};\r\n\r\nconst today = moment().format(\"YYYY-MM-DD\");\r\n\r\nconst validationSchema = yup.object({\r\n  firstName: yup.string().trim().required(\"Required\").max(50),\r\n  lastName: yup.string().trim().required(\"Required\").max(50),\r\n  dateOfBirth: yup.date().required(\"Required\").max(today),\r\n  email: yup.string().trim().required(\"Required\"),\r\n  password: yup.string().trim().required(\"Required\"),\r\n  passwordConfirm: yup\r\n    .string()\r\n    .trim()\r\n    .required(\"Required\")\r\n    .oneOf([yup.ref(\"password\"), \"\"], \"Passwords don't match\"),\r\n});\r\n\r\nexport default function Registration(): JSX.Element {\r\n  const classes = useStyles();\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const isSubmitting = useAppSelector(getIsSubmitting);\r\n  const isLoggedIn = useAppSelector((state) => !!getUser(state));\r\n  const errors = useAppSelector(getErrors);\r\n\r\n  // eslint-disable-next-line consistent-return\r\n  React.useEffect(() => {\r\n    if (isLoggedIn) {\r\n      history.push(\"/\");\r\n      return () => {\r\n        dispatch(actions.registerUserSucceed());\r\n      };\r\n    }\r\n  }, [isLoggedIn]);\r\n\r\n  function handleSubmit(values: FormValues) {\r\n    dispatch(actions.registerUser(values));\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Container maxWidth=\"xs\">\r\n        <Box display=\"flex\" justifyContent=\"center\">\r\n          <Avatar className={classes.avatar}>\r\n            <LockOutlined className={classes.icon} />\r\n          </Avatar>\r\n        </Box>\r\n\r\n        <Box display=\"flex\" justifyContent=\"center\" mt={SPACING}>\r\n          <Typography style={{ textTransform: \"capitalize\" }} variant=\"h5\">\r\n            sign up\r\n          </Typography>\r\n        </Box>\r\n\r\n        {!!errors.length && (\r\n          <Box mt={SPACING}>\r\n            {errors.map((error, index) => (\r\n              <Alert key={index} severity=\"error\" style={{ width: \"100%\" }}>\r\n                {error}\r\n              </Alert>\r\n            ))}\r\n          </Box>\r\n        )}\r\n\r\n        <Box mt={SPACING}>\r\n          <Formik\r\n            initialValues={initialValues}\r\n            validationSchema={validationSchema}\r\n            onSubmit={handleSubmit}\r\n          >\r\n            {({ values, touched, errors, handleChange, handleBlur }) => (\r\n              <Form autoComplete=\"off\">\r\n                <Grid container spacing={SPACING}>\r\n                  <Grid item xs>\r\n                    <TextField\r\n                      id=\"firstName\"\r\n                      label=\"First name\"\r\n                      variant=\"outlined\"\r\n                      value={values.firstName}\r\n                      helperText={touched.firstName && errors.firstName}\r\n                      error={touched.firstName && !!errors.firstName}\r\n                      disabled={isSubmitting}\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs>\r\n                    <TextField\r\n                      id=\"lastName\"\r\n                      label=\"Last name\"\r\n                      variant=\"outlined\"\r\n                      value={values.lastName}\r\n                      helperText={touched.lastName && errors.lastName}\r\n                      error={touched.lastName && !!errors.lastName}\r\n                      disabled={isSubmitting}\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Box mt={SPACING}>\r\n                  <TextField\r\n                    id=\"dateOfBirth\"\r\n                    label=\"Date of birth\"\r\n                    type=\"date\"\r\n                    variant=\"outlined\"\r\n                    value={values.dateOfBirth}\r\n                    helperText={touched.dateOfBirth && errors.dateOfBirth}\r\n                    error={touched.dateOfBirth && !!errors.dateOfBirth}\r\n                    disabled={isSubmitting}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                    fullWidth\r\n                  />\r\n                </Box>\r\n\r\n                <Box mt={SPACING}>\r\n                  <TextField\r\n                    id=\"email\"\r\n                    label=\"Email\"\r\n                    variant=\"outlined\"\r\n                    value={values.email}\r\n                    helperText={touched.email && errors.email}\r\n                    error={touched.email && !!errors.email}\r\n                    disabled={isSubmitting}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    fullWidth\r\n                  />\r\n                </Box>\r\n\r\n                <Box mt={SPACING}>\r\n                  <PasswordField\r\n                    id=\"password\"\r\n                    label=\"Password\"\r\n                    variant=\"outlined\"\r\n                    value={values.password}\r\n                    helperText={touched.password && errors.password}\r\n                    error={touched.password && !!errors.password}\r\n                    disabled={isSubmitting}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    fullWidth\r\n                  />\r\n                </Box>\r\n\r\n                <Box mt={SPACING}>\r\n                  <PasswordField\r\n                    id=\"passwordConfirm\"\r\n                    label=\"Repeat password\"\r\n                    variant=\"outlined\"\r\n                    value={values.passwordConfirm}\r\n                    helperText={touched.passwordConfirm && errors.passwordConfirm}\r\n                    error={touched.passwordConfirm && !!errors.passwordConfirm}\r\n                    disabled={isSubmitting}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    fullWidth\r\n                  />\r\n                </Box>\r\n\r\n                <Box mt={SPACING}>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disabled={isSubmitting}\r\n                    fullWidth\r\n                  >\r\n                    sign up\r\n                  </Button>\r\n                </Box>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n        </Box>\r\n\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" mt={SPACING}>\r\n          <NavLink to=\"/login\">\r\n            <Link className={classes.link}>\r\n              <Typography variant=\"body2\">Already have an account? Sign in</Typography>\r\n            </Link>\r\n          </NavLink>\r\n        </Box>\r\n\r\n        <Box display=\"flex\" justifyContent=\"center\" mt={6}>\r\n          <Copyright />\r\n        </Box>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    page: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      height: \"100vh\",\r\n      textAlign: \"center\",\r\n    },\r\n    title: {\r\n      fontSize: \"5rem\",\r\n      textTransform: \"uppercase\",\r\n    },\r\n    link: {\r\n      textDecoration: \"inherit\",\r\n      marginTop: theme.spacing(4),\r\n      color: theme.palette.primary.main,\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import Home from \"pages/Home/Home\";\r\nimport Profile from \"pages/Profile/Profile\";\r\nimport ProfileEditor from \"pages/ProfileEditor/ProfileEditor\";\r\nimport Login from \"pages/Login/Login\";\r\nimport Registration from \"pages/Registration/Registration\";\r\nimport NotFound from \"pages/NotFound/NotFound\";\r\n\r\ninterface Route {\r\n  path: string;\r\n  component: React.ComponentType<any>;\r\n  protected?: boolean;\r\n  exact?: boolean;\r\n}\r\n\r\nconst routes: Route[] = [\r\n  {\r\n    path: \"/login\",\r\n    component: Login,\r\n    exact: true,\r\n  },\r\n  {\r\n    path: \"/registration\",\r\n    component: Registration,\r\n    exact: true,\r\n  },\r\n  {\r\n    path: \"/\",\r\n    component: Home,\r\n    exact: true,\r\n    protected: true,\r\n  },\r\n  {\r\n    path: \"/:userId\",\r\n    component: Profile,\r\n    protected: true,\r\n    exact: true,\r\n  },\r\n  {\r\n    path: \"/:userId/edit\",\r\n    component: ProfileEditor,\r\n    protected: true,\r\n    exact: true,\r\n  },\r\n  {\r\n    path: \"*\",\r\n    component: NotFound,\r\n  },\r\n];\r\n\r\nexport default routes;\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nimport Header from \"components/Header/Header\";\r\nimport PostList, { usePostList } from \"components/PostList/PostList\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nimport PostForm from \"./PostForm/PostForm\";\r\nimport UserList from \"./UserList/UserList\";\r\n\r\nconst SPACING = 5;\r\n\r\nexport default function Home(): JSX.Element {\r\n  const userId = useAppSelector((state) => getUser(state).id);\r\n\r\n  const _ = usePostList(userId);\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n\r\n      <Box display=\"flex\" justifyContent=\"center\" flexWrap=\"nowrap\" my={10} px={SPACING}>\r\n        <Box display=\"flex\" flexDirection=\"column\" width={2 / 5}>\r\n          <Box>\r\n            <PostForm />\r\n          </Box>\r\n\r\n          <Box mt={SPACING}>\r\n            <PostList />\r\n          </Box>\r\n        </Box>\r\n\r\n        <Box ml={SPACING} width={2 / 5}>\r\n          <UserList />\r\n        </Box>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\nexport default function NotFound(): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box className={classes.page}>\r\n      <Typography className={classes.title} variant=\"h1\">\r\n        not found\r\n      </Typography>\r\n\r\n      <Link className={classes.link} to=\"/\">\r\n        <Typography>back to homepage</Typography>\r\n      </Link>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\ntype ProtectedRouteProps = React.ComponentProps<typeof Route>;\r\n\r\nexport default function ProtectedRoute({\r\n  children,\r\n  ...routeProps\r\n}: ProtectedRouteProps): JSX.Element {\r\n  const isLoggedIn = useAppSelector((state) => !!getUser(state));\r\n\r\n  return (\r\n    <Route\r\n      {...routeProps}\r\n      render={({ location }) =>\r\n        (isLoggedIn ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: {\r\n                from: location.pathname,\r\n              },\r\n            }}\r\n          />\r\n        ))}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CssBaseline } from \"@material-ui/core\";\r\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\nimport routes from \"routes\";\r\nimport ProtectedRoute from \"components/ProtectedRoute/ProtectedRoute\";\r\n\r\nexport default function App(): JSX.Element {\r\n  return (\r\n    <Router>\r\n      <CssBaseline />\r\n\r\n      <Switch>\r\n        {routes.map((route, i) =>\r\n          (route.protected ? (\r\n            <ProtectedRoute key={i} path={route.path} exact={route.exact}>\r\n              <route.component />\r\n            </ProtectedRoute>\r\n          ) : (\r\n            <Route key={i} path={route.path} exact={route.exact}>\r\n              <route.component />\r\n            </Route>\r\n          )),\r\n        )}\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\n\nimport store from \"redux/store\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n"],"sourceRoot":""}