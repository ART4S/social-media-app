{"version":3,"sources":["utils/dataUtils.ts","mock/data/users.ts","mock/data/posts.ts","mock/utils/entityUtils.ts","mock/data/postLikes.ts","mock/data/postImages.ts","mock/data/postImageLikes.ts","mock/data/postComments.ts","mock/data/imageComments.ts","mock/utils/paginationUtils.ts","mock/data/userProfiles.ts","mock/services/authService.ts","mock/services/postService.ts","api/config.ts","api/postAPI.ts","pages/Home/PostForm/postFormSlice.ts","redux/commonSlice.ts","components/PostList/postListSlice.ts","pages/Home/PostForm/postFormSagas.ts","mock/data/followings.ts","mock/services/userService.ts","api/userAPI.ts","pages/Home/UserList/userListSlice.ts","pages/Home/UserList/userListSagas.ts","pages/Home/homeSagas.ts","pages/Profile/ProfileSections/FollowingsSection/followingsSectionSlice.ts","pages/Profile/ProfileSections/FollowersSection/followersSectionSlice.ts","pages/Profile/profileSlice.ts","pages/Profile/ProfileSections/FollowingsSection/followingsSectionSagas.ts","pages/Profile/ProfileSections/FollowersSection/followersSectionSagas.ts","mock/services/userProfileService.ts","api/userProfileAPI.ts","pages/Profile/profileSagas.ts","pages/ProfileEditor/profileEditorSlice.ts","pages/ProfileEditor/profileEditorSagas.ts","api/authAPI.ts","pages/Login/loginSlice.ts","pages/Login/loginSagas.ts","pages/Registration/registrationSlice.ts","pages/Registration/registrationSagas.ts","redux/commonSagas.ts","components/PostList/postListSagas.ts","redux/rootSaga.ts","pages/Home/homeSlice.ts","redux/rootReducer.ts","redux/store.tsx","components/NavLink/useStyles.ts","components/NavLink/NavLink.tsx","hooks/useAppDispatch.ts","hooks/useAppSelector.ts","components/Avatar/Avatar.tsx","utils/stringUtils.ts","utils/userUtils.ts","assets/logo.png","components/Header/Logo/useStyles.ts","components/Header/Logo/Logo.tsx","components/Header/useStyles.ts","components/Header/Header.tsx","components/PostList/PostInfo/useStyles.ts","components/Buttons/DeleteButton/DeleteButton.tsx","components/PostList/PostInfo/PostInfo.tsx","components/PostList/Post/useStyles.ts","components/Buttons/LikeButton/useStyles.ts","components/Buttons/LikeButton/LikeButton.tsx","components/Buttons/ShareButton/useStyles.ts","components/Buttons/ShareButton/ShareButton.tsx","components/PostList/PostActivities/PostActivities.tsx","components/PostList/PostComment/PostComment.tsx","components/PostList/PostCommentForm/useStyles.ts","components/PostList/PostCommentForm/PostCommentForm.tsx","components/PostList/PostCommentList/PostCommentList.tsx","components/ImageGrid/ImageGrid.tsx","components/PostList/ImageInfo/useStyles.ts","components/PostList/ImageInfo/ImageInfo.tsx","components/PostList/ImageActivities/ImageActivities.tsx","components/PostList/ImageViewer/useStyles.ts","components/Slider/useStyles.ts","components/Slider/Navigation/useStyles.ts","components/Slider/Navigation/Navigation.tsx","components/Slider/Slider.tsx","components/PostList/ImageComment/ImageComment.tsx","components/PostList/ImageCommentList/ImageCommentList.tsx","components/PostList/ImageCommentForm/useStyles.ts","components/PostList/ImageCommentForm/ImageCommentForm.tsx","components/PostList/ImageViewer/ImageViewer.tsx","components/PostList/PostAttachments/useStyles.ts","components/PostList/PostAttachments/PostAttachments.tsx","components/PostList/Post/Post.tsx","components/PostList/PostList.tsx","pages/Home/PostForm/UploadImage/useStyles.ts","pages/Home/PostForm/UploadImage/UploadImage.tsx","pages/Home/PostForm/useStyles.ts","pages/Home/PostForm/UserInfo/UserInfo.tsx","pages/Home/PostForm/PostForm.tsx","components/Progress/Progress.tsx","pages/Home/UserList/UserList.tsx","pages/Profile/AdditionalInfo/useStyles.ts","pages/Profile/AdditionalInfo/AdditionalInfo.tsx","components/PageProgress/PageProgress.tsx","pages/Profile/MainInfo/useStyles.ts","components/Buttons/EditButton/EditButton.tsx","pages/Profile/Status/Status.tsx","pages/Profile/DeleteProfileDialog/DeleteProfileDialog.tsx","pages/Profile/MainInfo/FollowButton/FollowButton.tsx","pages/Profile/MainInfo/MainInfo.tsx","pages/Profile/Status/ViewStatus/ViewStatus.tsx","pages/Profile/Status/EditStatus/EditStatus.tsx","components/TabPanel/TabPanel.tsx","pages/Profile/ProfileSections/FollowingsSection/Following/useStyles.ts","pages/Profile/ProfileSections/FollowingsSection/Following/FollowButton/FollowButton.tsx","pages/Profile/ProfileSections/FollowingsSection/Following/Following.tsx","pages/Profile/ProfileSections/FollowingsSection/FollowingList/FollowingList.tsx","pages/Profile/ProfileSections/FollowingsSection/FollowingsSearch/FollowingsSearch.tsx","pages/Profile/ProfileSections/FollowingsSection/FollowingsSection.tsx","pages/Profile/ProfileSections/FollowersSection/Follower/useStyles.ts","pages/Profile/ProfileSections/FollowersSection/Follower/Follower.tsx","pages/Profile/ProfileSections/FollowersSection/FollowerList/FollowerList.tsx","pages/Profile/ProfileSections/FollowersSection/FollowersSearch/FollowersSearch.tsx","pages/Profile/ProfileSections/FollowersSection/FollowersSection.tsx","pages/Profile/ProfileSections/PostsSection/PostsSection.tsx","pages/Profile/ProfileSections/ProfileSections.tsx","pages/Profile/Profile.tsx","pages/ProfileEditor/useStyles.ts","pages/ProfileEditor/Title/Title.tsx","pages/ProfileEditor/ProfileEditor.tsx","components/Copyright/Copyright.tsx","components/PasswordField/PasswordField.tsx","pages/Login/Links/useStyles.ts","pages/Login/Links/Links.tsx","pages/Login/useStyles.ts","pages/Login/Login.tsx","pages/Registration/useStyles.ts","pages/Registration/Registration.tsx","pages/NotFound/useStyles.ts","routes.ts","pages/Home/Home.tsx","pages/NotFound/NotFound.tsx","components/ProtectedRoute/ProtectedRoute.tsx","App.tsx","index.tsx"],"names":["normalize","entities","idSelector","Object","values","reduce","prev","cur","createUser","id","email","faker","internet","password","firstName","name","lastName","avatarUrl","avatar","users","map","x","posts","datatype","uuid","authorId","body","lorem","paragraphs","createDate","date","recent","toString","composeKey","keys","join","postId","userId","postImages","url","image","imageId","text","words","toPagedResponse","items","pagination","fromEnd","itemsPerPage","currentPage","reverse","totalItems","length","Math","abs","totalPages","ceil","start","max","min","end","data","slice","pageSize","userProfiles","dateOfBirth","past","toISOString","status","paragraph","about","userProfilesById","userProfilesByUserId","currentUser","registerUser","vm","some","errors","user","profile","login","find","logout","getAll","filter","sort","a","b","Date","mapPost","getById","getImages","mapImage","getComments","postComments","mapPostComment","getImageComments","imageComments","mapImageComment","createPost","post","images","forEach","createComment","comment","commentId","createImageComment","deletePost","deleteComment","deleteImageComment","addLike","postLikes","removeLike","addImageLike","postImageLikes","removeImageLike","authorFirstName","authorLastName","authorAvatarUrl","liked","likeCount","l","shareCount","shared","config","delayMs","Promise","resolve","setTimeout","postService","createSlice","initialState","isSubmitting","reducers","state","action","createPostSucceed","actions","getIsSubmitting","home","postForm","getSelf","auth","setUser","payload","fetchUser","createAction","getUser","common","sliceName","postAdapter","createEntityAdapter","selectId","info","sortComparer","imageAdapter","commentAdapter","imageCommentAdapter","loaded","getInitialState","initPost","selectedImageIndex","comments","addPost","addOne","sharePost","shareImage","togglePostLikeStarted","toggleImageLikeStarted","setSelectedImage","index","fetchPosts","fetchPostsSucceed","response","setAll","fetchPostImagesSucceed","fetchImageCommentsSucceed","fetchMoreImageComments","fetchPostCommentsSucceed","fetchMorePostComments","createPostCommentSucceed","createImageCommentSucceed","deletePostSucceed","removeOne","reset","fetchPostImages","fetchPostComments","fetchImageComments","createPostComment","deletePostComment","togglePostLike","toggleImageLike","postList","getPostIds","ids","getPostsPagination","getPostById","getPostInfo","getSelectedImageIndex","getPostCommentsState","getPostCommentById","getPostCommentsPagination","getImagesState","getImageById","getImageInfo","getImageCommentsState","getImageCommentById","getImageCommentsPagination","getLoaded","watchCreatePost","postFormSagas","call","postAPI","newPost","put","postListActions","takeEvery","type","all","followerId","mapUser","getFollowings","followings","mapFollowing","getFollowers","mapFollower","getProfile","isCurrentUserFollow","search","pattern","regex","RegExp","toLocaleLowerCase","test","searchFollowings","searchFollowers","createFollowing","following","deleteFollowing","deleteFollower","userService","loading","searchText","setSearchText","searchStarted","searchSucceed","changeSearchText","searchUsers","userList","getLoading","getSearchText","getUsers","watchChangeSearchText","watchSearchUsers","userListSagas","delay","takeLatest","select","userAPI","rootSaga","followingAdapter","searchFollowingsSucceed","isFollow","toggleFollow","fetchFollowings","fetchFollowingsSucceed","followingsSection","getFollowingIds","getFollowing","followingId","getIsFollow","followerAdapter","followers","searchFollowersSucceed","blocked","blockFollower","fetchFollowers","fetchFollowersSucceed","followersSection","getFollowerIds","getFollower","setStatus","fetchProfile","fetchProfileSucceed","toggleFollowProfile","deleteProfile","getIsCurrentUserProfile","reducer","combineReducers","followingsSectionReducer","followersSectionReducer","watchFetchFollowings","watchToggleFollow","followingsSectionSaga","watchFetchFollowers","watchBlockFollower","followersSectionSagas","mapProfile","updateProfile","dto","updateStatus","entries","key","value","includes","likeId","like","userProfileService","watchFetchProfile","watchSetStatus","watchDeleteProfile","toggleProfileFollow","watchToggleFollowProfile","profileSagas","userProfileAPI","commonActions","followingsSectionSagas","submitted","saveProfile","saveProfileSucceed","profileEditor","getSubmitted","watchProfile","watchSaveProfile","profileEditorSagas","authService","loginSucceed","loginFailed","getErrors","watchLogin","watchLogout","loginSagas","authAPI","isSuccess","registerUserSucceed","registerUserFailed","registration","watchRegisterUser","registrationSagas","watchFetchUser","commonSagas","watchFetchPosts","watchFetchPostImages","watchFetchPostComments","watchFetchMorePostComments","watchFetchImageComments","watchFetchMoreImageComments","watchCreatePostComment","watchDeletePostComment","watchCreateImageComment","watchDeleteImageComment","watchDeletePost","watchTogglePostLike","watchToggleImageLike","postListSagas","homeSagas","postFormReducer","userListReducer","sagaMiddleware","createSagaMiddleware","store","configureStore","middleware","getDefaultMiddleware","concat","rootReducer","devTools","process","run","useStyles","makeStyles","theme","createStyles","link","textDecoration","color","NavLink","props","classes","className","useAppDispatch","useDispatch","useAppSelector","useSelector","Avatar","PhotoCameraOutlined","capitalizeFirstLetter","charAt","toUpperCase","toLowerCase","wrap","symbolCount","getUserName","trim","logo","width","spacing","height","objectFit","Logo","to","src","icon","fill","palette","white","HideOnScroll","children","trigger","useScrollTrigger","Slide","appear","direction","in","Header","dispatch","AppBar","Container","maxWidth","Toolbar","Box","flexGrow","display","alignItems","Typography","IconButton","onClick","loginActions","DeleteButton","PostInfo","isCurrentUserPost","getIsCurrentUserPost","userName","justifyContent","flexDirection","ml","Link","variant","moment","fromNow","backgroundColor","grey","header","padding","footer","badge","background","paper","red","border","LikeButton","active","Badge","badgeContent","Favorite","FavoriteBorder","teal","ShareButton","Chat","ChatOutlined","PostActivities","PostComment","isCurrentUserComment","getIsCurrentUserComment","authorName","size","form","initialValues","validationSchema","yup","required","PostCommentForm","inputRef","React","useRef","useState","isButtonsVisible","setIsButtonsVisible","validateOnChange","onSubmit","formik","current","blur","resetForm","setSubmitting","handleBlur","handleChange","autoComplete","TextField","placeholder","onFocus","onBlur","onChange","fullWidth","Collapse","mt","Button","disabled","PostCommentList","commentIds","getPostCommentIds","useEffect","my","style","cursor","ImageGrid","imagesCount","renderImage","elements","indexes","Array","from","_","Grid","item","xs","container","ImageInfo","ImageActivities","modal","content","breakpoints","md","outline","maxHeight","root","position","sliderView","zIndex","overflowY","slide","leftArrowBox","opacity","rightArrowBox","arrowIcon","Navigation","gotoPrev","gotoNext","ChevronLeftRounded","ChevronRightRounded","VirtualizeSwipeableViews","bindKeyboard","virtualize","SwipeableViews","Slider","slideCount","selectedIndex","renderSlide","onSlideChange","mod","slideClassName","onChangeIndex","slideRenderer","ImageComment","getIsCurrentUserImageComment","ImageCommentList","getImageCommentIds","canFetchMoreComments","Divider","p","ImageCommentForm","ImageViewer","selectedImage","hasAnyComment","getImageCommentsCount","Modal","onClose","open","disablePortal","px","py","PostAttachments","isImageSelected","Post","Paper","elevation","PostList","history","useHistory","postIds","listen","UploadImage","deleteDisabled","onDelete","top","right","UserInfo","align","PostForm","useFormik","uploadDisabled","handleSubmit","onReset","handleReset","pt","rows","rowsMax","multiline","accept","event","file","target","files","match","setFieldValue","URL","createObjectURL","hidden","htmlFor","component","AddAPhoto","PlayCircleOutline","pb","splice","handleDeleteImage","Progress","CircularProgress","UserList","e","InputProps","endAdornment","List","ListItem","button","ListItemIcon","ListItemText","primary","typo","AdditionalInfo","format","PageProgress","fontWeight","userEmail","EditButton","StatusMode","DeleteProfileDialog","emailConfirm","setEmailConfirm","Dialog","DialogTitle","DialogContent","DialogContentText","label","margin","autoFocus","DialogActions","FollowButton","textTransform","MainInfo","isCurrentUserProfile","setOpen","pathname","profileId","ViewStatus","onEdit","overflowWrap","EditStatus","setText","preventDefault","oldStatus","newStatus","inputProps","maxLength","Status","view","mode","setMode","edit","TabPanel","Following","getFollowingInfo","FollowingList","followingIds","FollowingsSearch","FollowingsSection","Follower","follower","getFollowerInfo","getBlocked","FollowerList","followerIds","FollowersSearch","FollowersSection","PostsSection","tabs","ProfileSections","currentTab","setCurrentTab","Tabs","tab","Tab","PageContent","showInfo","setShowInfo","avatarIcon","Title","today","notRequired","goBack","touched","dirty","isValid","startIcon","CloudUpload","helperText","error","InputLabelProps","shrink","Copyright","getFullYear","PasswordField","showPassword","setShowPassword","edge","Visibility","VisibilityOff","Links","secondary","main","rememberMe","passwordConfirm","oneOf","page","textAlign","title","fontSize","marginTop","routes","path","location","useLocation","isLoggedIn","replace","LockOutlined","Alert","severity","FormControlLabel","control","Checkbox","exact","push","protected","useParams","ProtectedRoute","routeProps","render","App","CssBaseline","route","i","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5e929038.chunk.js","sourcesContent":["export function normalize<TEntity>(\r\n  entities: TEntity[],\r\n  idSelector: (entry: TEntity) => string,\r\n): { [id: string]: TEntity } {\r\n  return Object.values(entities).reduce(\r\n    (prev, cur) => ({ ...prev, [idSelector(cur)]: cur }),\r\n    {},\r\n  );\r\n}\r\n","import faker from \"faker\";\r\nimport { normalize } from \"utils/dataUtils\";\r\n\r\nexport interface User {\r\n  id: string;\r\n  email: string;\r\n  password: string;\r\n  firstName: string;\r\n  lastName: string;\r\n  avatarUrl?: string;\r\n}\r\n\r\nfunction createUser(id: string): User {\r\n  return {\r\n    id,\r\n    email: faker.internet.email(),\r\n    password: faker.internet.password(),\r\n    firstName: faker.name.firstName(),\r\n    lastName: faker.name.lastName(),\r\n    avatarUrl: faker.internet.avatar(),\r\n  };\r\n}\r\n\r\nconst ids = [\r\n  \"7782b084-5c63-48ca-9acb-046680ac20b5\",\r\n  \"43feb76c-e6c1-4122-9e40-ca58d6625969\",\r\n  \"d7fb53d4-a209-4375-9606-1a454f42afcc\",\r\n  \"39d7b906-ff67-4687-aec7-da1991741992\",\r\n  \"ceecb37b-dbee-4694-9bb7-dfdb02fb5c91\",\r\n  \"2680bd41-d69f-48dd-9105-bb7ad7e72441\",\r\n  \"79bb4631-3bd8-4f88-a5c1-8e6a2bb492c2\",\r\n  \"60d6dae7-e7c4-46b5-bbfd-282e6863377e\",\r\n  \"5a9912a1-e4bd-4337-ade9-ea88d1f71e33\",\r\n];\r\n\r\nexport const users: User[] = [\r\n  {\r\n    ...createUser(\"34421e5e-d2c0-419c-adfa-735cee28a660\"),\r\n    email: \"admin\",\r\n    password: \"admin\",\r\n  },\r\n  {\r\n    ...createUser(\"4edc58af-e778-499e-bd6a-88f2fbbc1025\"),\r\n    email: \"user\",\r\n    password: \"user\",\r\n  },\r\n  ...ids.map(createUser),\r\n];\r\n\r\nconst entities: { [id: string]: User } = normalize(users, (x) => x.id);\r\n\r\nexport default entities;\r\n","import faker from \"faker\";\r\nimport { normalize } from \"utils/dataUtils\";\r\nimport { users } from \"./users\";\r\n\r\nexport interface Post {\r\n  id: string;\r\n  authorId: string;\r\n  body: string;\r\n  createDate: string;\r\n}\r\n\r\nexport const posts: Post[] = [\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    authorId: users[0].id,\r\n    body: faker.lorem.paragraphs(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n];\r\n\r\nconst entities: { [id: string]: Post } = normalize(posts, (x) => x.id);\r\n\r\nexport default entities;\r\n","export function composeKey(...keys: string[]): string {\r\n  return keys.join(\"-\");\r\n}\r\n","import { normalize } from \"utils/dataUtils\";\r\nimport { posts } from \"./posts\";\r\nimport { users } from \"./users\";\r\nimport { composeKey } from \"mock/utils/entityUtils\";\r\n\r\nexport interface PostLike {\r\n  postId: string;\r\n  userId: string;\r\n}\r\n\r\nexport const postLikes: PostLike[] = [\r\n  {\r\n    postId: posts[0].id,\r\n    userId: users[1].id,\r\n  },\r\n  {\r\n    postId: posts[0].id,\r\n    userId: users[2].id,\r\n  },\r\n  {\r\n    postId: posts[0].id,\r\n    userId: users[3].id,\r\n  },\r\n  {\r\n    postId: posts[0].id,\r\n    userId: users[4].id,\r\n  },\r\n  {\r\n    postId: posts[0].id,\r\n    userId: users[5].id,\r\n  },\r\n];\r\n\r\nconst entities: { [compositeKey: string]: PostLike } = normalize(\r\n  postLikes,\r\n  (x) => composeKey(x.postId, x.userId),\r\n);\r\n\r\nexport default entities;\r\n","import faker from \"faker\";\r\nimport { normalize } from \"utils/dataUtils\";\r\nimport { posts } from \"./posts\";\r\n\r\nexport interface PostImage {\r\n  id: string;\r\n  postId: string;\r\n  url: string;\r\n  createDate: string;\r\n}\r\n\r\nexport const postImages: PostImage[] = [\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    url: faker.image.image(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    url: faker.image.image(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    url: faker.image.image(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    url: faker.image.image(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    url: faker.image.image(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    url: faker.image.image(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n];\r\n\r\nconst entities: { [id: string]: PostImage } = normalize(\r\n  postImages,\r\n  (x) => x.id,\r\n);\r\n\r\nexport default entities;\r\n","import { normalize } from \"utils/dataUtils\";\r\nimport { postImages } from \"./postImages\";\r\nimport { users } from \"./users\";\r\nimport { composeKey } from \"mock/utils/entityUtils\";\r\n\r\nexport interface PostImageLikes {\r\n  imageId: string;\r\n  userId: string;\r\n}\r\n\r\nexport const postImageLikes: PostImageLikes[] = [\r\n  {\r\n    imageId: postImages[0].id,\r\n    userId: users[1].id,\r\n  },\r\n  {\r\n    imageId: postImages[0].id,\r\n    userId: users[2].id,\r\n  },\r\n  {\r\n    imageId: postImages[0].id,\r\n    userId: users[3].id,\r\n  },\r\n  {\r\n    imageId: postImages[0].id,\r\n    userId: users[4].id,\r\n  },\r\n  {\r\n    imageId: postImages[0].id,\r\n    userId: users[5].id,\r\n  },\r\n];\r\n\r\nconst entities: { [compositeKey: string]: PostImageLikes } = normalize(\r\n  postImageLikes,\r\n  (x) => composeKey(x.imageId, x.userId),\r\n);\r\n\r\nexport default entities;\r\n","import faker from \"faker\";\r\nimport { normalize } from \"utils/dataUtils\";\r\nimport { users } from \"./users\";\r\nimport { posts } from \"./posts\";\r\n\r\nexport interface PostComment {\r\n  id: string;\r\n  postId: string;\r\n  authorId: string;\r\n  text: string;\r\n  createDate: string;\r\n}\r\n\r\nexport const postComments: PostComment[] = [\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    authorId: users[1].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    authorId: users[2].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    authorId: users[3].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    authorId: users[4].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    authorId: users[5].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    postId: posts[0].id,\r\n    authorId: users[0].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n];\r\n\r\nconst entities: { [id: string]: PostComment } = normalize(\r\n  postComments,\r\n  (x) => x.id,\r\n);\r\n\r\nexport default entities;\r\n","import faker from \"faker\";\r\nimport { normalize } from \"utils/dataUtils\";\r\nimport { users } from \"./users\";\r\nimport { postImages } from \"./postImages\";\r\n\r\nexport interface ImageComment {\r\n  id: string;\r\n  imageId: string;\r\n  authorId: string;\r\n  text: string;\r\n  createDate: string;\r\n}\r\n\r\nexport const imageComments: ImageComment[] = [\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    imageId: postImages[0].id,\r\n    authorId: users[1].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    imageId: postImages[0].id,\r\n    authorId: users[2].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    imageId: postImages[0].id,\r\n    authorId: users[3].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n  {\r\n    id: faker.datatype.uuid(),\r\n    imageId: postImages[0].id,\r\n    authorId: users[4].id,\r\n    text: faker.lorem.words(),\r\n    createDate: faker.date.recent().toString(),\r\n  },\r\n];\r\n\r\nconst entities: { [id: string]: ImageComment } = normalize(\r\n  imageComments,\r\n  (x) => x.id,\r\n);\r\n\r\nexport default entities;\r\n","import type PagedRequest from \"model/pagination/PagedRequest\";\r\nimport type PagedResponse from \"model/pagination/PagedResponse\";\r\n\r\nexport function toPagedResponse<TDto>(\r\n  items: TDto[],\r\n  pagination: PagedRequest,\r\n): PagedResponse<TDto> {\r\n  let { fromEnd, itemsPerPage, currentPage } = pagination;\r\n\r\n  if (fromEnd) {\r\n    items = items.reverse();\r\n  }\r\n\r\n  const totalItems = items.length;\r\n\r\n  itemsPerPage = Math.abs(itemsPerPage);\r\n\r\n  const totalPages = Math.ceil(itemsPerPage ? totalItems / itemsPerPage : 0);\r\n\r\n  currentPage = Math.max(1, Math.min(totalPages, currentPage));\r\n\r\n  const start = (currentPage - 1) * itemsPerPage;\r\n  const end = start + itemsPerPage;\r\n  const data = items.slice(start, end);\r\n  const pageSize = data.length;\r\n\r\n  return { currentPage, totalPages, pageSize, totalItems, data };\r\n}\r\n","import faker from \"faker\";\r\nimport { normalize } from \"utils/dataUtils\";\r\nimport { users } from \"mock/data/users\";\r\n\r\nexport interface UserProfile {\r\n  id: string;\r\n  userId: string;\r\n  dateOfBirth: string;\r\n  status?: string;\r\n  about?: string;\r\n}\r\n\r\nfunction createProfile(userId: string): UserProfile {\r\n  return {\r\n    id: faker.datatype.uuid(),\r\n    userId,\r\n    dateOfBirth: faker.date.past().toISOString(),\r\n    status: faker.lorem.paragraph(),\r\n    about: faker.lorem.paragraphs(),\r\n  };\r\n}\r\n\r\nexport const userProfiles: UserProfile[] = users.map(({ id }) =>\r\n  createProfile(id),\r\n);\r\n\r\nexport const userProfilesById: { [id: string]: UserProfile } = normalize(\r\n  userProfiles,\r\n  (x) => x.id,\r\n);\r\n\r\nexport const userProfilesByUserId: { [userId: string]: UserProfile } =\r\n  normalize(userProfiles, (x) => x.userId);\r\n","import LoginVm from \"model/login/loginVm\";\r\nimport users, { User } from \"mock/data/users\";\r\nimport RegistrationVm from \"model/registration/registrationVm\";\r\nimport { userProfilesById, userProfilesByUserId } from \"mock/data/userProfiles\";\r\nimport faker from \"faker\";\r\nimport RegistrationSuccessResponse from \"model/registration/RegistrationSuccessResponse\";\r\nimport RegistrationErrorResponse from \"model/registration/RegistrationErrorResponse\";\r\nimport LoginSuccessReponse from \"model/login/LoginSuccessResponse\";\r\nimport LoginErrorResponse from \"model/login/LoginErrorResponse\";\r\n\r\nexport let currentUser: User | null = null;\r\n\r\nfunction registerUser(\r\n  vm: RegistrationVm,\r\n): RegistrationSuccessResponse | RegistrationErrorResponse {\r\n  if (Object.values(users).some((x) => x.email === vm.email)) {\r\n    return { errors: [\"Email already exists\"] };\r\n  }\r\n\r\n  const user = {\r\n    id: faker.datatype.uuid(),\r\n    email: vm.email,\r\n    firstName: vm.firstName,\r\n    lastName: vm.lastName,\r\n    password: vm.password,\r\n  };\r\n\r\n  const profile = {\r\n    id: faker.datatype.uuid(),\r\n    userId: user.id,\r\n    dateOfBirth: vm.dateOfBirth,\r\n  };\r\n\r\n  users[user.id] = user;\r\n  userProfilesById[profile.id] = profile;\r\n  userProfilesByUserId[user.id] = profile;\r\n\r\n  currentUser = user;\r\n\r\n  return { userId: user.id };\r\n}\r\n\r\nfunction login(vm: LoginVm): LoginSuccessReponse | LoginErrorResponse {\r\n  const user = Object.values(users).find(\r\n    (x) => x.email === vm.email && x.password === vm.password,\r\n  );\r\n\r\n  if (!user) {\r\n    return { errors: [\"Wrong email or password\"] };\r\n  }\r\n\r\n  currentUser = user;\r\n\r\n  return { userId: user.id };\r\n}\r\n\r\nfunction logout() {\r\n  currentUser = null;\r\n}\r\n\r\nexport default { registerUser, login, logout };\r\n","import faker from \"faker\";\r\nimport posts, { Post } from \"mock/data/posts\";\r\nimport users from \"mock/data/users\";\r\nimport postLikes from \"mock/data/postLikes\";\r\nimport postImageLikes from \"mock/data/postImageLikes\";\r\nimport postImages, { PostImage } from \"mock/data/postImages\";\r\nimport postComments, { PostComment } from \"mock/data/postComments\";\r\nimport imageComments, { ImageComment } from \"mock/data/imageComments\";\r\nimport type PostDto from \"model/dto/post/PostDto\";\r\nimport type PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport type PostCommentDto from \"model/dto/postComment/PostCommentDto\";\r\nimport type PagedRequest from \"model/pagination/PagedRequest\";\r\nimport type PagedResponse from \"model/pagination/PagedResponse\";\r\nimport type PostCommentCreateDto from \"model/dto/postComment/PostCommentCreateDto\";\r\nimport { composeKey } from \"mock/utils/entityUtils\";\r\nimport { toPagedResponse } from \"../utils/paginationUtils\";\r\nimport ImageCommentDto from \"model/dto/imageComment/ImageCommentDto\";\r\nimport ImageCommentCreateDto from \"model/dto/imageComment/ImageCommentCreateDto\";\r\nimport PostCreateDto from \"model/dto/post/PostCreateDto\";\r\nimport { currentUser } from \"mock/services/authService\";\r\n\r\n// posts\r\nfunction getAll(\r\n  authorId: string,\r\n  pagination: PagedRequest,\r\n): PagedResponse<PostDto> {\r\n  const data: PostDto[] = Object.values(posts)\r\n    .filter((x) => x.authorId === authorId)\r\n    .sort((a, b) => (new Date(a.createDate) < new Date(b.createDate) ? 1 : -1))\r\n    .map(mapPost);\r\n\r\n  return toPagedResponse(data, pagination);\r\n}\r\n\r\n// posts/:id\r\nfunction getById(id: string) {\r\n  return mapPost(posts[id]);\r\n}\r\n\r\n// posts/:id/images\r\nfunction getImages(id: string): PostImageDto[] {\r\n  return Object.values(postImages)\r\n    .filter((x) => x.postId === id)\r\n    .map(mapImage);\r\n}\r\n\r\n// posts/:id/comments\r\nfunction getComments(\r\n  id: string,\r\n  pagination: PagedRequest,\r\n): PagedResponse<PostCommentDto> {\r\n  const data: PostCommentDto[] = Object.values(postComments)\r\n    .filter((x) => x.postId === id)\r\n    .sort((a, b) => (new Date(a.createDate) > new Date(b.createDate) ? 1 : -1))\r\n    .map(mapPostComment);\r\n\r\n  return toPagedResponse(data, pagination);\r\n}\r\n\r\n// posts\r\nfunction createPost(post: PostCreateDto) {\r\n  const postId = faker.datatype.uuid();\r\n\r\n  posts[postId] = {\r\n    id: postId,\r\n    authorId: currentUser!.id,\r\n    body: post.body,\r\n    createDate: new Date().toISOString(),\r\n  };\r\n\r\n  post.images.forEach((url) => {\r\n    const imageId = faker.datatype.uuid();\r\n    postImages[imageId] = {\r\n      id: imageId,\r\n      postId,\r\n      url,\r\n      createDate: new Date().toISOString(),\r\n    };\r\n  });\r\n\r\n  return postId;\r\n}\r\n\r\n// posts/:id/comments\r\nfunction createComment(id: string, comment: PostCommentCreateDto): string {\r\n  const commentId = faker.datatype.uuid();\r\n\r\n  postComments[commentId] = {\r\n    ...comment,\r\n    id: commentId,\r\n    postId: id,\r\n    authorId: currentUser!.id,\r\n    createDate: new Date().toISOString(),\r\n  };\r\n\r\n  return commentId;\r\n}\r\n\r\n// posts/comments/:commentId\r\nfunction deleteComment(commentId: string) {\r\n  delete postComments[commentId];\r\n}\r\n\r\n// posts/images/:imageId/comments\r\nfunction getImageComments(\r\n  imageId: string,\r\n  pagination: PagedRequest,\r\n): PagedResponse<ImageCommentDto> {\r\n  const data: ImageCommentDto[] = Object.values(imageComments)\r\n    .filter((x) => x.imageId === imageId)\r\n    .sort((a, b) => (new Date(a.createDate) > new Date(b.createDate) ? 1 : -1))\r\n    .map(mapImageComment);\r\n\r\n  return toPagedResponse(data, pagination);\r\n}\r\n\r\n// posts/:id/like\r\nfunction addLike(id: string) {\r\n  const userId = currentUser!.id;\r\n  postLikes[composeKey(id, userId)] = { postId: id, userId };\r\n}\r\n\r\n// posts/:id/like\r\nfunction removeLike(id: string) {\r\n  const userId = currentUser!.id;\r\n  delete postLikes[composeKey(id, userId)];\r\n}\r\n\r\n// posts/images/:imageId\r\nfunction addImageLike(imageId: string) {\r\n  const userId = currentUser!.id;\r\n  postImageLikes[composeKey(imageId, userId)] = { imageId, userId };\r\n}\r\n\r\n// posts/images/:imageId\r\nfunction removeImageLike(imageId: string) {\r\n  const userId = currentUser!.id;\r\n  delete postImageLikes[composeKey(imageId, userId)];\r\n}\r\n\r\n// posts/images/:imageId/comments\r\nfunction createImageComment(\r\n  imageId: string,\r\n  comment: ImageCommentCreateDto,\r\n): string {\r\n  const id = faker.datatype.uuid();\r\n\r\n  imageComments[id] = {\r\n    ...comment,\r\n    id,\r\n    imageId,\r\n    authorId: currentUser!.id,\r\n    createDate: new Date().toISOString(),\r\n  };\r\n\r\n  return id;\r\n}\r\n\r\n// posts/images/comments/:commentId\r\nfunction deleteImageComment(commentId: string) {\r\n  delete imageComments[commentId];\r\n}\r\n\r\n// posts/:id\r\nfunction deletePost(id: string) {\r\n  delete posts[id]; // TODO: clear related entities\r\n}\r\n\r\nexport default {\r\n  getAll,\r\n  getById,\r\n  getImages,\r\n  getComments,\r\n  getImageComments,\r\n  createPost,\r\n  createComment,\r\n  createImageComment,\r\n  deletePost,\r\n  deleteComment,\r\n  deleteImageComment,\r\n  addLike,\r\n  removeLike,\r\n  addImageLike,\r\n  removeImageLike,\r\n};\r\n\r\nfunction mapPost(post: Post): PostDto {\r\n  return {\r\n    id: post.id,\r\n    authorId: post.authorId,\r\n    authorFirstName: users[post.authorId].firstName,\r\n    authorLastName: users[post.authorId].lastName,\r\n    authorAvatarUrl: users[post.authorId].avatarUrl,\r\n    body: post.body,\r\n    createDate: post.createDate,\r\n    liked: !!postLikes[composeKey(post.id, currentUser!.id)],\r\n    likeCount: Object.values(postLikes).filter((l) => l.postId == post.id)\r\n      .length,\r\n    shareCount: 0,\r\n    shared: false,\r\n  };\r\n}\r\n\r\nfunction mapPostComment(comment: PostComment): PostCommentDto {\r\n  return {\r\n    id: comment.id,\r\n    postId: comment.postId,\r\n    authorId: comment.authorId,\r\n    authorFirstName: users[comment.authorId].firstName,\r\n    authorLastName: users[comment.authorId].lastName,\r\n    avatarUrl: users[comment.authorId].avatarUrl,\r\n    text: comment.text,\r\n    createDate: comment.createDate,\r\n  };\r\n}\r\n\r\nfunction mapImageComment(comment: ImageComment): ImageCommentDto {\r\n  return {\r\n    id: comment.id,\r\n    imageId: comment.imageId,\r\n    authorId: comment.authorId,\r\n    authorFirstName: users[comment.authorId].firstName,\r\n    authorLastName: users[comment.authorId].lastName,\r\n    avatarUrl: users[comment.authorId].avatarUrl,\r\n    text: comment.text,\r\n    createDate: comment.createDate,\r\n  };\r\n}\r\n\r\nfunction mapImage(image: PostImage): PostImageDto {\r\n  return {\r\n    id: image.id,\r\n    postId: image.postId,\r\n    url: image.url,\r\n    createDate: image.createDate,\r\n    liked: !!postImageLikes[composeKey(image.id, posts[image.postId].authorId)],\r\n    likeCount: Object.values(postImageLikes).filter(\r\n      (l) => l.imageId === image.id,\r\n    ).length,\r\n    shared: false,\r\n    shareCount: 0,\r\n  };\r\n}\r\n","const config = {\r\n  delayMs: 500,\r\n};\r\n\r\nexport default config;\r\n","import postService from \"mock/services/postService\";\r\nimport type ImageCommentDto from \"model/dto/imageComment/ImageCommentDto\";\r\nimport type PostCommentDto from \"model/dto/postComment/PostCommentDto\";\r\nimport type PostDto from \"model/dto/post/PostDto\";\r\nimport type PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport type ImageCommentCreateDto from \"model/dto/imageComment/ImageCommentCreateDto\";\r\nimport type PostCommentCreateDto from \"model/dto/postComment/PostCommentCreateDto\";\r\nimport type PostCreateDto from \"model/dto/post/PostCreateDto\";\r\nimport type PagedRequest from \"model/pagination/PagedRequest\";\r\nimport type PagedResponse from \"model/pagination/PagedResponse\";\r\n\r\nimport config from \"./config\";\r\n\r\nfunction getAll(\r\n  authorId: string,\r\n  pagination: PagedRequest,\r\n): Promise<PagedResponse<PostDto>> {\r\n  return new Promise<PagedResponse<PostDto>>((resolve) =>\r\n    setTimeout(\r\n      () => resolve(postService.getAll(authorId, pagination)),\r\n      config.delayMs,\r\n    ),\r\n  );\r\n}\r\n\r\nfunction getImages(postId: string): Promise<PostImageDto[]> {\r\n  return new Promise<PostImageDto[]>((resolve) =>\r\n    setTimeout(() => resolve(postService.getImages(postId)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction getComments(\r\n  postId: string,\r\n  pagination: PagedRequest,\r\n): Promise<PagedResponse<PostCommentDto>> {\r\n  return new Promise<PagedResponse<PostCommentDto>>((resolve) =>\r\n    setTimeout(\r\n      () => resolve(postService.getComments(postId, pagination)),\r\n      config.delayMs,\r\n    ),\r\n  );\r\n}\r\n\r\nfunction getImageComments(\r\n  imageId: string,\r\n  pagination: PagedRequest,\r\n): Promise<PagedResponse<ImageCommentDto>> {\r\n  return new Promise<PagedResponse<ImageCommentDto>>((resolve) =>\r\n    setTimeout(\r\n      () => resolve(postService.getImageComments(imageId, pagination)),\r\n      config.delayMs,\r\n    ),\r\n  );\r\n}\r\n\r\nfunction addLike(postId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      postService.addLike(postId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction removeLike(postId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      postService.removeLike(postId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction createComment(\r\n  postId: string,\r\n  comment: PostCommentCreateDto,\r\n): Promise<string> {\r\n  return new Promise<string>((resolve) =>\r\n    setTimeout(() => {\r\n      resolve(postService.createComment(postId, comment));\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction deleteComment(commentId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      postService.deleteComment(commentId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction addImageLike(imageId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      postService.addImageLike(imageId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction removeImageLike(imageId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      postService.removeImageLike(imageId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction createImageComment(\r\n  imageId: string,\r\n  comment: ImageCommentCreateDto,\r\n): Promise<string> {\r\n  return new Promise<string>((resolve) =>\r\n    setTimeout(() => {\r\n      resolve(postService.createImageComment(imageId, comment));\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction deleteImageComment(commentId: string): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      postService.deleteImageComment(commentId);\r\n      resolve();\r\n    }, config.delayMs);\r\n  });\r\n}\r\n\r\nfunction deletePost(id: string): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      postService.deletePost(id);\r\n      resolve();\r\n    }, config.delayMs);\r\n  });\r\n}\r\n\r\nfunction createPost(post: PostCreateDto): Promise<string> {\r\n  return new Promise<string>((resolve) =>\r\n    setTimeout(() => {\r\n      resolve(postService.createPost(post));\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction getById(id: string): Promise<PostDto> {\r\n  return new Promise<PostDto>((resolve) =>\r\n    setTimeout(() => {\r\n      resolve(postService.getById(id));\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nexport default {\r\n  getAll,\r\n  getById,\r\n  getImages,\r\n  getComments,\r\n  getImageComments,\r\n  createPost,\r\n  createComment,\r\n  createImageComment,\r\n  deletePost,\r\n  deleteComment,\r\n  deleteImageComment,\r\n  addLike,\r\n  removeLike,\r\n  addImageLike,\r\n  removeImageLike,\r\n};\r\n","import {\r\n  Action,\r\n  createAction,\r\n  createSlice,\r\n  PayloadAction,\r\n} from \"@reduxjs/toolkit\";\r\nimport PostCreateDto from \"model/dto/post/PostCreateDto\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst sliceName = \"home/postForm\";\r\n\r\ninterface PostFormState {\r\n  isSubmitting: boolean;\r\n}\r\n\r\nconst initialState: PostFormState = {\r\n  isSubmitting: false,\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: sliceName,\r\n  initialState,\r\n  reducers: {\r\n    createPost(state, action: PayloadAction<PostCreateDto>) {\r\n      state.isSubmitting = true;\r\n    },\r\n    createPostSucceed(state, action: Action) {\r\n      state.isSubmitting = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = slice.actions;\r\n\r\nconst getSelf = (state: AppState) => state.home.postForm;\r\n\r\nexport const getIsSubmitting = (state: AppState) => getSelf(state).isSubmitting;\r\n\r\nexport default slice.reducer;\r\n","import { createSlice, PayloadAction, createAction } from \"@reduxjs/toolkit\";\r\nimport UserDto from \"model/dto/user/UserDto\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"common\";\r\n\r\ninterface CommonState {\r\n  auth: {\r\n    user: UserDto | null;\r\n  };\r\n}\r\n\r\nconst initialState: CommonState = {\r\n  auth: {\r\n    user: null,\r\n  },\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    setUser(state, { payload }: PayloadAction<UserDto | null>) {\r\n      state.auth.user = payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n  fetchUser: createAction<string>(`${name}/fetchUser`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.common;\r\n\r\nexport const getUser = (state: AppState) => getSelf(state).auth.user!;\r\n\r\nexport default slice.reducer;\r\n","import {\r\n  createSlice,\r\n  createEntityAdapter,\r\n  EntityState,\r\n  PayloadAction,\r\n  createAction,\r\n  Action,\r\n} from \"@reduxjs/toolkit\";\r\nimport PostDto from \"model/dto/post/PostDto\";\r\nimport { AppState } from \"redux/store\";\r\nimport PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport PostCommentDto from \"model/dto/postComment/PostCommentDto\";\r\nimport PagedResponse from \"model/pagination/PagedResponse\";\r\nimport ImageCommentDto from \"model/dto/imageComment/ImageCommentDto\";\r\nimport PostCommentCreateDto from \"model/dto/postComment/PostCommentCreateDto\";\r\nimport ImageCommentCreateDto from \"model/dto/imageComment/ImageCommentCreateDto\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nconst sliceName = \"components/postList\";\r\n\r\nconst postAdapter = createEntityAdapter<Post>({\r\n  selectId: (post) => post.info.id,\r\n  sortComparer: (a, b) =>\r\n    new Date(a.info.createDate) < new Date(b.info.createDate) ? 1 : -1,\r\n});\r\n\r\nconst imageAdapter = createEntityAdapter<PostImage>({\r\n  selectId: (image) => image.info.id,\r\n});\r\n\r\nconst commentAdapter = createEntityAdapter<PostCommentDto>();\r\n\r\nconst imageCommentAdapter = createEntityAdapter<ImageCommentDto>();\r\n\r\nexport interface Pagination {\r\n  fromEnd: boolean;\r\n  currentPage: number;\r\n  totalPages: number;\r\n  pageSize: number;\r\n  totalItems: number;\r\n  itemsPerPage: number;\r\n}\r\n\r\ninterface PostImage {\r\n  info: PostImageDto;\r\n  comments: EntityState<ImageCommentDto> & {\r\n    pagination: Pagination;\r\n  };\r\n}\r\n\r\nexport interface Post {\r\n  info: PostDto;\r\n  selectedImageIndex: number | null;\r\n  images: EntityState<PostImage>;\r\n  comments: EntityState<PostCommentDto> & {\r\n    pagination: Pagination;\r\n  };\r\n}\r\n\r\nexport interface PostListState {\r\n  loaded: boolean;\r\n  posts: EntityState<Post> & {\r\n    pagination: Pagination;\r\n  };\r\n}\r\n\r\nconst initialState: PostListState = {\r\n  loaded: false,\r\n  posts: postAdapter.getInitialState({\r\n    pagination: {\r\n      fromEnd: false,\r\n      currentPage: 1,\r\n      totalPages: 0,\r\n      pageSize: 0,\r\n      totalItems: 0,\r\n      itemsPerPage: 5,\r\n    },\r\n  }),\r\n};\r\n\r\nfunction initPost(info: PostDto) {\r\n  return {\r\n    info,\r\n    selectedImageIndex: null,\r\n    images: imageAdapter.getInitialState(),\r\n    comments: commentAdapter.getInitialState({\r\n      pagination: {\r\n        fromEnd: false,\r\n        currentPage: 1,\r\n        totalPages: 0,\r\n        pageSize: 0,\r\n        totalItems: 0,\r\n        itemsPerPage: 3,\r\n      },\r\n    }),\r\n  };\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: sliceName,\r\n  initialState,\r\n  reducers: {\r\n    addPost(state, { payload: post }: PayloadAction<PostDto>) {\r\n      postAdapter.addOne(state.posts, initPost(post));\r\n    },\r\n    sharePost(state, { payload: postId }: PayloadAction<string>) {\r\n      const post = state.posts.entities[postId]?.info;\r\n      if (post) {\r\n        post.shared = !post.shared;\r\n\r\n        if (post.shared) {\r\n          post.shareCount++;\r\n        } else {\r\n          post.shareCount--;\r\n        }\r\n      }\r\n    },\r\n    shareImage(\r\n      state,\r\n      action: PayloadAction<{ postId: string; imageId: string }>,\r\n    ) {\r\n      const { postId, imageId } = action.payload;\r\n\r\n      const image =\r\n        state.posts.entities[postId]?.images.entities[imageId]?.info;\r\n\r\n      if (image) {\r\n        image.shared = !image.shared;\r\n\r\n        if (image.shared) {\r\n          image.shareCount++;\r\n        } else {\r\n          image.shareCount--;\r\n        }\r\n        image;\r\n      }\r\n    },\r\n    togglePostLikeStarted(state, { payload: postId }: PayloadAction<string>) {\r\n      const post = state.posts.entities[postId]?.info;\r\n      if (post) {\r\n        post.liked = !post.liked;\r\n\r\n        if (post.liked) {\r\n          post.likeCount++;\r\n        } else {\r\n          post.likeCount--;\r\n        }\r\n      }\r\n    },\r\n    toggleImageLikeStarted(\r\n      state,\r\n      action: PayloadAction<{ postId: string; imageId: string }>,\r\n    ) {\r\n      const { postId, imageId } = action.payload;\r\n\r\n      const image =\r\n        state.posts.entities[postId]?.images.entities[imageId]?.info;\r\n\r\n      if (image) {\r\n        image.liked = !image.liked;\r\n\r\n        if (image.liked) {\r\n          image.likeCount++;\r\n        } else {\r\n          image.likeCount--;\r\n        }\r\n      }\r\n    },\r\n    setSelectedImage(\r\n      state,\r\n      action: PayloadAction<{ postId: string; index: number | null }>,\r\n    ) {\r\n      const { postId, index } = action.payload;\r\n      const post = state.posts.entities[postId];\r\n      if (post) {\r\n        post.selectedImageIndex = index;\r\n      }\r\n    },\r\n    fetchPosts(state, action: PayloadAction<string>) {\r\n      state.loaded = false;\r\n    },\r\n    fetchPostsSucceed(\r\n      state,\r\n      { payload: response }: PayloadAction<PagedResponse<PostDto>>,\r\n    ) {\r\n      state.loaded = true;\r\n\r\n      const { posts } = state;\r\n      const { data, ...pagination } = response;\r\n\r\n      postAdapter.setAll(posts, data.map(initPost));\r\n\r\n      posts.pagination = {\r\n        ...posts.pagination,\r\n        ...pagination,\r\n      };\r\n    },\r\n    fetchPostImagesSucceed(\r\n      state,\r\n      action: PayloadAction<{ postId: string; data: PostImageDto[] }>,\r\n    ) {\r\n      const { postId, data } = action.payload;\r\n      const images = state.posts.entities[postId]?.images;\r\n      if (images) {\r\n        imageAdapter.setAll(\r\n          images,\r\n          data.map((info) => ({\r\n            info,\r\n            comments: imageCommentAdapter.getInitialState({\r\n              pagination: {\r\n                fromEnd: true,\r\n                currentPage: 1,\r\n                totalPages: 0,\r\n                pageSize: 0,\r\n                totalItems: 0,\r\n                itemsPerPage: 3,\r\n              },\r\n            }),\r\n          })),\r\n        );\r\n      }\r\n    },\r\n    fetchImageCommentsSucceed(\r\n      state,\r\n      action: PayloadAction<{\r\n        postId: string;\r\n        imageId: string;\r\n        response: PagedResponse<ImageCommentDto>;\r\n      }>,\r\n    ) {\r\n      const { postId, imageId, response } = action.payload;\r\n\r\n      const comments =\r\n        state.posts.entities[postId]?.images.entities[imageId]?.comments;\r\n\r\n      if (comments) {\r\n        const { data, ...pagination } = response;\r\n        imageCommentAdapter.setAll(comments, response.data);\r\n        comments.pagination = {\r\n          ...comments.pagination,\r\n          ...pagination,\r\n        };\r\n      }\r\n    },\r\n    fetchMoreImageComments(\r\n      state,\r\n      action: PayloadAction<{ postId: string; imageId: string }>,\r\n    ) {\r\n      const { postId, imageId } = action.payload;\r\n\r\n      const pagination =\r\n        state.posts.entities[postId]?.images.entities[imageId]?.comments\r\n          .pagination;\r\n\r\n      if (pagination) {\r\n        pagination.itemsPerPage += 3;\r\n      }\r\n    },\r\n    fetchPostCommentsSucceed(\r\n      state,\r\n      action: PayloadAction<{\r\n        postId: string;\r\n        response: PagedResponse<PostCommentDto>;\r\n      }>,\r\n    ) {\r\n      const { postId, response } = action.payload;\r\n      const comments = state.posts.entities[postId]?.comments;\r\n      if (comments) {\r\n        const { data, ...pagination } = response;\r\n        commentAdapter.setAll(comments, data);\r\n        comments.pagination = {\r\n          ...comments.pagination,\r\n          ...pagination,\r\n        };\r\n      }\r\n    },\r\n    fetchMorePostComments(state, { payload: postId }: PayloadAction<string>) {\r\n      const pagination = state.posts.entities[postId]?.comments.pagination;\r\n      if (pagination) {\r\n        pagination.itemsPerPage += 3;\r\n      }\r\n    },\r\n    createPostCommentSucceed(\r\n      state,\r\n      action: PayloadAction<{\r\n        postId: string;\r\n        response: PagedResponse<PostCommentDto>;\r\n      }>,\r\n    ) {\r\n      const { postId, response } = action.payload;\r\n      const comments = state.posts.entities[postId]?.comments;\r\n      if (comments) {\r\n        const { data, ...pagination } = response;\r\n        commentAdapter.setAll(comments, data);\r\n        comments.pagination = {\r\n          ...comments.pagination,\r\n          ...pagination,\r\n          fromEnd: true,\r\n        };\r\n        if (comments.pagination.itemsPerPage < comments.pagination.totalItems) {\r\n          comments.pagination.itemsPerPage++;\r\n        }\r\n      }\r\n    },\r\n    createImageCommentSucceed(\r\n      state,\r\n      action: PayloadAction<{\r\n        postId: string;\r\n        imageId: string;\r\n        response: PagedResponse<ImageCommentDto>;\r\n      }>,\r\n    ) {\r\n      const { postId, imageId, response } = action.payload;\r\n\r\n      const comments =\r\n        state.posts.entities[postId]!.images.entities[imageId]?.comments;\r\n\r\n      if (comments) {\r\n        const { data, ...pagination } = response;\r\n        imageCommentAdapter.setAll(comments, data);\r\n        comments.pagination = {\r\n          ...comments.pagination,\r\n          ...pagination,\r\n        };\r\n        if (comments.pagination.itemsPerPage < comments.pagination.totalItems) {\r\n          comments.pagination.itemsPerPage++;\r\n        }\r\n      }\r\n    },\r\n    deletePostSucceed(state, { payload: postId }: PayloadAction<string>) {\r\n      postAdapter.removeOne(state.posts, postId);\r\n    },\r\n    reset(state, action: Action) {\r\n      state.loaded = false;\r\n      state.posts = initialState.posts;\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n\r\n  fetchPostImages: createAction<string>(`${sliceName}/fetchPostImages`),\r\n\r\n  fetchPostComments: createAction<string>(`${sliceName}/fetchPostComments`),\r\n\r\n  fetchMorePostComments: createAction<string>(\r\n    `${sliceName}/fetchMorePostComments`,\r\n  ),\r\n\r\n  fetchImageComments: createAction<{\r\n    postId: string;\r\n    imageId: string;\r\n  }>(`${sliceName}/fetchImageComments`),\r\n\r\n  fetchMoreImageComments: createAction<{\r\n    postId: string;\r\n    imageId: string;\r\n  }>(`${sliceName}/fetchMoreImageComments`),\r\n\r\n  createPostComment: createAction<{\r\n    postId: string;\r\n    comment: PostCommentCreateDto;\r\n  }>(`${sliceName}/createPostComment`),\r\n\r\n  deletePostComment: createAction<{\r\n    postId: string;\r\n    commentId: string;\r\n  }>(`${sliceName}/deletePostComment`),\r\n\r\n  createImageComment: createAction<{\r\n    postId: string;\r\n    imageId: string;\r\n    comment: ImageCommentCreateDto;\r\n  }>(`${sliceName}/createImageComment`),\r\n\r\n  deleteImageComment: createAction<{\r\n    postId: string;\r\n    imageId: string;\r\n    commentId: string;\r\n  }>(`${sliceName}/deleteImageComment`),\r\n\r\n  deletePost: createAction<string>(`${sliceName}/deletePost`),\r\n\r\n  togglePostLike: createAction<string>(`${sliceName}/togglePostLike`),\r\n\r\n  toggleImageLike: createAction<{ postId: string; imageId: string }>(\r\n    `${sliceName}/togglePostImageLike`,\r\n  ),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.postList;\r\n\r\nexport const getPostsLoading = (state: AppState) => getSelf(state).loaded;\r\n\r\nexport const getPostIds = (state: AppState) =>\r\n  getSelf(state).posts.ids as string[];\r\n\r\nexport const getPostsPagination = (state: AppState) =>\r\n  getSelf(state).posts.pagination;\r\n\r\nexport const getPostById = (state: AppState, postId: string) =>\r\n  getSelf(state).posts.entities[postId]!;\r\n\r\nexport const getPostInfo = (state: AppState, postId: string) =>\r\n  getPostById(state, postId).info;\r\n\r\nexport const getSelectedImageIndex = (state: AppState, postId: string) =>\r\n  getPostById(state, postId).selectedImageIndex;\r\n\r\nconst getPostCommentsState = (state: AppState, postId: string) =>\r\n  getPostById(state, postId).comments;\r\n\r\nexport const getPostCommentById = (\r\n  state: AppState,\r\n  postId: string,\r\n  commentId: string,\r\n) => getPostCommentsState(state, postId).entities[commentId]!;\r\n\r\nexport const getIsCurrentUserComment = (\r\n  state: AppState,\r\n  postId: string,\r\n  commentId: string,\r\n) =>\r\n  getPostCommentById(state, postId, commentId).authorId === getUser(state).id;\r\n\r\nexport const getPostCommentIds = (state: AppState, postId: string) =>\r\n  [...getPostCommentsState(state, postId).ids] as string[];\r\n\r\nexport const getPostCommentsPagination = (state: AppState, postId: string) =>\r\n  getPostCommentsState(state, postId).pagination;\r\n\r\nconst getImagesState = (state: AppState, postId: string) =>\r\n  getPostById(state, postId).images;\r\n\r\nexport const getImageById = (\r\n  state: AppState,\r\n  postId: string,\r\n  imageId: string,\r\n) => getImagesState(state, postId).entities[imageId]!;\r\n\r\nexport const getImages = (state: AppState, postId: string) =>\r\n  Object.values(getImagesState(state, postId).entities).map((x) => x!.info);\r\n\r\nexport const getImageInfo = (\r\n  state: AppState,\r\n  postId: string,\r\n  imageId: string,\r\n) => getImageById(state, postId, imageId).info;\r\n\r\nconst getImageCommentsState = (\r\n  state: AppState,\r\n  postId: string,\r\n  imageId: string,\r\n) => getImageById(state, postId, imageId).comments;\r\n\r\nexport const getImageCommentById = (\r\n  state: AppState,\r\n  postId: string,\r\n  imageId: string,\r\n  commentId: string,\r\n) => getImageCommentsState(state, postId, imageId).entities[commentId]!;\r\n\r\nexport const getIsCurrentUserImageComment = (\r\n  state: AppState,\r\n  postId: string,\r\n  imageId: string,\r\n  commentId: string,\r\n) =>\r\n  getImageCommentById(state, postId, imageId, commentId).authorId ===\r\n  getUser(state).id;\r\n\r\nexport const getImageCommentIds = (\r\n  state: AppState,\r\n  postId: string,\r\n  imageId: string,\r\n) => [...getImageCommentsState(state, postId, imageId).ids] as string[];\r\n\r\nexport const getImageCommentsPagination = (\r\n  state: AppState,\r\n  postId: string,\r\n  imageId: string,\r\n) => getImageCommentsState(state, postId, imageId).pagination;\r\n\r\nexport const getImageCommentsCount = (\r\n  state: AppState,\r\n  postId: string,\r\n  imageId: string,\r\n) => getImageCommentsState(state, postId, imageId).ids.length;\r\n\r\nexport const getIsCurrentUserPost = (state: AppState, postId: string) =>\r\n  getPostInfo(state, postId).authorId === getUser(state).id;\r\n\r\nexport const getLoaded = (state: AppState) => getSelf(state).loaded;\r\n\r\nexport default slice.reducer;\r\n","import { put, call, takeEvery, all } from \"@redux-saga/core/effects\";\r\nimport postAPI from \"api/postAPI\";\r\nimport PostDto from \"model/dto/post/PostDto\";\r\nimport { actions } from \"./postFormSlice\";\r\nimport { actions as postListActions } from \"../../../components/PostList/postListSlice\";\r\n\r\nfunction* createPost({ payload: post }: ReturnType<typeof actions.createPost>) {\r\n  const id: string = yield call(postAPI.createPost, post);\r\n\r\n  const newPost: PostDto = yield call(postAPI.getById, id);\r\n\r\n  yield put(postListActions.addPost(newPost));\r\n\r\n  yield put(actions.createPostSucceed());\r\n}\r\n\r\nfunction* watchCreatePost() {\r\n  yield takeEvery(actions.createPost.type, createPost);\r\n}\r\n\r\nexport default function* postFormSagas() {\r\n  yield all([watchCreatePost()]);\r\n}\r\n","import { normalize } from \"utils/dataUtils\";\r\nimport { users } from \"./users\";\r\nimport faker from \"faker\";\r\nimport { composeKey } from \"mock/utils/entityUtils\";\r\n\r\nexport interface Following {\r\n  userId: string;\r\n  followerId: string;\r\n}\r\n\r\nexport const followings: Following[] = [\r\n  {\r\n    userId: users[0].id,\r\n    followerId: users[1].id,\r\n  },\r\n  {\r\n    userId: users[0].id,\r\n    followerId: users[2].id,\r\n  },\r\n  {\r\n    userId: users[0].id,\r\n    followerId: users[3].id,\r\n  },\r\n  {\r\n    userId: users[0].id,\r\n    followerId: users[4].id,\r\n  },\r\n  {\r\n    userId: users[0].id,\r\n    followerId: users[5].id,\r\n  },\r\n  {\r\n    userId: users[5].id,\r\n    followerId: users[0].id,\r\n  },\r\n  {\r\n    userId: users[4].id,\r\n    followerId: users[0].id,\r\n  },\r\n  {\r\n    userId: users[3].id,\r\n    followerId: users[0].id,\r\n  },\r\n  {\r\n    userId: users[2].id,\r\n    followerId: users[0].id,\r\n  },\r\n];\r\n\r\nconst entities: { [compositeKey: string]: Following } = normalize(\r\n  followings,\r\n  (x) => composeKey(x.userId, x.followerId),\r\n);\r\n\r\nexport default entities;\r\n","import UserDto from \"model/dto/user/UserDto\";\r\nimport users, { User } from \"mock/data/users\";\r\nimport UserProfileDto from \"model/dto/userProfile/UserProfileDto\";\r\nimport { userProfilesByUserId } from \"mock/data/userProfiles\";\r\nimport { currentUser } from \"./authService\";\r\nimport followings, { Following } from \"mock/data/followings\";\r\nimport type FollowingDto from \"model/dto/following/FollowingDto\";\r\nimport type FollowerDto from \"model/dto/follower/FollowerDto\";\r\nimport type FollowingCreateDto from \"model/dto/following/FollowingCreateDto\";\r\nimport { composeKey } from \"mock/utils/entityUtils\";\r\n\r\n// users/:id\r\nfunction getById(id: string): UserDto {\r\n  return mapUser(users[id]);\r\n}\r\n\r\n// users/:id/followings\r\nfunction getFollowings(id: string): FollowingDto[] {\r\n  return Object.values(followings)\r\n    .filter((x) => x.followerId === id)\r\n    .map(mapFollowing);\r\n}\r\n\r\n// users/:id/followers\r\nfunction getFollowers(id: string): FollowerDto[] {\r\n  return Object.values(followings)\r\n    .filter((x) => x.userId === id)\r\n    .map(mapFollower);\r\n}\r\n\r\n// users/:userId/profile\r\nfunction getProfile(userId: string): UserProfileDto {\r\n  const { email, firstName, lastName, avatarUrl } = users[userId];\r\n  const { id, dateOfBirth, status, about } = userProfilesByUserId[userId];\r\n  return {\r\n    id,\r\n    userId,\r\n    email,\r\n    firstName,\r\n    lastName,\r\n    avatarUrl,\r\n    dateOfBirth,\r\n    status,\r\n    about,\r\n    isCurrentUserFollow: !!followings[composeKey(userId, currentUser!.id)],\r\n  };\r\n}\r\n\r\n// users/search\r\nfunction search(pattern: string): UserDto[] {\r\n  const regex = new RegExp(pattern.toLocaleLowerCase());\r\n  return Object.values(users)\r\n    .filter(\r\n      (x) =>\r\n        regex.test(x.firstName.toLocaleLowerCase()) ||\r\n        regex.test(x.lastName.toLocaleLowerCase()),\r\n    )\r\n    .map(mapUser);\r\n}\r\n\r\n// users/:id/followings/search\r\nfunction searchFollowings(id: string, pattern: string): FollowingDto[] {\r\n  const regex = new RegExp(pattern.toLocaleLowerCase());\r\n  return Object.values(followings)\r\n    .filter(\r\n      (x) =>\r\n        x.followerId == id &&\r\n        (regex.test(users[x.userId].firstName.toLocaleLowerCase()) ||\r\n          regex.test(users[x.userId].lastName.toLocaleLowerCase())),\r\n    )\r\n    .map(mapFollowing);\r\n}\r\n\r\n// users/:id/followers/search\r\nfunction searchFollowers(id: string, pattern: string): FollowerDto[] {\r\n  const regex = new RegExp(pattern.toLocaleLowerCase());\r\n  return Object.values(followings)\r\n    .filter(\r\n      (x) =>\r\n        x.userId == id &&\r\n        (regex.test(users[x.followerId].firstName.toLocaleLowerCase()) ||\r\n          regex.test(users[x.followerId].lastName.toLocaleLowerCase())),\r\n    )\r\n    .map(mapFollower);\r\n}\r\n\r\n// users/followings\r\nfunction createFollowing(following: FollowingCreateDto) {\r\n  const userId = following.userId;\r\n  const followerId = currentUser!.id;\r\n  followings[composeKey(userId, followerId)] = {\r\n    userId,\r\n    followerId,\r\n  };\r\n}\r\n\r\n// users/followings/:userId\r\nfunction deleteFollowing(userId: string) {\r\n  delete followings[composeKey(userId, currentUser!.id)];\r\n}\r\n\r\n// users/followers/:followerId\r\nfunction deleteFollower(followerId: string) {\r\n  delete followings[composeKey(currentUser!.id, followerId)];\r\n}\r\n\r\nexport default {\r\n  getById,\r\n  getFollowings,\r\n  getFollowers,\r\n  getProfile,\r\n  search,\r\n  searchFollowings,\r\n  searchFollowers,\r\n  createFollowing,\r\n  deleteFollowing,\r\n  deleteFollower,\r\n};\r\n\r\nfunction mapFollowing(following: Following): FollowingDto {\r\n  return {\r\n    userId: following.userId,\r\n    firstName: users[following.userId].firstName,\r\n    lastName: users[following.userId].lastName,\r\n    avatarUrl: users[following.userId].avatarUrl,\r\n    status: userProfilesByUserId[following.userId].status,\r\n  };\r\n}\r\n\r\nfunction mapFollower(following: Following): FollowerDto {\r\n  return {\r\n    followerId: following.followerId,\r\n    firstName: users[following.followerId].firstName,\r\n    lastName: users[following.followerId].lastName,\r\n    avatarUrl: users[following.followerId].avatarUrl,\r\n    status: userProfilesByUserId[following.followerId].status,\r\n  };\r\n}\r\n\r\nfunction mapUser(user: User): UserDto {\r\n  return {\r\n    id: user.id,\r\n    firstName: user.firstName,\r\n    lastName: user.lastName,\r\n    avatarUrl: user.avatarUrl,\r\n  };\r\n}\r\n","import userService from \"mock/services/userService\";\r\nimport type UserDto from \"model/dto/user/UserDto\";\r\nimport type UserProfileDto from \"model/dto/userProfile/UserProfileDto\";\r\nimport type FollowerDto from \"model/dto/follower/FollowerDto\";\r\nimport type FollowingCreateDto from \"model/dto/following/FollowingCreateDto\";\r\nimport type FollowingDto from \"model/dto/following/FollowingDto\";\r\n\r\nimport config from \"./config\";\r\n\r\nfunction getById(id: string): Promise<UserDto> {\r\n  return new Promise<UserDto>((resolve) =>\r\n    setTimeout(() => resolve(userService.getById(id)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction getFollowings(id: string): Promise<FollowingDto[]> {\r\n  return new Promise<FollowingDto[]>((resolve) =>\r\n    setTimeout(() => resolve(userService.getFollowings(id)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction getFollowers(id: string): Promise<FollowerDto[]> {\r\n  return new Promise<FollowerDto[]>((resolve) =>\r\n    setTimeout(() => resolve(userService.getFollowers(id)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction getProfile(id: string): Promise<UserProfileDto> {\r\n  return new Promise<UserProfileDto>((resolve) =>\r\n    setTimeout(() => resolve(userService.getProfile(id)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction search(pattern: string): Promise<UserDto[]> {\r\n  return new Promise<UserDto[]>((resolve) =>\r\n    setTimeout(() => resolve(userService.search(pattern)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction searchFollowings(\r\n  id: string,\r\n  pattern: string,\r\n): Promise<FollowingDto[]> {\r\n  return new Promise<FollowingDto[]>((resolve) =>\r\n    setTimeout(\r\n      () => resolve(userService.searchFollowings(id, pattern)),\r\n      config.delayMs,\r\n    ),\r\n  );\r\n}\r\n\r\nfunction searchFollowers(id: string, pattern: string): Promise<FollowerDto[]> {\r\n  return new Promise<FollowerDto[]>((resolve) =>\r\n    setTimeout(\r\n      () => resolve(userService.searchFollowers(id, pattern)),\r\n      config.delayMs,\r\n    ),\r\n  );\r\n}\r\n\r\nfunction createFollowing(following: FollowingCreateDto): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      userService.createFollowing(following);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction deleteFollowing(userId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      userService.deleteFollowing(userId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction deleteFollower(followerId: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      userService.deleteFollower(followerId);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nexport default {\r\n  getById,\r\n  getFollowings,\r\n  getFollowers,\r\n  getProfile,\r\n  search,\r\n  searchFollowings,\r\n  searchFollowers,\r\n  createFollowing,\r\n  deleteFollowing,\r\n  deleteFollower,\r\n};\r\n","import {\r\n  Action,\r\n  createAction,\r\n  createSlice,\r\n  PayloadAction,\r\n} from \"@reduxjs/toolkit\";\r\nimport UserDto from \"model/dto/user/UserDto\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"home/userList\";\r\n\r\ninterface UserSearchState {\r\n  loading: boolean;\r\n  searchText: string;\r\n  users: UserDto[];\r\n}\r\n\r\nconst initialState: UserSearchState = {\r\n  loading: false,\r\n  searchText: \"\",\r\n  users: [],\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    setSearchText(state, { payload }: PayloadAction<string>) {\r\n      state.searchText = payload;\r\n    },\r\n    searchStarted(state, action: Action) {\r\n      state.loading = true;\r\n    },\r\n    searchSucceed(state, { payload }: PayloadAction<UserDto[]>) {\r\n      state.users = payload;\r\n      state.loading = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n  changeSearchText: createAction<string>(`${name}/changeSearchText`),\r\n  searchUsers: createAction(`${name}/searchUsers`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.home.userList;\r\n\r\nexport const getLoading = (state: AppState) => getSelf(state).loading;\r\n\r\nexport const getSearchText = (state: AppState) => getSelf(state).searchText;\r\n\r\nexport const getUsers = (state: AppState) => getSelf(state).users;\r\n\r\nexport default slice.reducer;\r\n","import {\r\n  put,\r\n  call,\r\n  select,\r\n  delay,\r\n  takeLatest,\r\n  all,\r\n} from \"@redux-saga/core/effects\";\r\nimport userAPI from \"api/userAPI\";\r\nimport UserDto from \"model/dto/user/UserDto\";\r\nimport { actions, getSearchText } from \"./userListSlice\";\r\n\r\nfunction* changeSearchText({\r\n  payload: searchText,\r\n}: ReturnType<typeof actions.changeSearchText>) {\r\n  yield put(actions.setSearchText(searchText));\r\n\r\n  yield delay(500);\r\n\r\n  yield put(actions.searchUsers());\r\n}\r\n\r\nfunction* watchChangeSearchText() {\r\n  yield takeLatest(actions.changeSearchText.type, changeSearchText);\r\n}\r\n\r\nfunction* searchUsers(action: ReturnType<typeof actions.searchUsers>) {\r\n  yield put(actions.searchStarted());\r\n\r\n  const searchText: string = yield select(getSearchText);\r\n\r\n  const users: UserDto[] = yield call(userAPI.search, searchText);\r\n\r\n  yield put(actions.searchSucceed(users));\r\n}\r\n\r\nfunction* watchSearchUsers() {\r\n  yield takeLatest(actions.searchUsers.type, searchUsers);\r\n}\r\n\r\nexport default function* userListSagas() {\r\n  yield all([watchChangeSearchText(), watchSearchUsers()]);\r\n}\r\n","import { all } from \"@redux-saga/core/effects\";\r\n\r\nimport postFormSagas from \"./PostForm/postFormSagas\";\r\nimport userListSagas from \"./UserList/userListSagas\";\r\n\r\nexport default function* rootSaga() {\r\n  yield all([postFormSagas(), userListSagas()]);\r\n}\r\n","import {\r\n  Action,\r\n  createAction,\r\n  createEntityAdapter,\r\n  createSlice,\r\n  EntityState,\r\n  PayloadAction,\r\n} from \"@reduxjs/toolkit\";\r\nimport type FollowingDto from \"model/dto/following/FollowingDto\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"profile/followingsSection\";\r\n\r\ninterface Following {\r\n  info: FollowingDto;\r\n  isFollow: boolean;\r\n}\r\n\r\nconst followingAdapter = createEntityAdapter<Following>({\r\n  selectId: (x) => x.info.userId,\r\n});\r\n\r\ninterface FollowingsSectionState {\r\n  loading: boolean;\r\n  searchText: string;\r\n  followings: EntityState<Following>;\r\n}\r\n\r\nconst initialState: FollowingsSectionState = {\r\n  loading: false,\r\n  searchText: \"\",\r\n  followings: followingAdapter.getInitialState(),\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    setSearchText(state, { payload }: PayloadAction<string>) {\r\n      state.searchText = payload;\r\n    },\r\n    searchFollowings(state, action: Action) {\r\n      state.loading = true;\r\n    },\r\n    searchFollowingsSucceed(state, { payload }: PayloadAction<FollowingDto[]>) {\r\n      state.loading = false;\r\n      followingAdapter.setAll(\r\n        state.followings,\r\n        payload.map((info) => ({ info, isFollow: true })),\r\n      );\r\n    },\r\n    toggleFollow(state, { payload: userId }: PayloadAction<string>) {\r\n      const following = state.followings.entities[userId];\r\n      if (following) {\r\n        following.isFollow = !following.isFollow;\r\n      }\r\n    },\r\n    fetchFollowings(state, action: Action) {\r\n      state.loading = true;\r\n    },\r\n    fetchFollowingsSucceed(state, { payload }: PayloadAction<FollowingDto[]>) {\r\n      state.loading = false;\r\n      followingAdapter.setAll(\r\n        state.followings,\r\n        payload.map((info) => ({\r\n          info,\r\n          isFollow: true,\r\n        })),\r\n      );\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n  changeSearchText: createAction<string>(`${name}/changeSearchText`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.profile.followingsSection;\r\n\r\nexport const getFollowingIds = (state: AppState) =>\r\n  getSelf(state).followings.ids as string[];\r\n\r\nconst getFollowing = (state: AppState, followingId: string) =>\r\n  getSelf(state).followings.entities[followingId]!;\r\n\r\nexport const getFollowingInfo = (state: AppState, followingId: string) =>\r\n  getFollowing(state, followingId).info;\r\n\r\nexport const getIsFollow = (state: AppState, userId: string) =>\r\n  getFollowing(state, userId).isFollow;\r\n\r\nexport const getSearchText = (state: AppState) => getSelf(state).searchText;\r\n\r\nexport const getLoading = (state: AppState) => getSelf(state).loading;\r\n\r\nexport default slice.reducer;\r\n","import {\r\n  Action,\r\n  createAction,\r\n  createEntityAdapter,\r\n  createSlice,\r\n  EntityState,\r\n  PayloadAction,\r\n} from \"@reduxjs/toolkit\";\r\nimport FollowerDto from \"model/dto/follower/FollowerDto\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"profile/followersSection\";\r\n\r\ninterface Follower {\r\n  info: FollowerDto;\r\n  blocked: boolean;\r\n}\r\n\r\nconst followerAdapter = createEntityAdapter<Follower>({\r\n  selectId: (x) => x.info.followerId,\r\n});\r\n\r\ninterface FollowersSectionState {\r\n  loading: boolean;\r\n  searchText: string;\r\n  followers: EntityState<Follower>;\r\n}\r\n\r\nconst initialState: FollowersSectionState = {\r\n  loading: false,\r\n  searchText: \"\",\r\n  followers: followerAdapter.getInitialState(),\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    setSearchText(state, { payload }: PayloadAction<string>) {\r\n      state.searchText = payload;\r\n    },\r\n    searchFollowers(state, action: Action) {\r\n      state.loading = true;\r\n    },\r\n    searchFollowersSucceed(state, { payload }: PayloadAction<FollowerDto[]>) {\r\n      state.loading = false;\r\n      followerAdapter.setAll(\r\n        state.followers,\r\n        payload.map((info) => ({ info, blocked: false })),\r\n      );\r\n    },\r\n    blockFollower(state, { payload: followerId }: PayloadAction<string>) {\r\n      const following = state.followers.entities[followerId];\r\n      if (following) {\r\n        following.blocked = true;\r\n      }\r\n    },\r\n    fetchFollowers(state, action: Action) {\r\n      state.loading = true;\r\n    },\r\n    fetchFollowersSucceed(state, { payload }: PayloadAction<FollowerDto[]>) {\r\n      state.loading = false;\r\n      followerAdapter.setAll(\r\n        state.followers,\r\n        payload.map((info) => ({\r\n          info,\r\n          blocked: false,\r\n        })),\r\n      );\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n  changeSearchText: createAction<string>(`${name}/changeSearchText`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.profile.followersSection;\r\n\r\nexport const getFollowerIds = (state: AppState) =>\r\n  getSelf(state).followers.ids as string[];\r\n\r\nconst getFollower = (state: AppState, followerId: string) =>\r\n  getSelf(state).followers.entities[followerId]!;\r\n\r\nexport const getFollowerInfo = (state: AppState, followerId: string) =>\r\n  getFollower(state, followerId).info;\r\n\r\nexport const getBlocked = (state: AppState, followerId: string) =>\r\n  getFollower(state, followerId).blocked;\r\n\r\nexport const getSearchText = (state: AppState) => getSelf(state).searchText;\r\n\r\nexport const getLoading = (state: AppState) => getSelf(state).loading;\r\n\r\nexport default slice.reducer;\r\n","import { Action, combineReducers, createAction } from \"@reduxjs/toolkit\";\r\nimport followingsSectionReducer from \"./ProfileSections/FollowingsSection/followingsSectionSlice\";\r\nimport followersSectionReducer from \"./ProfileSections/FollowersSection/followersSectionSlice\";\r\n\r\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport UserProfileDto from \"model/dto/userProfile/UserProfileDto\";\r\nimport { getUser } from \"redux/commonSlice\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"profile\";\r\n\r\ninterface ProfileState {\r\n  loaded: boolean;\r\n  profile?: UserProfileDto;\r\n}\r\n\r\nconst initialState: ProfileState = {\r\n  loaded: false,\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    setStatus(state, { payload }: PayloadAction<string>) {\r\n      const profile = state.profile;\r\n      if (profile) {\r\n        profile.status = payload;\r\n      }\r\n    },\r\n    fetchProfile(state, action: PayloadAction<string>) {\r\n      state.loaded = false;\r\n    },\r\n    fetchProfileSucceed(state, { payload }: PayloadAction<UserProfileDto>) {\r\n      state.loaded = true;\r\n      state.profile = payload;\r\n    },\r\n    toggleFollowProfile(state, action: Action) {\r\n      if (state.profile) {\r\n        state.profile.isCurrentUserFollow = !state.profile.isCurrentUserFollow;\r\n      }\r\n    },\r\n    reset(state, action: Action) {\r\n      state.loaded = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n  deleteProfile: createAction(`${name}/delete`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.profile.common;\r\n\r\nexport const getLoaded = (state: AppState) => getSelf(state).loaded;\r\n\r\nexport const getProfile = (state: AppState) => getSelf(state).profile!;\r\n\r\nexport const getIsCurrentUserProfile = (state: AppState) =>\r\n  getProfile(state).userId == getUser(state)?.id;\r\n\r\nconst reducer = combineReducers({\r\n  common: slice.reducer,\r\n  followingsSection: followingsSectionReducer,\r\n  followersSection: followersSectionReducer,\r\n});\r\n\r\nexport default reducer;\r\n","import {\r\n  put,\r\n  call,\r\n  takeLatest,\r\n  select,\r\n  all,\r\n  delay,\r\n} from \"@redux-saga/core/effects\";\r\nimport { actions, getIsFollow } from \"./followingsSectionSlice\";\r\nimport userAPI from \"api/userAPI\";\r\nimport type FollowingDto from \"model/dto/following/FollowingDto\";\r\nimport { getProfile } from \"pages/Profile/profileSlice\";\r\n\r\nfunction* fetchFollowings(action: ReturnType<typeof actions.fetchFollowings>) {\r\n  const { userId } = getProfile(yield select());\r\n\r\n  const followings: FollowingDto[] = yield call(userAPI.getFollowings, userId);\r\n\r\n  yield put(actions.fetchFollowingsSucceed(followings));\r\n}\r\n\r\nfunction* watchFetchFollowings() {\r\n  yield takeLatest(actions.fetchFollowings.type, fetchFollowings);\r\n}\r\n\r\nfunction* toggleFollow({\r\n  payload: userId,\r\n}: ReturnType<typeof actions.toggleFollow>) {\r\n  yield delay(300);\r\n\r\n  const isFollow = getIsFollow(yield select(), userId);\r\n\r\n  if (isFollow) {\r\n    yield call(userAPI.createFollowing, { userId });\r\n  } else {\r\n    yield call(userAPI.deleteFollowing, userId);\r\n  }\r\n}\r\n\r\nfunction* watchToggleFollow() {\r\n  yield takeLatest(actions.toggleFollow.type, toggleFollow);\r\n}\r\n\r\nfunction* changeSearchText({\r\n  payload,\r\n}: ReturnType<typeof actions.changeSearchText>) {\r\n  yield put(actions.setSearchText(payload));\r\n\r\n  yield delay(500);\r\n\r\n  yield put(actions.searchFollowings());\r\n\r\n  const { userId } = getProfile(yield select());\r\n\r\n  const followings: FollowingDto[] = yield call(\r\n    userAPI.searchFollowings,\r\n    userId,\r\n    payload,\r\n  );\r\n\r\n  yield put(actions.searchFollowingsSucceed(followings));\r\n}\r\n\r\nfunction* watchChangeSearchText() {\r\n  yield takeLatest(actions.changeSearchText.type, changeSearchText);\r\n}\r\n\r\nexport default function* followingsSectionSaga() {\r\n  yield all([\r\n    watchFetchFollowings(),\r\n    watchToggleFollow(),\r\n    watchChangeSearchText(),\r\n  ]);\r\n}\r\n","import {\r\n  put,\r\n  call,\r\n  takeLatest,\r\n  select,\r\n  all,\r\n  takeEvery,\r\n  delay,\r\n} from \"@redux-saga/core/effects\";\r\nimport { actions } from \"./followersSectionSlice\";\r\nimport userAPI from \"api/userAPI\";\r\nimport FollowerDto from \"model/dto/follower/FollowerDto\";\r\nimport { getUser } from \"redux/commonSlice\";\r\nimport { getProfile } from \"pages/Profile/profileSlice\";\r\n\r\nfunction* fetchFollowers(action: ReturnType<typeof actions.fetchFollowers>) {\r\n  const { userId } = getProfile(yield select());\r\n\r\n  const followers: FollowerDto[] = yield call(userAPI.getFollowers, userId);\r\n\r\n  yield put(actions.fetchFollowersSucceed(followers));\r\n}\r\n\r\nfunction* watchFetchFollowers() {\r\n  yield takeLatest(actions.fetchFollowers.type, fetchFollowers);\r\n}\r\n\r\nfunction* changeSearchText({\r\n  payload,\r\n}: ReturnType<typeof actions.changeSearchText>) {\r\n  yield put(actions.setSearchText(payload));\r\n\r\n  yield delay(500);\r\n\r\n  yield put(actions.searchFollowers());\r\n\r\n  const { userId } = getProfile(yield select());\r\n\r\n  const followings: FollowerDto[] = yield call(\r\n    userAPI.searchFollowers,\r\n    userId,\r\n    payload,\r\n  );\r\n\r\n  yield put(actions.searchFollowersSucceed(followings));\r\n}\r\n\r\nfunction* watchChangeSearchText() {\r\n  yield takeLatest(actions.changeSearchText.type, changeSearchText);\r\n}\r\n\r\nfunction* blockFollower({\r\n  payload: followerId,\r\n}: ReturnType<typeof actions.blockFollower>) {\r\n  yield call(userAPI.deleteFollower, followerId);\r\n}\r\n\r\nfunction* watchBlockFollower() {\r\n  yield takeEvery(actions.blockFollower.type, blockFollower);\r\n}\r\n\r\nexport default function* followersSectionSagas() {\r\n  yield all([\r\n    watchFetchFollowers(),\r\n    watchChangeSearchText(),\r\n    watchBlockFollower(),\r\n  ]);\r\n}\r\n","import followings from \"mock/data/followings\";\r\nimport imageComments from \"mock/data/imageComments\";\r\nimport postComments from \"mock/data/postComments\";\r\nimport postImageLikes from \"mock/data/postImageLikes\";\r\nimport postImages from \"mock/data/postImages\";\r\nimport postLikes from \"mock/data/postLikes\";\r\nimport posts from \"mock/data/posts\";\r\nimport {\r\n  UserProfile,\r\n  userProfilesById,\r\n  userProfilesByUserId,\r\n} from \"mock/data/userProfiles\";\r\nimport users from \"mock/data/users\";\r\nimport UserProfileEditDto from \"model/dto/userProfile/UserProfileEditDto\";\r\nimport UserProfileInfoDto from \"model/dto/userProfile/UserProfileInfoDto\";\r\nimport { currentUser } from \"./authService\";\r\n\r\n// userProfiles/:id\r\nfunction getById(id: string): UserProfileInfoDto {\r\n  return mapProfile(userProfilesById[id]);\r\n}\r\n\r\n// userProfiles/:id\r\nfunction updateProfile(id: string, dto: UserProfileEditDto) {\r\n  const profile = userProfilesById[id];\r\n\r\n  if (profile.userId === currentUser!.id) {\r\n    profile.dateOfBirth = dto.dateOfBirth;\r\n    profile.about = dto.about;\r\n\r\n    const user = users[profile.userId];\r\n\r\n    user.firstName = dto.firstName;\r\n    user.lastName = dto.lastName;\r\n    user.avatarUrl = dto.avatarUrl;\r\n  }\r\n}\r\n\r\n// userProfiles/:id/status\r\nfunction updateStatus(id: string, text: string) {\r\n  userProfilesById[id].status = text;\r\n}\r\n\r\n// userProfiles/:id\r\nfunction deleteProfile(id: string) {\r\n  const { userId } = userProfilesById[id];\r\n  if (userId === currentUser!.id) {\r\n    delete users[userId];\r\n    delete userProfilesById[id];\r\n    delete userProfilesByUserId[userId];\r\n\r\n    Object.entries(followings).forEach(([key, value]) => {\r\n      if ([value.followerId, value.userId].includes(userId)) {\r\n        delete followings[key];\r\n      }\r\n    });\r\n\r\n    Object.entries(posts).forEach(([postId, post]) => {\r\n      if (post.authorId === userId) {\r\n        delete posts[postId];\r\n      }\r\n\r\n      Object.entries(postImages).forEach(([imageId, image]) => {\r\n        if (post.id === image.postId) {\r\n          delete postImages[imageId];\r\n        }\r\n\r\n        Object.entries(postImageLikes).forEach(([likeId, like]) => {\r\n          if (like.imageId === imageId || like.userId === userId) {\r\n            delete postImageLikes[likeId];\r\n          }\r\n        });\r\n\r\n        Object.entries(imageComments).forEach(([commentId, comment]) => {\r\n          if (comment.imageId === imageId || comment.authorId === userId) {\r\n            delete imageComments[commentId];\r\n          }\r\n        });\r\n      });\r\n\r\n      Object.entries(postLikes).forEach(([likeId, like]) => {\r\n        if (like.postId === postId || like.userId === userId) {\r\n          delete postLikes[likeId];\r\n        }\r\n      });\r\n\r\n      Object.entries(postComments).forEach(([commentId, comment]) => {\r\n        if (comment.postId === postId || comment.authorId === userId) {\r\n          delete postComments[commentId];\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport default { getById, updateProfile, updateStatus, deleteProfile };\r\n\r\nfunction mapProfile(profile: UserProfile): UserProfileInfoDto {\r\n  const { id, userId, dateOfBirth, about } = profile;\r\n  const { firstName, lastName, avatarUrl } = users[userId];\r\n  return {\r\n    id,\r\n    userId,\r\n    firstName,\r\n    lastName,\r\n    avatarUrl,\r\n    dateOfBirth,\r\n    about,\r\n  };\r\n}\r\n","import userProfileService from \"mock/services/userProfileService\";\r\nimport type UserProfileEditDto from \"model/dto/userProfile/UserProfileEditDto\";\r\nimport type UserProfileInfoDto from \"model/dto/userProfile/UserProfileInfoDto\";\r\n\r\nimport config from \"./config\";\r\n\r\nfunction getById(id: string): Promise<UserProfileInfoDto> {\r\n  return new Promise<UserProfileInfoDto>((resolve) =>\r\n    setTimeout(() => resolve(userProfileService.getById(id)), config.delayMs),\r\n  );\r\n}\r\n\r\nfunction updateProfile(id: string, profile: UserProfileEditDto): Promise<void> {\r\n  return new Promise<void>((resolve) =>\r\n    setTimeout(() => {\r\n      userProfileService.updateProfile(id, profile);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction updateStatus(id: string, text: string): Promise<void> {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => {\r\n      userProfileService.updateStatus(id, text);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nfunction deleteProfile(id: string): Promise<void> {\r\n  return new Promise<void>((resolve) =>\r\n    setTimeout(() => {\r\n      userProfileService.deleteProfile(id);\r\n      resolve();\r\n    }, config.delayMs),\r\n  );\r\n}\r\n\r\nexport default { getById, updateProfile, updateStatus, deleteProfile };\r\n","import {\r\n  put,\r\n  call,\r\n  takeLatest,\r\n  all,\r\n  select,\r\n  delay,\r\n} from \"@redux-saga/core/effects\";\r\nimport followingsSectionSagas from \"./ProfileSections/FollowingsSection/followingsSectionSagas\";\r\nimport followersSectionSagas from \"./ProfileSections/FollowersSection/followersSectionSagas\";\r\nimport userAPI from \"api/userAPI\";\r\nimport userProfileAPI from \"api/userProfileAPI\";\r\nimport UserProfileDto from \"model/dto/userProfile/UserProfileDto\";\r\nimport { actions, getProfile } from \"./profileSlice\";\r\nimport { actions as commonActions } from \"redux/commonSlice\";\r\n\r\nfunction* fetchProfile({\r\n  payload: userId,\r\n}: ReturnType<typeof actions.fetchProfile>) {\r\n  const profile: UserProfileDto = yield call(userAPI.getProfile, userId);\r\n  yield put(actions.fetchProfileSucceed(profile));\r\n}\r\n\r\nfunction* watchFetchProfile() {\r\n  yield takeLatest(actions.fetchProfile.type, fetchProfile);\r\n}\r\n\r\nfunction* setStatus({ payload: text }: ReturnType<typeof actions.setStatus>) {\r\n  const { id } = getProfile(yield select());\r\n  yield call(userProfileAPI.updateStatus, id, text);\r\n}\r\n\r\nfunction* watchSetStatus() {\r\n  yield takeLatest(actions.setStatus.type, setStatus);\r\n}\r\n\r\nfunction* deleteProfile() {\r\n  const { id } = getProfile(yield select());\r\n  yield call(userProfileAPI.deleteProfile, id);\r\n  yield put(commonActions.setUser(null));\r\n}\r\n\r\nfunction* watchDeleteProfile() {\r\n  yield takeLatest(actions.deleteProfile.type, deleteProfile);\r\n}\r\n\r\nfunction* toggleProfileFollow() {\r\n  yield delay(500);\r\n\r\n  const { userId, isCurrentUserFollow } = getProfile(yield select());\r\n\r\n  if (isCurrentUserFollow) {\r\n    yield call(userAPI.createFollowing, { userId });\r\n  } else {\r\n    yield call(userAPI.deleteFollowing, userId);\r\n  }\r\n}\r\n\r\nfunction* watchToggleFollowProfile() {\r\n  yield takeLatest(actions.toggleFollowProfile.type, toggleProfileFollow);\r\n}\r\n\r\nexport default function* profileSagas() {\r\n  yield all([\r\n    watchFetchProfile(),\r\n    watchSetStatus(),\r\n    watchDeleteProfile(),\r\n    watchToggleFollowProfile(),\r\n    followingsSectionSagas(),\r\n    followersSectionSagas(),\r\n  ]);\r\n}\r\n","import { AnyAction, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport UserProfileInfoDto from \"model/dto/userProfile/UserProfileInfoDto\";\r\nimport UserProfileEditDto from \"model/dto/userProfile/UserProfileEditDto\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"profileEditor\";\r\n\r\ninterface ProfileEditorState {\r\n  loaded: boolean;\r\n  isSubmitting: boolean;\r\n  submitted: boolean;\r\n  profile: UserProfileInfoDto | null;\r\n}\r\n\r\nconst initialState: ProfileEditorState = {\r\n  loaded: false,\r\n  isSubmitting: false,\r\n  submitted: false,\r\n  profile: null,\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    fetchProfile(state, { payload }: PayloadAction<string>) {\r\n      state.loaded = false;\r\n    },\r\n    fetchProfileSucceed(state, { payload }: PayloadAction<UserProfileInfoDto>) {\r\n      state.loaded = true;\r\n      state.profile = payload;\r\n    },\r\n    saveProfile(state, action: PayloadAction<UserProfileEditDto>) {\r\n      state.isSubmitting = true;\r\n    },\r\n    saveProfileSucceed(state, action: AnyAction) {\r\n      state.isSubmitting = false;\r\n      state.submitted = true;\r\n    },\r\n    reset(state) {\r\n      state.submitted = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = slice.actions;\r\n\r\nconst getSelf = (state: AppState) => state.profileEditor;\r\n\r\nexport const getLoaded = (state: AppState) => getSelf(state).loaded;\r\n\r\nexport const getProfile = (state: AppState) => getSelf(state).profile!;\r\n\r\nexport const getIsSubmitting = (state: AppState) => getSelf(state).isSubmitting;\r\n\r\nexport const getSubmitted = (state: AppState) => getSelf(state).submitted;\r\n\r\nexport default slice.reducer;\r\n","import { put, call, takeLatest, select, all } from \"@redux-saga/core/effects\";\r\nimport userProfileAPI from \"api/userProfileAPI\";\r\nimport UserProfileInfoDto from \"model/dto/userProfile/UserProfileInfoDto\";\r\nimport { actions, getProfile } from \"./profileEditorSlice\";\r\nimport { actions as commonActions } from \"redux/commonSlice\";\r\n\r\nfunction* fetchProfile({\r\n  payload: id,\r\n}: ReturnType<typeof actions.fetchProfile>) {\r\n  const profile: UserProfileInfoDto = yield call(userProfileAPI.getById, id);\r\n  yield put(actions.fetchProfileSucceed(profile));\r\n}\r\n\r\nfunction* watchProfile() {\r\n  yield takeLatest(actions.fetchProfile.type, fetchProfile);\r\n}\r\n\r\nfunction* saveProfile({\r\n  payload: profile,\r\n}: ReturnType<typeof actions.saveProfile>) {\r\n  const { id, userId } = yield select(getProfile);\r\n\r\n  yield call(userProfileAPI.updateProfile, id, profile);\r\n\r\n  yield put(commonActions.fetchUser(userId));\r\n\r\n  yield put(actions.saveProfileSucceed());\r\n}\r\n\r\nfunction* watchSaveProfile() {\r\n  yield takeLatest(actions.saveProfile.type, saveProfile);\r\n}\r\n\r\nexport default function* profileEditorSagas() {\r\n  yield all([watchProfile(), watchSaveProfile()]);\r\n}\r\n","import authService from \"mock/services/authService\";\r\nimport LoginErrorResponse from \"model/login/LoginErrorResponse\";\r\nimport LoginSuccessReponse from \"model/login/LoginSuccessResponse\";\r\nimport RegistrationErrorResponse from \"model/registration/RegistrationErrorResponse\";\r\nimport RegistrationSuccessResponse from \"model/registration/RegistrationSuccessResponse\";\r\nimport LoginVm from \"model/login/loginVm\";\r\nimport RegistrationVm from \"model/registration/registrationVm\";\r\nimport config from \"./config\";\r\n\r\nfunction registerUser(\r\n  vm: RegistrationVm,\r\n): Promise<RegistrationSuccessResponse | RegistrationErrorResponse> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve(authService.registerUser(vm));\r\n    }, config.delayMs);\r\n  });\r\n}\r\n\r\nfunction login(vm: LoginVm): Promise<LoginSuccessReponse | LoginErrorResponse> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve(authService.login(vm));\r\n    }, config.delayMs);\r\n  });\r\n}\r\n\r\nfunction logout(): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      authService.logout();\r\n      resolve();\r\n    }, config.delayMs);\r\n  });\r\n}\r\n\r\nexport default { registerUser, login, logout };\r\n","import {\r\n  Action,\r\n  createAction,\r\n  createSlice,\r\n  PayloadAction,\r\n} from \"@reduxjs/toolkit\";\r\nimport LoginVm from \"model/login/loginVm\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"login\";\r\n\r\ninterface LoginState {\r\n  isSubmitting: boolean;\r\n  errors: string[];\r\n}\r\n\r\nconst initialState: LoginState = {\r\n  isSubmitting: false,\r\n  errors: [],\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    login(state, action: PayloadAction<LoginVm>) {\r\n      state.isSubmitting = true;\r\n      state.errors = [];\r\n    },\r\n    loginSucceed(state, action: Action) {\r\n      state.isSubmitting = false;\r\n    },\r\n    loginFailed(state, { payload }: PayloadAction<string[]>) {\r\n      state.isSubmitting = false;\r\n      state.errors = payload;\r\n    },\r\n    reset(state) {\r\n      state.isSubmitting = false;\r\n      state.errors = [];\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...slice.actions,\r\n  logout: createAction(`${name}/logout`),\r\n};\r\n\r\nconst getSelf = (state: AppState) => state.login;\r\n\r\nexport const getIsSubmitting = (state: AppState) => getSelf(state).isSubmitting;\r\n\r\nexport const getErrors = (state: AppState) => getSelf(state).errors;\r\n\r\nexport default slice.reducer;\r\n","import { put, call, takeLatest, select, all } from \"@redux-saga/core/effects\";\r\nimport authAPI from \"api/authAPI\";\r\nimport LoginErrorResponse from \"model/login/LoginErrorResponse\";\r\nimport LoginSuccessReponse from \"model/login/LoginSuccessResponse\";\r\nimport { actions } from \"./loginSlice\";\r\nimport { actions as commonActions } from \"redux/commonSlice\";\r\n\r\nfunction* login({ payload: vm }: ReturnType<typeof actions.login>) {\r\n  const response: LoginSuccessReponse | LoginErrorResponse = yield call(\r\n    authAPI.login,\r\n    vm,\r\n  );\r\n\r\n  if (isSuccess(response)) {\r\n    yield put(commonActions.fetchUser(response.userId));\r\n  } else {\r\n    yield put(actions.loginFailed(response.errors));\r\n  }\r\n}\r\n\r\nfunction isSuccess(response: any): response is LoginSuccessReponse {\r\n  return \"userId\" in response;\r\n}\r\n\r\nfunction* watchLogin() {\r\n  yield takeLatest(actions.login.type, login);\r\n}\r\n\r\nfunction* logout() {\r\n  yield call(authAPI.logout);\r\n  yield put(commonActions.setUser(null));\r\n}\r\n\r\nfunction* watchLogout() {\r\n  yield takeLatest(actions.logout.type, logout);\r\n}\r\n\r\nexport default function* loginSagas() {\r\n  yield all([watchLogin(), watchLogout()]);\r\n}\r\n","import { Action, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport RegistrationVm from \"model/registration/registrationVm\";\r\nimport { AppState } from \"redux/store\";\r\n\r\nconst name = \"registration\";\r\n\r\ninterface RegistrationState {\r\n  isSubmitting: boolean;\r\n  errors: string[];\r\n}\r\n\r\nconst initialState: RegistrationState = {\r\n  isSubmitting: false,\r\n  errors: [],\r\n};\r\n\r\nconst slice = createSlice({\r\n  name,\r\n  initialState,\r\n  reducers: {\r\n    registerUser(state, action: PayloadAction<RegistrationVm>) {\r\n      state.isSubmitting = true;\r\n      state.errors = [];\r\n    },\r\n    registerUserSucceed(state, action: Action) {\r\n      state.isSubmitting = false;\r\n    },\r\n    registerUserFailed(state, { payload }: PayloadAction<string[]>) {\r\n      state.isSubmitting = false;\r\n      state.errors = payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const actions = slice.actions;\r\n\r\nconst getSelf = (state: AppState) => state.registration;\r\n\r\nexport const getIsSubmitting = (state: AppState) => getSelf(state).isSubmitting;\r\n\r\nexport const getErrors = (state: AppState) => getSelf(state).errors;\r\n\r\nexport default slice.reducer;\r\n","import { put, call, takeLatest, select, all } from \"@redux-saga/core/effects\";\r\nimport authAPI from \"api/authAPI\";\r\nimport RegistrationErrorResponse from \"model/registration/RegistrationErrorResponse\";\r\nimport RegistrationSuccessResponse from \"model/registration/RegistrationSuccessResponse\";\r\nimport { actions } from \"./registrationSlice\";\r\nimport { actions as commonActions } from \"redux/commonSlice\";\r\n\r\nfunction* registerUser({ payload }: ReturnType<typeof actions.registerUser>) {\r\n  const response: RegistrationSuccessResponse | RegistrationErrorResponse =\r\n    yield call(authAPI.registerUser, payload);\r\n\r\n  if (isSuccess(response)) {\r\n    yield put(commonActions.fetchUser(response.userId));\r\n  } else {\r\n    yield put(actions.registerUserFailed(response.errors));\r\n  }\r\n}\r\n\r\nfunction* watchRegisterUser() {\r\n  yield takeLatest(actions.registerUser.type, registerUser);\r\n}\r\n\r\nfunction isSuccess(\r\n  response: RegistrationSuccessResponse | RegistrationErrorResponse,\r\n): response is RegistrationSuccessResponse {\r\n  return \"userId\" in response;\r\n}\r\n\r\nexport default function* registrationSagas() {\r\n  yield all([watchRegisterUser()]);\r\n}\r\n","import { put, call, takeLatest, select, all } from \"@redux-saga/core/effects\";\r\nimport userAPI from \"api/userAPI\";\r\nimport UserDto from \"model/dto/user/UserDto\";\r\nimport { actions } from \"./commonSlice\";\r\n\r\nfunction* fetchUser({ payload: userId }: ReturnType<typeof actions.fetchUser>) {\r\n  const user: UserDto = yield call(userAPI.getById, userId);\r\n  yield put(actions.setUser(user));\r\n}\r\n\r\nfunction* watchFetchUser() {\r\n  yield takeLatest(actions.fetchUser.type, fetchUser);\r\n}\r\n\r\nexport default function* commonSagas() {\r\n  yield all([watchFetchUser()]);\r\n}\r\n","import {\r\n  call,\r\n  put,\r\n  select,\r\n  all,\r\n  delay,\r\n  takeLatest,\r\n  takeEvery,\r\n} from \"@redux-saga/core/effects\";\r\nimport { PayloadAction } from \"@reduxjs/toolkit\";\r\nimport postAPI from \"api/postAPI\";\r\nimport type ImageCommentDto from \"model/dto/imageComment/ImageCommentDto\";\r\nimport type PostCommentDto from \"model/dto/postComment/PostCommentDto\";\r\nimport PostDto from \"model/dto/post/PostDto\";\r\nimport PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport PagedResponse from \"model/pagination/PagedResponse\";\r\nimport {\r\n  actions,\r\n  getPostsPagination,\r\n  getPostCommentsPagination,\r\n  getImageCommentsPagination,\r\n  getPostInfo,\r\n  getImageInfo,\r\n  Pagination,\r\n} from \"./postListSlice\";\r\n\r\nfunction* fetchPosts({\r\n  payload: userId,\r\n}: ReturnType<typeof actions.fetchPosts>) {\r\n  const pagination: Pagination = yield select(getPostsPagination);\r\n\r\n  const response: PagedResponse<PostDto> = yield call(\r\n    postAPI.getAll,\r\n    userId,\r\n    pagination,\r\n  );\r\n\r\n  yield put(actions.fetchPostsSucceed(response));\r\n}\r\n\r\nfunction* watchFetchPosts() {\r\n  yield takeLatest(actions.fetchPosts.type, fetchPosts);\r\n}\r\n\r\nfunction* fetchPostImages({ payload: postId }: PayloadAction<string>) {\r\n  const data: PostImageDto[] = yield call(postAPI.getImages, postId);\r\n  yield put(actions.fetchPostImagesSucceed({ postId, data }));\r\n}\r\n\r\nfunction* watchFetchPostImages() {\r\n  yield takeEvery(actions.fetchPostImages.type, fetchPostImages);\r\n}\r\n\r\nfunction* fetchPostComments({\r\n  payload: postId,\r\n}: ReturnType<typeof actions.fetchPostComments>) {\r\n  const pagination: Pagination = yield select(\r\n    getPostCommentsPagination,\r\n    postId,\r\n  );\r\n\r\n  const response: PagedResponse<PostCommentDto> = yield call(\r\n    postAPI.getComments,\r\n    postId,\r\n    pagination,\r\n  );\r\n\r\n  yield put(actions.fetchPostCommentsSucceed({ postId, response }));\r\n}\r\n\r\nfunction* watchFetchPostComments() {\r\n  yield takeEvery(actions.fetchPostComments.type, fetchPostComments);\r\n}\r\n\r\nfunction* fetchMorePostComments({\r\n  payload: postId,\r\n}: ReturnType<typeof actions.fetchMorePostComments>) {\r\n  yield put(actions.fetchPostComments(postId));\r\n}\r\n\r\nfunction* watchFetchMorePostComments() {\r\n  yield takeEvery(actions.fetchMorePostComments.type, fetchMorePostComments);\r\n}\r\n\r\nfunction* fetchImageComments(\r\n  action: ReturnType<typeof actions.fetchImageComments>,\r\n) {\r\n  const { postId, imageId } = action.payload;\r\n\r\n  const pagination: Pagination = yield select(\r\n    getImageCommentsPagination,\r\n    postId,\r\n    imageId,\r\n  );\r\n\r\n  const response: PagedResponse<ImageCommentDto> = yield call(\r\n    postAPI.getImageComments,\r\n    imageId,\r\n    pagination,\r\n  );\r\n\r\n  yield put(actions.fetchImageCommentsSucceed({ postId, imageId, response }));\r\n}\r\n\r\nfunction* watchFetchImageComments() {\r\n  yield takeLatest(actions.fetchImageComments.type, fetchImageComments);\r\n}\r\n\r\nfunction* fetchMoreImageComments({\r\n  payload,\r\n}: ReturnType<typeof actions.fetchMoreImageComments>) {\r\n  yield put(actions.fetchImageComments(payload));\r\n}\r\n\r\nfunction* watchFetchMoreImageComments() {\r\n  yield takeLatest(actions.fetchMoreImageComments.type, fetchMoreImageComments);\r\n}\r\n\r\nfunction* createPostComment(\r\n  action: ReturnType<typeof actions.createPostComment>,\r\n) {\r\n  const { postId, comment } = action.payload;\r\n\r\n  yield call(postAPI.createComment, postId, comment);\r\n\r\n  const pagination: Pagination = yield select(\r\n    getPostCommentsPagination,\r\n    postId,\r\n  );\r\n\r\n  const response: PagedResponse<PostCommentDto> = yield call(\r\n    postAPI.getComments,\r\n    postId,\r\n    { ...pagination, fromEnd: true, itemsPerPage: pagination.itemsPerPage + 1 },\r\n  );\r\n\r\n  yield put(actions.createPostCommentSucceed({ postId, response }));\r\n}\r\n\r\nfunction* watchCreatePostComment() {\r\n  yield takeEvery(actions.createPostComment.type, createPostComment);\r\n}\r\n\r\nfunction* deletePostComment(\r\n  action: ReturnType<typeof actions.deletePostComment>,\r\n) {\r\n  const { postId, commentId } = action.payload;\r\n  yield call(postAPI.deleteComment, commentId);\r\n  yield put(actions.fetchPostComments(postId));\r\n}\r\n\r\nfunction* watchDeletePostComment() {\r\n  yield takeEvery(actions.deletePostComment.type, deletePostComment);\r\n}\r\n\r\nfunction* createImageComment(\r\n  action: ReturnType<typeof actions.createImageComment>,\r\n) {\r\n  const { postId, imageId, comment } = action.payload;\r\n\r\n  yield call(postAPI.createImageComment, imageId, comment);\r\n\r\n  const pagination: Pagination = yield select(\r\n    getImageCommentsPagination,\r\n    postId,\r\n    imageId,\r\n  );\r\n\r\n  const response: PagedResponse<ImageCommentDto> = yield call(\r\n    postAPI.getImageComments,\r\n    imageId,\r\n    {\r\n      ...pagination,\r\n      itemsPerPage: pagination.itemsPerPage + 1,\r\n    },\r\n  );\r\n\r\n  yield put(actions.createImageCommentSucceed({ postId, imageId, response }));\r\n}\r\n\r\nfunction* watchCreateImageComment() {\r\n  yield takeEvery(actions.createImageComment.type, createImageComment);\r\n}\r\n\r\nfunction* deleteImageComment(\r\n  action: ReturnType<typeof actions.deleteImageComment>,\r\n) {\r\n  const { postId, imageId, commentId } = action.payload;\r\n  yield call(postAPI.deleteImageComment, commentId);\r\n  yield put(actions.fetchImageComments({ postId, imageId }));\r\n}\r\n\r\nfunction* watchDeleteImageComment() {\r\n  yield takeEvery(actions.deleteImageComment.type, deleteImageComment);\r\n}\r\n\r\nfunction* deletePost({\r\n  payload: postId,\r\n}: ReturnType<typeof actions.deletePost>) {\r\n  yield call(postAPI.deletePost, postId);\r\n  yield put(actions.deletePostSucceed(postId));\r\n}\r\n\r\nfunction* watchDeletePost() {\r\n  yield takeEvery(actions.deletePost.type, deletePost);\r\n}\r\n\r\nfunction* togglePostLike({\r\n  payload: postId,\r\n}: ReturnType<typeof actions.togglePostLike>) {\r\n  yield put(actions.togglePostLikeStarted(postId));\r\n\r\n  yield delay(500);\r\n\r\n  const { liked } = yield select(getPostInfo, postId);\r\n\r\n  if (liked) {\r\n    yield call(postAPI.addLike, postId);\r\n  } else {\r\n    yield call(postAPI.removeLike, postId);\r\n  }\r\n}\r\n\r\nfunction* watchTogglePostLike() {\r\n  yield takeLatest(actions.togglePostLike.type, togglePostLike);\r\n}\r\n\r\nfunction* toggleImageLike(action: ReturnType<typeof actions.toggleImageLike>) {\r\n  const { postId, imageId } = action.payload;\r\n\r\n  yield put(actions.toggleImageLikeStarted({ postId, imageId }));\r\n\r\n  yield delay(500);\r\n\r\n  const { liked } = yield select(getImageInfo, postId, imageId);\r\n\r\n  if (liked) {\r\n    yield call(postAPI.addImageLike, imageId);\r\n  } else {\r\n    yield call(postAPI.removeImageLike, imageId);\r\n  }\r\n}\r\n\r\nfunction* watchToggleImageLike() {\r\n  yield takeLatest(actions.toggleImageLike.type, toggleImageLike);\r\n}\r\n\r\nexport default function* postListSagas() {\r\n  yield all([\r\n    watchFetchPosts(),\r\n    watchFetchPostImages(),\r\n    watchFetchPostComments(),\r\n    watchFetchMorePostComments(),\r\n    watchFetchImageComments(),\r\n    watchFetchMoreImageComments(),\r\n    watchCreatePostComment(),\r\n    watchDeletePostComment(),\r\n    watchCreateImageComment(),\r\n    watchDeleteImageComment(),\r\n    watchDeletePost(),\r\n    watchTogglePostLike(),\r\n    watchToggleImageLike(),\r\n  ]);\r\n}\r\n","import { all } from \"@redux-saga/core/effects\";\r\nimport homeSagas from \"pages/Home/homeSagas\";\r\nimport profileSagas from \"pages/Profile/profileSagas\";\r\nimport profileEditorSagas from \"pages/ProfileEditor/profileEditorSagas\";\r\nimport loginSagas from \"pages/Login/loginSagas\";\r\nimport registrationSagas from \"pages/Registration/registrationSagas\";\r\nimport commonSagas from \"redux/commonSagas\";\r\nimport postListSagas from \"components/PostList/postListSagas\";\r\n\r\nexport default function* rootSaga() {\r\n  yield all([\r\n    commonSagas(),\r\n    homeSagas(),\r\n    loginSagas(),\r\n    registrationSagas(),\r\n    profileSagas(),\r\n    profileEditorSagas(),\r\n    postListSagas(),\r\n  ]);\r\n}\r\n","import { combineReducers } from \"@reduxjs/toolkit\";\r\n\r\nimport userListReducer from \"./UserList/userListSlice\";\r\nimport postFormReducer from \"./PostForm/postFormSlice\";\r\n\r\nconst reducer = combineReducers({\r\n  postForm: postFormReducer,\r\n  userList: userListReducer,\r\n});\r\n\r\nexport default reducer;\r\n","import { combineReducers } from \"@reduxjs/toolkit\";\r\n\r\nimport common from \"./commonSlice\";\r\nimport home from \"pages/Home/homeSlice\";\r\nimport login from \"pages/Login/loginSlice\";\r\nimport registration from \"pages/Registration/registrationSlice\";\r\nimport profile from \"pages/Profile/profileSlice\";\r\nimport profileEditor from \"pages/ProfileEditor/profileEditorSlice\";\r\nimport postList from \"components/PostList/postListSlice\";\r\n\r\nconst reducer = combineReducers({\r\n  common,\r\n  home,\r\n  login,\r\n  registration,\r\n  profile,\r\n  profileEditor,\r\n  postList,\r\n});\r\n\r\nexport default reducer;\r\n","import { configureStore, ThunkAction, AnyAction } from \"@reduxjs/toolkit\";\r\nimport createSagaMiddleware from \"@redux-saga/core\";\r\n\r\nimport rootSaga from \"redux/rootSaga\";\r\nimport rootReducer from \"redux/rootReducer\";\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst store = configureStore({\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware().concat(sagaMiddleware),\r\n  reducer: rootReducer,\r\n  devTools: process.env.NODE_ENV !== \"production\",\r\n});\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport type AppState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport type AppThunk<ReturnType = void> = ThunkAction<\r\n  ReturnType,\r\n  AppState,\r\n  unknown,\r\n  AnyAction\r\n>;\r\n\r\nexport default store;\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    link: {\r\n      textDecoration: \"none\",\r\n      color: \"inherit\",\r\n      \"&:focus, &:hover, &:visited, &:link, &:active\": {\r\n        textDecoration: \"none\",\r\n      },\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useStyles from \"./useStyles\";\r\n\r\nexport default function NavLink(props: React.ComponentProps<typeof Link>) {\r\n  const classes = useStyles();\r\n  return <Link className={classes.link} {...props} />;\r\n}\r\n","import { useDispatch } from \"react-redux\";\r\nimport type { AppDispatch } from \"redux/store\";\r\n\r\nexport default function useAppDispatch() {\r\n  return useDispatch<AppDispatch>();\r\n}\r\n","import { TypedUseSelectorHook, useSelector } from \"react-redux\";\r\nimport type { AppState } from \"redux/store\";\r\n\r\nconst useAppSelector: TypedUseSelectorHook<AppState> = useSelector;\r\n\r\nexport default useAppSelector;\r\n","import React from \"react\";\r\nimport { Avatar as MuiAvatar } from \"@material-ui/core\";\r\nimport { PhotoCameraOutlined } from \"@material-ui/icons\";\r\n\r\nexport default function Avatar(\r\n  props: React.ComponentProps<typeof MuiAvatar>,\r\n): JSX.Element {\r\n  return (\r\n    <MuiAvatar {...props}>\r\n      <PhotoCameraOutlined />\r\n    </MuiAvatar>\r\n  );\r\n}\r\n","export function capitalizeFirstLetter(value: string): string {\r\n  return value.charAt(0).toUpperCase() + value.slice(1).toLowerCase();\r\n}\r\n\r\nexport function wrap(value: string, symbolCount: number = 20) {\r\n  if (value.length < symbolCount) {\r\n    return value;\r\n  } else {\r\n    return value.slice(0, symbolCount) + \"...\";\r\n  }\r\n}\r\n","import { capitalizeFirstLetter } from \"./stringUtils\";\r\n\r\ninterface User {\r\n  firstName: string;\r\n  lastName: string;\r\n}\r\n\r\nexport function getUserName({ firstName, lastName }: User): string {\r\n  return [firstName, lastName]\r\n    .filter((x) => !!x)\r\n    .map((x) => capitalizeFirstLetter(x.trim()))\r\n    .join(\" \");\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA9bSURBVHhe7dwLVFVlFgfw28PGssaaaaZGc9lohoWG6eAD36VpUkIKvjHfD1BJVJCyoYfms0xNS7NpsmyMlT0VQzM1FUERTKAEwSeaiVFZlk7gmf/+2Od4L1x8tFxj4P+31l7nfPs753K95+57zvede3URERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERER0cXR/J0D1zZYeqh+/WVHmt+B8PmgwKf2ur1VtZvo8tPixTz/pgv2Pd944b4Mv9f2FzV846Dlu/SQVX/ZYaveu0esOu8fKbr9o4L0WgnHptdY8U0j3Y2ocms/ddd9rWflJLWcnWs1n5dn+S/YazVZtN/yW7z/1wZvHFx119JDkXcuO9TS5+39NW5J/LpanTWF1WuuPlrvtk++/5M+BFHl0yEmr3qHuKy37pv8ldVuWraFIrGkSJrNy/vZ/+W9M+5dvL+Gbkp0eQken1G3S2zGrs5PZlkdn/7Sum/yrpIimZmzMWBGTl3dzAiNj7/Kd8lBP98l+b3qL80Prxd/eFi95UcDa33AAqJKKHh0Rt3gqB2HHo7eaXV5PMOyi6T95C9faRtnXa2buQLm5NT1n7/npcaL9hU0eu2AVXpMUvf9byyMSdJqJRSMrP06B/BUCYQOS60eGr49u3tkuhU87gvLLpJOk7Lm6SauJgtTq7SekTMlYHbuKfcxSblF8nGBddvKgj01Egru14cgqpj6Dtm6tNeIVKtHRJrlFMmELz6Ji7OulP4O0/KqY0yy3n1Mcr5FUmvVsaKaqwsjzR8iqmjCwpI69B+YYvUdss2yi6RbZFphl/GZt0p/27i9VTs9mbnZfUzSalbOTwEv5sY3n5sb7b9g35DGrx4Y5/fa/qUoku+9FknCMatGYmG4+YNUoZw+ffpBRE/Lsq7Q1OVlcO+k5AFhyZZ7kYREbIvSbhcut+afGZNkFeNM8nyr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\"","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    logo: {\r\n      width: theme.spacing(25),\r\n      height: theme.spacing(8),\r\n      objectFit: \"cover\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import logo from \"assets/logo.png\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\nexport default function Logo(): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <NavLink to=\"/\">\r\n      <img className={classes.logo} src={logo} />\r\n    </NavLink>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    icon: {\r\n      width: theme.spacing(5),\r\n      height: theme.spacing(5),\r\n      fill: theme.palette.common.white,\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  Box,\r\n  Container,\r\n  IconButton,\r\n  Slide,\r\n  useScrollTrigger,\r\n} from \"@material-ui/core\";\r\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport { getUser } from \"redux/commonSlice\";\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport Logo from \"./Logo/Logo\";\r\n\r\nimport { actions as loginActions } from \"pages/Login/loginSlice\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\nfunction HideOnScroll({ children }: { children: React.ReactElement }) {\r\n  const trigger = useScrollTrigger();\r\n\r\n  return (\r\n    <Slide appear={false} direction=\"down\" in={!trigger}>\r\n      {children}\r\n    </Slide>\r\n  );\r\n}\r\n\r\nexport default function Header(): JSX.Element {\r\n  const classes = useStyles();\r\n  const dispatch = useAppDispatch();\r\n  const user = useAppSelector(getUser);\r\n\r\n  return (\r\n    <HideOnScroll>\r\n      <AppBar>\r\n        <Container maxWidth=\"md\">\r\n          <Toolbar>\r\n            <Logo />\r\n\r\n            <Box flexGrow=\"1\" />\r\n\r\n            <NavLink to={user.id}>\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography>{getUserName(user)}</Typography>\r\n\r\n                <IconButton>\r\n                  <Avatar src={user.avatarUrl} />\r\n                </IconButton>\r\n              </Box>\r\n            </NavLink>\r\n\r\n            <IconButton onClick={() => dispatch(loginActions.logout())}>\r\n              <ExitToAppIcon className={classes.icon} />\r\n            </IconButton>\r\n          </Toolbar>\r\n        </Container>\r\n      </AppBar>\r\n    </HideOnScroll>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    avatar: {\r\n      width: theme.spacing(6),\r\n      height: theme.spacing(6),\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\n\r\nexport default function DeleteButton(\r\n  props: React.ComponentProps<typeof IconButton>,\r\n): JSX.Element {\r\n  return (\r\n    <IconButton {...props}>\r\n      <DeleteIcon color=\"secondary\" />\r\n    </IconButton>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Typography, Link } from \"@material-ui/core\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\n\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport useStyles from \"./useStyles\";\r\nimport DeleteButton from \"components/Buttons/DeleteButton/DeleteButton\";\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport type PostDto from \"model/dto/post/PostDto\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { actions, getIsCurrentUserPost, getPostInfo } from \"../postListSlice\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\n\r\ninterface PostInfoProps {\r\n  postId: string;\r\n}\r\n\r\nexport default function PostInfo({ postId }: PostInfoProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const post: PostDto = useAppSelector((state) => getPostInfo(state, postId));\r\n\r\n  const isCurrentUserPost: boolean = useAppSelector((state) =>\r\n    getIsCurrentUserPost(state, postId),\r\n  );\r\n\r\n  function handleDelete() {\r\n    dispatch(actions.deletePost(postId));\r\n  }\r\n\r\n  const userName = getUserName({\r\n    firstName: post.authorFirstName,\r\n    lastName: post.authorLastName,\r\n  });\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"space-between\">\r\n      <Box display=\"flex\">\r\n        <Avatar className={classes.avatar} src={post.authorAvatarUrl} />\r\n\r\n        <Box display=\"flex\" flexDirection=\"column\" ml={2}>\r\n          <NavLink to={post.authorId}>\r\n            <Link>\r\n              <Typography>{userName}</Typography>\r\n            </Link>\r\n          </NavLink>\r\n\r\n          <Typography variant=\"subtitle2\">\r\n            {moment(post.createDate).fromNow()}\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n\r\n      {isCurrentUserPost && <DeleteButton onClick={handleDelete} />}\r\n    </Box>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\nimport { red, teal, grey } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => {\r\n  const backgroundColor = grey[300];\r\n\r\n  return createStyles({\r\n    header: {\r\n      backgroundColor,\r\n      padding: theme.spacing(1, 3),\r\n    },\r\n    footer: {\r\n      backgroundColor,\r\n      padding: theme.spacing(2, 3),\r\n    },\r\n    avatar: {\r\n      width: theme.spacing(6),\r\n      height: theme.spacing(6),\r\n    },\r\n  });\r\n});\r\n\r\nexport default useStyles;\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\nimport { red } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    badge: {\r\n      color: theme.palette.background.paper,\r\n      backgroundColor: red[500],\r\n      border: `2px solid ${theme.palette.background.paper}`,\r\n      padding: \"0 4px\",\r\n    },\r\n    icon: {\r\n      color: red[500],\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { IconButton, Badge } from \"@material-ui/core\";\r\nimport { Favorite, FavoriteBorder } from \"@material-ui/icons\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\ntype LikeButtonProps = {\r\n  active: boolean;\r\n  likeCount: number;\r\n  onClick: () => void;\r\n};\r\n\r\nexport default function LikeButton({\r\n  active,\r\n  likeCount,\r\n  onClick,\r\n}: LikeButtonProps) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <IconButton onClick={onClick}>\r\n      <Badge classes={{ badge: classes.badge }} badgeContent={likeCount}>\r\n        {active ? (\r\n          <Favorite className={classes.icon} />\r\n        ) : (\r\n          <FavoriteBorder className={classes.icon} />\r\n        )}\r\n      </Badge>\r\n    </IconButton>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\nimport { teal } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    badge: {\r\n      color: theme.palette.background.paper,\r\n      backgroundColor: teal[500],\r\n      border: `2px solid ${theme.palette.background.paper}`,\r\n      padding: \"0 4px\",\r\n    },\r\n    icon: {\r\n      color: teal[500],\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { IconButton, Badge } from \"@material-ui/core\";\r\nimport { Chat, ChatOutlined } from \"@material-ui/icons\";\r\nimport useStyles from \"./useStyles\";\r\n\r\ninterface ShareButtonProps {\r\n  active: boolean;\r\n  shareCount: number;\r\n  onClick: () => void;\r\n}\r\n\r\nexport default function ShareButton({\r\n  active,\r\n  shareCount,\r\n  onClick,\r\n}: ShareButtonProps) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <IconButton onClick={onClick}>\r\n      <Badge classes={{ badge: classes.badge }} badgeContent={shareCount}>\r\n        {active ? (\r\n          <Chat className={classes.icon} />\r\n        ) : (\r\n          <ChatOutlined className={classes.icon} />\r\n        )}\r\n      </Badge>\r\n    </IconButton>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nimport LikeButton from \"components/Buttons/LikeButton/LikeButton\";\r\nimport ShareButton from \"components/Buttons/ShareButton/ShareButton\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { actions, getPostInfo } from \"../postListSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport PostDto from \"model/dto/post/PostDto\";\r\n\r\ninterface PostActivitiesProps {\r\n  postId: string;\r\n}\r\n\r\nexport function PostActivities({ postId }: PostActivitiesProps) {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const post: PostDto = useAppSelector((state) => getPostInfo(state, postId));\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <LikeButton\r\n        active={post.liked}\r\n        likeCount={post.likeCount}\r\n        onClick={() => dispatch(actions.togglePostLike(postId))}\r\n      />\r\n\r\n      <ShareButton\r\n        active={post.shared}\r\n        shareCount={post.shareCount}\r\n        onClick={() => dispatch(actions.sharePost(postId))}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { Typography, Box, Link } from \"@material-ui/core\";\r\n\r\nimport moment from \"moment\";\r\n\r\nimport Avatar from \"components/Avatar/Avatar\";\r\n\r\nimport type PostCommentDto from \"model/dto/postComment/PostCommentDto\";\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport {\r\n  actions,\r\n  getIsCurrentUserComment,\r\n  getPostCommentById,\r\n} from \"../postListSlice\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\nimport DeleteButton from \"components/Buttons/DeleteButton/DeleteButton\";\r\n\r\ninterface PostCommentProps {\r\n  postId: string;\r\n  commentId: string;\r\n}\r\n\r\nexport default function PostComment({\r\n  postId,\r\n  commentId,\r\n}: PostCommentProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const comment: PostCommentDto = useAppSelector((state) =>\r\n    getPostCommentById(state, postId, commentId),\r\n  );\r\n  const isCurrentUserComment = useAppSelector((state) =>\r\n    getIsCurrentUserComment(state, postId, commentId),\r\n  );\r\n  const authorName = getUserName({\r\n    firstName: comment.authorFirstName,\r\n    lastName: comment.authorLastName,\r\n  });\r\n\r\n  function handleDelete() {\r\n    dispatch(actions.deletePostComment({ postId, commentId }));\r\n  }\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Avatar src={comment.avatarUrl} />\r\n\r\n      <Box display=\"flex\" flexDirection=\"column\" ml={2}>\r\n        <NavLink to={comment.authorId}>\r\n          <Link>{authorName}</Link>\r\n        </NavLink>\r\n\r\n        <Typography variant=\"body2\">{comment.text}</Typography>\r\n\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <Typography variant=\"caption\">\r\n            {moment(comment.createDate).fromNow()}\r\n          </Typography>\r\n\r\n          {isCurrentUserComment && (\r\n            <DeleteButton size=\"small\" onClick={handleDelete} />\r\n          )}\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    form: {\r\n      width: \"100%\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Box, TextField, Button, Collapse } from \"@material-ui/core\";\r\nimport { Formik, Form, FormikHelpers } from \"formik\";\r\nimport * as yup from \"yup\";\r\n\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport useStyles from \"./useStyles\";\r\nimport type PostCommentCreateDto from \"model/dto/postComment/PostCommentCreateDto\";\r\nimport { actions } from \"../postListSlice\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nconst initialValues: PostCommentCreateDto = {\r\n  text: \"\",\r\n};\r\n\r\nconst validationSchema = yup.object({\r\n  text: yup.string().trim().required(),\r\n});\r\n\r\ninterface PostCommentFormProps {\r\n  postId: string;\r\n}\r\n\r\nexport default function PostCommentForm({\r\n  postId,\r\n}: PostCommentFormProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const avatarUrl = useAppSelector((state) => getUser(state).avatarUrl);\r\n\r\n  const inputRef = React.useRef<HTMLInputElement | null>(null);\r\n\r\n  const [isButtonsVisible, setIsButtonsVisible] = React.useState(false);\r\n\r\n  function handleSubmit(\r\n    comment: PostCommentCreateDto,\r\n    formik: FormikHelpers<PostCommentCreateDto>,\r\n  ) {\r\n    inputRef.current?.blur();\r\n    dispatch(actions.createPostComment({ postId, comment }));\r\n    setIsButtonsVisible(false);\r\n    formik.resetForm();\r\n    formik.setSubmitting(false);\r\n  }\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={initialValues}\r\n      validationSchema={validationSchema}\r\n      validateOnChange={true}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {({ values, isSubmitting, handleBlur, handleChange, resetForm }) => (\r\n        <Form className={classes.form} autoComplete=\"off\">\r\n          <Box display=\"flex\" justifyContent=\"center\">\r\n            <Avatar src={avatarUrl} />\r\n\r\n            <Box ml={2} width=\"100%\">\r\n              <TextField\r\n                inputRef={inputRef}\r\n                id=\"text\"\r\n                placeholder=\"Leave a comment...\"\r\n                value={values.text}\r\n                onFocus={() => setIsButtonsVisible(true)}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                fullWidth\r\n              />\r\n            </Box>\r\n          </Box>\r\n\r\n          <Collapse in={isButtonsVisible}>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\" mt={1}>\r\n              <Box display=\"flex\">\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    resetForm();\r\n                    setIsButtonsVisible(false);\r\n                  }}\r\n                >\r\n                  cancel\r\n                </Button>\r\n\r\n                <Box ml={2}>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disabled={isSubmitting}\r\n                  >\r\n                    add\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          </Collapse>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"@material-ui/core\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nimport PostComment from \"components/PostList/PostComment/PostComment\";\r\n\r\nimport {\r\n  actions,\r\n  getPostCommentIds,\r\n  getPostCommentsPagination,\r\n} from \"../postListSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport PostCommentForm from \"../PostCommentForm/PostCommentForm\";\r\n\r\ninterface PostCommentListType {\r\n  postId: string;\r\n}\r\n\r\nexport function PostCommentList({ postId }: PostCommentListType) {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const commentIds: string[] = useAppSelector((state) =>\r\n    getPostCommentIds(state, postId),\r\n  );\r\n\r\n  const { fromEnd, currentPage, totalPages } = useAppSelector((state) =>\r\n    getPostCommentsPagination(state, postId),\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.fetchPostComments(postId));\r\n  }, [postId]);\r\n\r\n  return (\r\n    <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"start\">\r\n      <Box my={2}>\r\n        <PostCommentForm postId={postId} />\r\n      </Box>\r\n\r\n      {fromEnd && currentPage < totalPages && (\r\n        <Box mt={2}>\r\n          <Link\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={() => dispatch(actions.fetchMorePostComments(postId))}\r\n          >\r\n            Show previous comments\r\n          </Link>\r\n        </Box>\r\n      )}\r\n\r\n      {(fromEnd ? commentIds.reverse() : commentIds).map((id) => (\r\n        <Box key={id} mt={2}>\r\n          <PostComment postId={postId} commentId={id} />\r\n        </Box>\r\n      ))}\r\n\r\n      {!fromEnd && currentPage < totalPages && (\r\n        <Box mt={2}>\r\n          <Link\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={() => dispatch(actions.fetchMorePostComments(postId))}\r\n          >\r\n            Show more comments\r\n          </Link>\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import { Grid, GridSpacing } from \"@material-ui/core\";\r\n\r\nconst SPACING: GridSpacing = 1;\r\n\r\ninterface ImageGridProps {\r\n  imagesCount: number;\r\n  renderImage: (index: number) => JSX.Element;\r\n}\r\n\r\nexport default function ImageGrid({\r\n  imagesCount,\r\n  renderImage,\r\n}: ImageGridProps): JSX.Element {\r\n  let elements: JSX.Element[] = [];\r\n\r\n  const indexes = Array.from(Array(imagesCount)).map((_, index) => index);\r\n\r\n  switch (imagesCount) {\r\n    case 1:\r\n    case 2:\r\n      elements = indexes.map((index) => (\r\n        <Grid key={index} item xs>\r\n          {renderImage(index)}\r\n        </Grid>\r\n      ));\r\n      break;\r\n\r\n    case 3:\r\n    case 4:\r\n      elements = [\r\n        <Grid key={0} item xs={8}>\r\n          {renderImage(0)}\r\n        </Grid>,\r\n\r\n        <Grid item xs={4} container direction=\"column\" spacing={SPACING}>\r\n          {indexes.slice(1).map((index) => (\r\n            <Grid key={index} item xs>\r\n              {renderImage(index)}\r\n            </Grid>\r\n          ))}\r\n        </Grid>,\r\n      ];\r\n      break;\r\n\r\n    case 5:\r\n      elements = [\r\n        ...indexes.slice(0, 2).map((index) => (\r\n          <Grid key={index} item xs={6}>\r\n            {renderImage(index)}\r\n          </Grid>\r\n        )),\r\n\r\n        ...indexes.slice(2).map((index) => (\r\n          <Grid key={index} item xs>\r\n            {renderImage(index)}\r\n          </Grid>\r\n        )),\r\n      ];\r\n      break;\r\n\r\n    case 6:\r\n    case 7:\r\n    case 8:\r\n      elements = [\r\n        <Grid key={0} item xs={12}>\r\n          {renderImage(0)}\r\n        </Grid>,\r\n\r\n        ...indexes.slice(1).map((index) => (\r\n          <Grid key={index} item xs>\r\n            {renderImage(index)}\r\n          </Grid>\r\n        )),\r\n      ];\r\n      break;\r\n\r\n    case 9:\r\n      elements = indexes.map((index) => (\r\n        <Grid key={index} item xs={4}>\r\n          {renderImage(index)}\r\n        </Grid>\r\n      ));\r\n      break;\r\n\r\n    case 10:\r\n      elements = [\r\n        ...indexes.slice(0, 2).map((index) => (\r\n          <Grid key={index} item xs={6}>\r\n            {renderImage(index)}\r\n          </Grid>\r\n        )),\r\n\r\n        ...indexes.slice(2).map((index) => (\r\n          <Grid key={index} item xs={3}>\r\n            {renderImage(index)}\r\n          </Grid>\r\n        )),\r\n      ];\r\n      break;\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={SPACING}>\r\n      {elements}\r\n    </Grid>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    avatar: {\r\n      width: theme.spacing(6),\r\n      height: theme.spacing(6),\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import { Box, Link, Typography } from \"@material-ui/core\";\r\nimport useStyles from \"./useStyles\";\r\nimport Avatar from \"../../Avatar/Avatar\";\r\nimport moment from \"moment\";\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport type PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport { getImageInfo, getPostInfo } from \"components/PostList/postListSlice\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport PostDto from \"model/dto/post/PostDto\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\ninterface ImageInfoProps {\r\n  postId: string;\r\n  imageId: string;\r\n}\r\n\r\nexport default function ImageInfo({ postId, imageId }: ImageInfoProps) {\r\n  const classes = useStyles();\r\n  const post: PostDto = useAppSelector((state) => getPostInfo(state, postId));\r\n  const image: PostImageDto = useAppSelector((state) =>\r\n    getImageInfo(state, postId, imageId),\r\n  );\r\n  const authorName = getUserName({\r\n    firstName: post.authorFirstName,\r\n    lastName: post.authorLastName,\r\n  });\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Avatar className={classes.avatar} src={post.authorAvatarUrl} />\r\n\r\n      <Box display=\"flex\" flexDirection=\"column\" ml={2}>\r\n        <NavLink to={post.authorId}>\r\n          <Link>\r\n            <Typography>{authorName}</Typography>\r\n          </Link>\r\n        </NavLink>\r\n\r\n        <Typography variant=\"subtitle2\">\r\n          {moment(image.createDate).fromNow()}\r\n        </Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { actions, getImageInfo } from \"../postListSlice\";\r\nimport LikeButton from \"components/Buttons/LikeButton/LikeButton\";\r\nimport ShareButton from \"components/Buttons/ShareButton/ShareButton\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport PostImageDto from \"model/dto/postImage/PostImageDto\";\r\n\r\ninterface ImageActivitiesProps {\r\n  postId: string;\r\n  imageId: string;\r\n}\r\n\r\nexport default function ImageActivities({\r\n  postId,\r\n  imageId,\r\n}: ImageActivitiesProps) {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const image: PostImageDto = useAppSelector((state) =>\r\n    getImageInfo(state, postId, imageId),\r\n  );\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <LikeButton\r\n        active={image.liked}\r\n        likeCount={image.likeCount}\r\n        onClick={() => dispatch(actions.toggleImageLike({ postId, imageId }))}\r\n      />\r\n\r\n      <ShareButton\r\n        active={image.shared}\r\n        shareCount={image.shareCount}\r\n        onClick={() => dispatch(actions.shareImage({ postId, imageId }))}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    modal: {\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n    },\r\n    content: {\r\n      width: theme.breakpoints.values.md,\r\n      backgroundColor: theme.palette.background.paper,\r\n      \"&:focus\": {\r\n        outline: \"none\",\r\n      },\r\n    },\r\n    image: {\r\n      maxWidth: \"100%\",\r\n      maxHeight: \"100%\",\r\n      objectFit: \"cover\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      position: \"relative\",\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n    },\r\n    sliderView: {\r\n      position: \"relative\",\r\n      zIndex: 1,\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      display: \"flex\",\r\n      overflowY: \"hidden\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      backgroundColor: \"rgba(0, 0, 0, 0.9)\",\r\n    },\r\n    slide: {\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      position: \"absolute\",\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      display: \"flex\",\r\n    },\r\n    leftArrowBox: {\r\n      position: \"relative\",\r\n      zIndex: 2,\r\n      width: \"34%\",\r\n      display: \"flex\",\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"center\",\r\n      cursor: \"pointer\",\r\n      opacity: 0.3,\r\n      \"&:hover\": {\r\n        opacity: 1,\r\n      },\r\n    },\r\n    rightArrowBox: {\r\n      position: \"relative\",\r\n      zIndex: 2,\r\n      width: \"66%\",\r\n      display: \"flex\",\r\n      justifyContent: \"flex-end\",\r\n      alignItems: \"center\",\r\n      cursor: \"pointer\",\r\n      opacity: 0.3,\r\n      \"&:hover\": {\r\n        opacity: 1,\r\n      },\r\n    },\r\n    arrowIcon: {\r\n      width: theme.spacing(6),\r\n      height: theme.spacing(6),\r\n      color: theme.palette.common.white,\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { ChevronLeftRounded, ChevronRightRounded } from \"@material-ui/icons\";\r\nimport useStyles from \"./useStyles\";\r\n\r\ninterface NavigationProps {\r\n  gotoPrev(): void;\r\n  gotoNext(): void;\r\n}\r\n\r\nexport default function Navigation({\r\n  gotoPrev,\r\n  gotoNext,\r\n}: NavigationProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.leftArrowBox} onClick={gotoPrev}>\r\n        <ChevronLeftRounded className={classes.arrowIcon} />\r\n      </div>\r\n\r\n      <div className={classes.rightArrowBox} onClick={gotoNext}>\r\n        <ChevronRightRounded className={classes.arrowIcon} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport useStyles from \"./useStyles\";\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport { virtualize, bindKeyboard } from \"react-swipeable-views-utils\";\r\nimport Navigation from \"./Navigation/Navigation\";\r\n\r\nconst VirtualizeSwipeableViews = bindKeyboard(virtualize(SwipeableViews));\r\n\r\ninterface SliderProps {\r\n  slideCount: number;\r\n  selectedIndex: number;\r\n  renderSlide: (index: number, key: number) => JSX.Element;\r\n  onSlideChange: (index: number) => void;\r\n}\r\n\r\nexport default function Slider({\r\n  slideCount,\r\n  selectedIndex,\r\n  renderSlide,\r\n  onSlideChange,\r\n}: SliderProps) {\r\n  const classes = useStyles();\r\n\r\n  function gotoPrev() {\r\n    onSlideChange(mod(selectedIndex - 1));\r\n  }\r\n\r\n  function gotoNext() {\r\n    onSlideChange(mod(selectedIndex + 1));\r\n  }\r\n\r\n  function handleIndexChange(index: number) {\r\n    onSlideChange(mod(index));\r\n  }\r\n\r\n  function slideRenderer({ index, key }: { index: number; key: number }) {\r\n    return renderSlide(mod(index), key);\r\n  }\r\n\r\n  function mod(index: number) {\r\n    return (slideCount + (index % slideCount)) % slideCount;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {slideCount > 1 && <Navigation gotoPrev={gotoPrev} gotoNext={gotoNext} />}\r\n\r\n      <VirtualizeSwipeableViews\r\n        className={classes.sliderView}\r\n        slideClassName={classes.slide}\r\n        index={selectedIndex}\r\n        onChangeIndex={handleIndexChange}\r\n        slideRenderer={slideRenderer}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import { Typography, Box, Link } from \"@material-ui/core\";\r\n\r\nimport moment from \"moment\";\r\nimport Avatar from \"components/Avatar/Avatar\";\r\n\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport type ImageCommentDto from \"model/dto/imageComment/ImageCommentDto\";\r\nimport {\r\n  actions,\r\n  getImageCommentById,\r\n  getIsCurrentUserImageComment,\r\n} from \"../postListSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\n\r\nimport DeleteButton from \"components/Buttons/DeleteButton/DeleteButton\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\ninterface ImageCommentProps {\r\n  postId: string;\r\n  imageId: string;\r\n  commentId: string;\r\n}\r\n\r\nexport default function ImageComment({\r\n  postId,\r\n  imageId,\r\n  commentId,\r\n}: ImageCommentProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const comment: ImageCommentDto = useAppSelector((state) =>\r\n    getImageCommentById(state, postId, imageId, commentId),\r\n  );\r\n  const userName: string = getUserName({\r\n    firstName: comment.authorFirstName,\r\n    lastName: comment.authorLastName,\r\n  });\r\n  const isCurrentUserComment: boolean = useAppSelector((state) =>\r\n    getIsCurrentUserImageComment(state, postId, imageId, commentId),\r\n  );\r\n\r\n  function handleDelete() {\r\n    dispatch(actions.deleteImageComment({ postId, imageId, commentId }));\r\n  }\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Avatar src={comment.avatarUrl} />\r\n\r\n      <Box display=\"flex\" flexDirection=\"column\" ml={2}>\r\n        <NavLink to={comment.authorId}>\r\n          <Link>{userName}</Link>\r\n        </NavLink>\r\n\r\n        <Typography variant=\"body2\">{comment.text}</Typography>\r\n\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <Typography variant=\"caption\">\r\n            {moment(comment.createDate).fromNow()}\r\n          </Typography>\r\n\r\n          {isCurrentUserComment && (\r\n            <DeleteButton size=\"small\" onClick={handleDelete} />\r\n          )}\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Grid, Box, Divider, Link } from \"@material-ui/core\";\r\nimport ImageComment from \"components/PostList/ImageComment/ImageComment\";\r\nimport {\r\n  actions,\r\n  getImageCommentIds,\r\n  getImageCommentsPagination,\r\n} from \"../postListSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\n\r\ninterface ImageCommentListProps {\r\n  postId: string;\r\n  imageId: string;\r\n}\r\n\r\nexport default function ImageCommentList({\r\n  postId,\r\n  imageId,\r\n}: ImageCommentListProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const commentIds: string[] = useAppSelector((state) =>\r\n    getImageCommentIds(state, postId, imageId),\r\n  );\r\n\r\n  const canFetchMoreComments = useAppSelector((state) => {\r\n    const { currentPage, totalPages } = getImageCommentsPagination(\r\n      state,\r\n      postId,\r\n      imageId,\r\n    );\r\n    return currentPage < totalPages;\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.fetchImageComments({ postId, imageId }));\r\n  }, [postId, imageId]);\r\n\r\n  return (\r\n    <Grid container direction=\"column\">\r\n      {canFetchMoreComments && (\r\n        <Grid item xs>\r\n          <Divider />\r\n\r\n          <Box display=\"flex\" justifyContent=\"center\" my={1}>\r\n            <Link\r\n              style={{ cursor: \"pointer\" }}\r\n              onClick={() =>\r\n                dispatch(actions.fetchMoreImageComments({ postId, imageId }))\r\n              }\r\n            >\r\n              Show previous comments\r\n            </Link>\r\n          </Box>\r\n        </Grid>\r\n      )}\r\n\r\n      {commentIds.reverse().map((commentId) => (\r\n        <Grid key={commentId} item xs=\"auto\">\r\n          <Divider />\r\n\r\n          <Box p={1}>\r\n            <ImageComment\r\n              postId={postId}\r\n              imageId={imageId}\r\n              commentId={commentId}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    form: {\r\n      width: \"100%\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Box, TextField, Button, Collapse } from \"@material-ui/core\";\r\nimport { Formik, Form, FormikHelpers } from \"formik\";\r\nimport * as yup from \"yup\";\r\n\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport useStyles from \"./useStyles\";\r\nimport { actions } from \"../postListSlice\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport ImageCommentCreateDto from \"model/dto/imageComment/ImageCommentCreateDto\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nconst initialValues: ImageCommentCreateDto = {\r\n  text: \"\",\r\n};\r\n\r\nconst validationSchema = yup.object({\r\n  text: yup.string().trim().required(\"Required\"),\r\n});\r\n\r\ninterface ImageCommentFormProps {\r\n  postId: string;\r\n  imageId: string;\r\n}\r\n\r\nexport default function ImageCommentForm({\r\n  postId,\r\n  imageId,\r\n}: ImageCommentFormProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const avatarUrl = useAppSelector((state) => getUser(state).avatarUrl);\r\n\r\n  const inputRef = React.useRef<HTMLInputElement | null>(null);\r\n\r\n  const [isButtonsVisible, setIsButtonsVisible] = React.useState(false);\r\n\r\n  function handleSubmit(\r\n    comment: ImageCommentCreateDto,\r\n    formik: FormikHelpers<ImageCommentCreateDto>,\r\n  ) {\r\n    inputRef.current?.blur();\r\n    dispatch(actions.createImageComment({ postId, imageId, comment }));\r\n    setIsButtonsVisible(false);\r\n    formik.resetForm();\r\n    formik.setSubmitting(false);\r\n  }\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={initialValues}\r\n      validationSchema={validationSchema}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {({ values, isSubmitting, handleBlur, handleChange, resetForm }) => (\r\n        <Form className={classes.form} autoComplete=\"off\">\r\n          <Box display=\"flex\" justifyContent=\"center\">\r\n            <Avatar src={avatarUrl} />\r\n\r\n            <Box ml={2} width=\"100%\">\r\n              <TextField\r\n                inputRef={inputRef}\r\n                id=\"text\"\r\n                placeholder=\"Leave a comment...\"\r\n                value={values.text}\r\n                onFocus={() => setIsButtonsVisible(true)}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                fullWidth\r\n              />\r\n            </Box>\r\n          </Box>\r\n\r\n          <Collapse in={isButtonsVisible}>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\" mt={1}>\r\n              <Box display=\"flex\">\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    resetForm();\r\n                    setIsButtonsVisible(false);\r\n                  }}\r\n                >\r\n                  cancel\r\n                </Button>\r\n\r\n                <Box ml={2}>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disabled={isSubmitting}\r\n                  >\r\n                    add\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          </Collapse>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Grid, Box, Divider, Modal, Link } from \"@material-ui/core\";\r\n\r\nimport ImageInfo from \"../ImageInfo/ImageInfo\";\r\nimport Activities from \"../ImageActivities/ImageActivities\";\r\nimport useStyles from \"./useStyles\";\r\nimport PostImageDto from \"model/dto/postImage/PostImageDto\";\r\nimport ImageSlider from \"components/Slider/Slider\";\r\nimport {\r\n  actions,\r\n  getImages,\r\n  getSelectedImageIndex,\r\n  getImageCommentsCount,\r\n} from \"../postListSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport ImageCommentList from \"../ImageCommentList/ImageCommentList\";\r\nimport ImageCommentForm from \"../ImageCommentForm/ImageCommentForm\";\r\n\r\ninterface ImageViewerProps {\r\n  postId: string;\r\n}\r\n\r\nexport default function ImageViewer({ postId }: ImageViewerProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const images: PostImageDto[] = useAppSelector((state) =>\r\n    getImages(state, postId),\r\n  );\r\n\r\n  const selectedImageIndex: number = useAppSelector(\r\n    (state) => getSelectedImageIndex(state, postId)!,\r\n  );\r\n\r\n  const selectedImage: PostImageDto = images[selectedImageIndex];\r\n\r\n  const hasAnyComment: boolean = useAppSelector(\r\n    (state) => getImageCommentsCount(state, postId, selectedImage.id) > 0,\r\n  );\r\n\r\n  function handleSlideChange(index: number) {\r\n    dispatch(actions.setSelectedImage({ postId, index }));\r\n  }\r\n\r\n  function handleClose() {\r\n    dispatch(actions.setSelectedImage({ postId, index: null }));\r\n  }\r\n\r\n  return (\r\n    <Modal className={classes.modal} onClose={handleClose} open disablePortal>\r\n      <Box\r\n        className={classes.content}\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <Box width=\"66%\">\r\n          <ImageSlider\r\n            slideCount={images.length}\r\n            selectedIndex={selectedImageIndex}\r\n            renderSlide={(index: number, key: number) => (\r\n              <img\r\n                key={key}\r\n                className={classes.image}\r\n                src={images[index].url}\r\n              />\r\n            )}\r\n            onSlideChange={handleSlideChange}\r\n          />\r\n        </Box>\r\n\r\n        <Box width=\"34%\" display=\"flex\" flexDirection=\"column\">\r\n          <Box\r\n            style={{\r\n              height: \"100%\",\r\n              overflowY: \"auto\",\r\n            }}\r\n          >\r\n            <Grid container direction=\"column\">\r\n              <Grid item xs>\r\n                <Box p={1}>\r\n                  <ImageInfo postId={postId} imageId={selectedImage.id} />\r\n                </Box>\r\n              </Grid>\r\n\r\n              <Grid item xs>\r\n                <Divider />\r\n\r\n                <Box px={1} py={2}>\r\n                  <Activities postId={postId} imageId={selectedImage.id} />\r\n                </Box>\r\n\r\n                {!hasAnyComment && <Divider />}\r\n              </Grid>\r\n\r\n              <Grid item xs=\"auto\">\r\n                <ImageCommentList postId={postId} imageId={selectedImage.id} />\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n\r\n          <Box width=\"100%\">\r\n            <Divider />\r\n\r\n            <Box p={1}>\r\n              <ImageCommentForm postId={postId} imageId={selectedImage.id} />\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    image: {\r\n      maxWidth: \"100%\",\r\n      maxHeight: \"100%\",\r\n      objectFit: \"cover\",\r\n      cursor: \"pointer\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport ImageGrid from \"components/ImageGrid/ImageGrid\";\r\nimport ImageViewer from \"components/PostList/ImageViewer/ImageViewer\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nimport type PostImageDto from \"model/dto/postImage/PostImageDto\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { actions, getImages, getSelectedImageIndex } from \"../postListSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport useStyles from \"./useStyles\";\r\n\r\ninterface PostAttachmentsProps {\r\n  postId: string;\r\n}\r\n\r\nexport default function PostAttachments({\r\n  postId,\r\n}: PostAttachmentsProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.fetchPostImages(postId));\r\n  }, [postId]);\r\n\r\n  const images: PostImageDto[] = useAppSelector((state) =>\r\n    getImages(state, postId),\r\n  );\r\n\r\n  const isImageSelected: boolean = useAppSelector(\r\n    (state) => getSelectedImageIndex(state, postId) != null,\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <ImageGrid\r\n        imagesCount={images.length}\r\n        renderImage={(index: number) => (\r\n          <img\r\n            className={classes.image}\r\n            src={images[index].url}\r\n            onClick={() =>\r\n              dispatch(actions.setSelectedImage({ postId, index }))\r\n            }\r\n          />\r\n        )}\r\n      />\r\n\r\n      {isImageSelected && <ImageViewer postId={postId} />}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { Paper, Box } from \"@material-ui/core\";\r\n\r\nimport PostInfo from \"../PostInfo/PostInfo\";\r\nimport useStyles from \"./useStyles\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { getPostInfo } from \"../postListSlice\";\r\nimport { PostActivities } from \"../PostActivities/PostActivities\";\r\nimport { PostCommentList } from \"../PostCommentList/PostCommentList\";\r\nimport PostAttachments from \"../PostAttachments/PostAttachments\";\r\n\r\ninterface PostProps {\r\n  postId: string;\r\n}\r\n\r\nexport default function Post({ postId }: PostProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const body: string = useAppSelector(\r\n    (state) => getPostInfo(state, postId).body,\r\n  );\r\n\r\n  return (\r\n    <Paper elevation={3}>\r\n      <div className={classes.header}>\r\n        <PostInfo postId={postId} />\r\n      </div>\r\n\r\n      <Box p={2}>\r\n        <Typography variant=\"body1\">{body}</Typography>\r\n      </Box>\r\n\r\n      <Box px={2}>\r\n        <PostAttachments postId={postId} />\r\n      </Box>\r\n\r\n      <Box display=\"flex\" p={2}>\r\n        <PostActivities postId={postId} />\r\n      </Box>\r\n\r\n      <div className={classes.footer}>\r\n        <PostCommentList postId={postId} />\r\n      </div>\r\n    </Paper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport Post from \"./Post/Post\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { actions, getLoaded, getPostIds } from \"./postListSlice\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\ninterface PostListProps {\r\n  userId: string;\r\n}\r\n\r\nexport default function PostList({ userId }: PostListProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const loaded = useAppSelector(getLoaded);\r\n  const postIds = useAppSelector(getPostIds);\r\n\r\n  React.useEffect(() => {\r\n    if (!loaded) {\r\n      dispatch(actions.fetchPosts(userId));\r\n    }\r\n  }, [userId, loaded]);\r\n\r\n  // TODO: not fires when using backward/forward arrows inside browser window\r\n  React.useEffect(() => history.listen(() => dispatch(actions.reset())), []);\r\n\r\n  return (\r\n    <>\r\n      {loaded && (\r\n        <Grid container spacing={2} direction=\"column\">\r\n          {postIds.map((id) => (\r\n            <Grid key={id} item>\r\n              <Post postId={id} />\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    image: {\r\n      maxWidth: \"100%\",\r\n      maxHeight: \"100%\",\r\n      objectFit: \"cover\",\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport useStyles from \"./useStyles\";\r\nimport DeleteButton from \"components/Buttons/DeleteButton/DeleteButton\";\r\n\r\ninterface UploadImageProps {\r\n  url: string;\r\n  deleteDisabled: boolean;\r\n  onDelete(): void;\r\n}\r\n\r\nexport default function UploadImage({\r\n  url,\r\n  deleteDisabled,\r\n  onDelete,\r\n}: UploadImageProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box position=\"relative\">\r\n      <img className={classes.image} src={url} />\r\n\r\n      {!deleteDisabled && (\r\n        <Box position=\"absolute\" top={0} right={0}>\r\n          <DeleteButton onClick={onDelete} />\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\nimport { grey } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => {\r\n  const backgroundColor = grey[300];\r\n\r\n  return createStyles({\r\n    header: {\r\n      backgroundColor,\r\n    },\r\n    body: {\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n    footer: {\r\n      backgroundColor,\r\n    },\r\n  });\r\n});\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nexport default function UserInfo(): JSX.Element {\r\n  const user = useAppSelector(getUser);\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Avatar src={user.avatarUrl} />\r\n\r\n      <Box display=\"flex\" alignItems=\"center\" ml={2}>\r\n        <Typography align=\"center\">{getUserName(user)}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Paper, Box, TextField, Button, IconButton } from \"@material-ui/core\";\r\nimport { AddAPhoto, PlayCircleOutline } from \"@material-ui/icons\";\r\nimport { useFormik } from \"formik\";\r\nimport * as yup from \"yup\";\r\nimport UploadImage from \"./UploadImage/UploadImage\";\r\nimport useStyles from \"./useStyles\";\r\nimport ImageGrid from \"components/ImageGrid/ImageGrid\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { actions, getIsSubmitting } from \"./postFormSlice\";\r\nimport PostCreateDto from \"model/dto/post/PostCreateDto\";\r\nimport UserInfo from \"./UserInfo/UserInfo\";\r\n\r\nconst initialValues: PostCreateDto = {\r\n  body: \"\",\r\n  images: [],\r\n};\r\n\r\nconst validationSchema = yup.object({\r\n  body: yup.string().trim().required(),\r\n});\r\n\r\nexport default function PostForm(): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const isSubmitting = useAppSelector(getIsSubmitting);\r\n\r\n  const { values, ...formik } = useFormik({\r\n    initialValues,\r\n    validationSchema,\r\n    onSubmit(post: PostCreateDto) {\r\n      dispatch(actions.createPost(post));\r\n    },\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    formik.setSubmitting(isSubmitting);\r\n    if (!isSubmitting) {\r\n      formik.resetForm();\r\n    }\r\n  }, [isSubmitting]);\r\n\r\n  const uploadDisabled = isSubmitting || values.images.length > 9;\r\n\r\n  function handleAddImage(event: React.ChangeEvent<HTMLInputElement>) {\r\n    const file: File | undefined = event.target.files?.[0];\r\n\r\n    if (file && file.type.match(\"image.*\")) {\r\n      formik.setFieldValue(\"images\", [\r\n        ...values.images,\r\n        URL.createObjectURL(file),\r\n      ]);\r\n    }\r\n\r\n    event.target.value = \"\";\r\n  }\r\n\r\n  function handleDeleteImage(index: number) {\r\n    const images = [...values.images];\r\n    images.splice(index, 1);\r\n    formik.setFieldValue(\"images\", images);\r\n  }\r\n\r\n  return (\r\n    <Paper elevation={4}>\r\n      <div className={classes.header}>\r\n        <Box px={2} py={1}>\r\n          <UserInfo />\r\n        </Box>\r\n      </div>\r\n\r\n      <form\r\n        autoComplete=\"off\"\r\n        onSubmit={formik.handleSubmit}\r\n        onReset={formik.handleReset}\r\n      >\r\n        <div className={classes.body}>\r\n          <Box px={3} pt={3}>\r\n            <TextField\r\n              id=\"body\"\r\n              name=\"body\"\r\n              placeholder=\"What's new?\"\r\n              variant=\"outlined\"\r\n              rows={4}\r\n              rowsMax={5}\r\n              value={values.body}\r\n              onChange={formik.handleChange}\r\n              onBlur={formik.handleBlur}\r\n              disabled={isSubmitting}\r\n              multiline\r\n              fullWidth\r\n            />\r\n          </Box>\r\n\r\n          <Box display=\"flex\" justifyContent=\"flex-start\" p={2}>\r\n            <input\r\n              id=\"addImage\"\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={handleAddImage}\r\n              hidden\r\n              disabled={uploadDisabled}\r\n            />\r\n            <label htmlFor=\"addImage\">\r\n              <IconButton\r\n                component=\"span\"\r\n                color=\"secondary\"\r\n                disabled={uploadDisabled}\r\n              >\r\n                <AddAPhoto color=\"inherit\" />\r\n              </IconButton>\r\n            </label>\r\n\r\n            <IconButton color=\"secondary\" disabled={isSubmitting}>\r\n              <PlayCircleOutline color=\"inherit\" />\r\n            </IconButton>\r\n          </Box>\r\n        </div>\r\n\r\n        {!!values.images.length && (\r\n          <Box px={3} pb={3}>\r\n            <ImageGrid\r\n              imagesCount={values.images.length}\r\n              renderImage={(index: number) => (\r\n                <UploadImage\r\n                  url={values.images[index]}\r\n                  deleteDisabled={isSubmitting}\r\n                  onDelete={() => handleDeleteImage(index)}\r\n                />\r\n              )}\r\n            />\r\n          </Box>\r\n        )}\r\n\r\n        <div className={classes.footer}>\r\n          <Box display=\"flex\" justifyContent=\"flex-end\" p={2}>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              disabled={isSubmitting}\r\n            >\r\n              post\r\n            </Button>\r\n          </Box>\r\n        </div>\r\n      </form>\r\n    </Paper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, CircularProgress, makeStyles } from \"@material-ui/core\";\r\n\r\nexport default function Progress(\r\n  props: React.ComponentProps<typeof CircularProgress>,\r\n) {\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n      <CircularProgress color=\"secondary\" {...props} />\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Paper,\r\n  Box,\r\n  TextField,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { actions, getLoading, getSearchText, getUsers } from \"./userListSlice\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport Progress from \"components/Progress/Progress\";\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport Avatar from \"components/Avatar/Avatar\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\nexport default function UserList(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const loading = useAppSelector(getLoading);\r\n\r\n  const searchText = useAppSelector(getSearchText);\r\n\r\n  const users = useAppSelector(getUsers);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.searchUsers());\r\n  }, []);\r\n\r\n  return (\r\n    <Paper elevation={4}>\r\n      <Box padding={2}>\r\n        <TextField\r\n          id=\"searchText\"\r\n          variant=\"outlined\"\r\n          placeholder=\"Search user...\"\r\n          value={searchText}\r\n          onChange={(e) => dispatch(actions.changeSearchText(e.target.value))}\r\n          InputProps={{\r\n            endAdornment: <>{loading && <Progress size={20} />}</>,\r\n          }}\r\n          fullWidth\r\n        />\r\n\r\n        {!users.length && !loading && (\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            mt={2}\r\n          >\r\n            <Typography color=\"textSecondary\" align=\"center\">\r\n              No matching users...\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n\r\n        {!!users.length && (\r\n          <List>\r\n            {users.map((x) => (\r\n              <NavLink key={x.id} to={`/${x.id}`}>\r\n                <ListItem button>\r\n                  <ListItemIcon>\r\n                    <Avatar src={x.avatarUrl} />\r\n                  </ListItemIcon>\r\n\r\n                  <ListItemText primary={getUserName(x)} />\r\n                </ListItem>\r\n              </NavLink>\r\n            ))}\r\n          </List>\r\n        )}\r\n      </Box>\r\n    </Paper>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\nimport { grey } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    typo: {\r\n      color: grey[500],\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Typography, Grid, GridSpacing } from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\n\r\nimport useStyles from \"./useStyles\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { capitalizeFirstLetter } from \"utils/stringUtils\";\r\nimport { getProfile } from \"../profileSlice\";\r\n\r\nconst SPACING: GridSpacing = 1;\r\n\r\ninterface AdditionalInfoProps {}\r\n\r\nexport default function AdditionalInfo(props: AdditionalInfoProps) {\r\n  const classes = useStyles();\r\n\r\n  const dateOfBirth = useAppSelector((state) => getProfile(state).dateOfBirth);\r\n\r\n  const about = useAppSelector((state) => getProfile(state).about);\r\n\r\n  return (\r\n    <Grid container spacing={SPACING}>\r\n      <Grid container item spacing={SPACING}>\r\n        <Grid item xs={3}>\r\n          <Typography className={classes.typo}>Date of birth:</Typography>\r\n        </Grid>\r\n\r\n        <Grid item xs={9}>\r\n          <Typography variant=\"body2\">\r\n            {capitalizeFirstLetter(\r\n              moment(dateOfBirth).format(\"LL\").toLocaleLowerCase(),\r\n            )}\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Grid container item spacing={SPACING}>\r\n        <Grid item xs={3}>\r\n          <Typography className={classes.typo}>About:</Typography>\r\n        </Grid>\r\n\r\n        <Grid item xs={9}>\r\n          <Typography variant=\"body2\">{about}</Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport Progress from \"components/Progress/Progress\";\r\n\r\nexport default function PageProgress() {\r\n  return (\r\n    <Box\r\n      display=\"flex\"\r\n      justifyContent=\"center\"\r\n      alignItems=\"center\"\r\n      height=\"100vh\"\r\n    >\r\n      <Progress />\r\n    </Box>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\nimport { grey } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => {\r\n  const color = grey[500];\r\n\r\n  return createStyles({\r\n    avatar: {\r\n      width: theme.spacing(15),\r\n      height: theme.spacing(15),\r\n    },\r\n    userName: {\r\n      fontWeight: \"bold\",\r\n    },\r\n    userEmail: {\r\n      color,\r\n    },\r\n  });\r\n});\r\n\r\nexport default useStyles;\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nexport default function EditButton(\r\n  props: React.ComponentProps<typeof IconButton>,\r\n): JSX.Element {\r\n  return (\r\n    <IconButton {...props}>\r\n      <EditIcon color=\"secondary\" />\r\n    </IconButton>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ViewStatus from \"./ViewStatus/ViewStatus\";\r\nimport EditStatus from \"./EditStatus/EditStatus\";\r\n\r\nenum StatusMode {\r\n  view,\r\n  edit,\r\n}\r\n\r\nexport default function Status(): JSX.Element {\r\n  const [mode, setMode] = React.useState(StatusMode.view);\r\n\r\n  switch (mode) {\r\n    case StatusMode.view:\r\n      return <ViewStatus onEdit={() => setMode(StatusMode.edit)} />;\r\n    case StatusMode.edit:\r\n      return <EditStatus onClose={() => setMode(StatusMode.view)} />;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n  TextField,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { actions, getProfile } from \"../profileSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\n\r\ntype DialogProps = React.ComponentProps<typeof Dialog>;\r\n\r\ntype DeleteProfileDialogProps = Omit<DialogProps, \"onClose\"> & {\r\n  onClose(): void;\r\n};\r\n\r\nexport default function DeleteProfileDialog(\r\n  props: DeleteProfileDialogProps,\r\n): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const email = useAppSelector((state) => getProfile(state).email);\r\n\r\n  const [emailConfirm, setEmailConfirm] = React.useState(\"\");\r\n\r\n  function handleDelete() {\r\n    dispatch(actions.deleteProfile());\r\n  }\r\n\r\n  return (\r\n    <Dialog {...props}>\r\n      <DialogTitle>Are you sure you want to delete your profile?</DialogTitle>\r\n\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          To confirm your action, please enter your email address here\r\n        </DialogContentText>\r\n\r\n        <TextField\r\n          id=\"email\"\r\n          label=\"Email Address\"\r\n          type=\"email\"\r\n          margin=\"dense\"\r\n          value={emailConfirm}\r\n          onChange={(e) => setEmailConfirm(e.target.value)}\r\n          fullWidth\r\n          autoFocus\r\n        />\r\n      </DialogContent>\r\n\r\n      <DialogActions>\r\n        <Button variant=\"outlined\" color=\"primary\" onClick={props.onClose}>\r\n          Cancel\r\n        </Button>\r\n\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          disabled={email !== emailConfirm}\r\n          onClick={handleDelete}\r\n        >\r\n          OK\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { actions, getProfile } from \"pages/Profile/profileSlice\";\r\n\r\nexport default function FollowButton(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const isFollow: boolean = useAppSelector(\r\n    (state) => getProfile(state).isCurrentUserFollow,\r\n  );\r\n\r\n  return (\r\n    <Button\r\n      variant={isFollow ? \"outlined\" : \"contained\"}\r\n      color=\"primary\"\r\n      style={{ textTransform: \"none\" }}\r\n      onClick={() => dispatch(actions.toggleFollowProfile())}\r\n    >\r\n      {isFollow ? \"Unfollow\" : \"Follow\"}\r\n    </Button>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, Avatar, Typography } from \"@material-ui/core\";\r\n\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport useStyles from \"./useStyles\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport DeleteButton from \"components/Buttons/DeleteButton/DeleteButton\";\r\nimport EditButton from \"components/Buttons/EditButton/EditButton\";\r\nimport UserProfileDto from \"model/dto/userProfile/UserProfileDto\";\r\nimport DeleteProfileDialog from \"../DeleteProfileDialog/DeleteProfileDialog\";\r\nimport { getIsCurrentUserProfile, getProfile } from \"../profileSlice\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\nimport FollowButton from \"./FollowButton/FollowButton\";\r\n\r\nexport default function MainInfo(): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const profile: UserProfileDto = useAppSelector(getProfile);\r\n\r\n  const isCurrentUserProfile = useAppSelector(getIsCurrentUserProfile);\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Box display=\"flex\">\r\n        <Avatar className={classes.avatar} src={profile.avatarUrl} />\r\n\r\n        <Box display=\"flex\" flexDirection=\"column\" ml={2}>\r\n          <Typography className={classes.userName} variant=\"h6\">\r\n            {getUserName(profile)}\r\n          </Typography>\r\n\r\n          {isCurrentUserProfile && (\r\n            <Typography className={classes.userEmail} variant=\"body2\">\r\n              {profile.email}\r\n            </Typography>\r\n          )}\r\n        </Box>\r\n      </Box>\r\n\r\n      <Box flexGrow=\"1\" />\r\n\r\n      <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"flex-start\">\r\n        {isCurrentUserProfile ? (\r\n          <div>\r\n            <NavLink\r\n              to={{\r\n                pathname: `${profile.userId}/edit`,\r\n                state: {\r\n                  profileId: profile.id,\r\n                },\r\n              }}\r\n            >\r\n              <EditButton />\r\n            </NavLink>\r\n\r\n            <DeleteButton onClick={() => setOpen(true)} />\r\n          </div>\r\n        ) : (\r\n          <FollowButton />\r\n        )}\r\n      </Box>\r\n\r\n      <DeleteProfileDialog open={open} onClose={() => setOpen(false)} />\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport EditButton from \"components/Buttons/EditButton/EditButton\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport {\r\n  getIsCurrentUserProfile,\r\n  getProfile,\r\n} from \"pages/Profile/profileSlice\";\r\n\r\ninterface ViewStatusProps {\r\n  onEdit(): void;\r\n}\r\n\r\nexport default function ViewStatus({ onEdit }: ViewStatusProps): JSX.Element {\r\n  const status = useAppSelector((state) => getProfile(state).status);\r\n\r\n  const isCurrentUserProfile = useAppSelector(getIsCurrentUserProfile);\r\n\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\" maxWidth=\"100%\">\r\n      <Box flexGrow=\"1\">\r\n        {status ? (\r\n          <Typography style={{ overflowWrap: \"anywhere\" }}>{status}</Typography>\r\n        ) : (\r\n          isCurrentUserProfile && (\r\n            <Typography variant=\"body2\" color=\"textSecondary\">\r\n              Set status\r\n            </Typography>\r\n          )\r\n        )}\r\n      </Box>\r\n\r\n      {/* <Box flexGrow=\"1\" /> */}\r\n\r\n      {isCurrentUserProfile && <EditButton onClick={onEdit} />}\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, TextField, Button } from \"@material-ui/core\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { actions, getProfile } from \"pages/Profile/profileSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\n\r\ninterface EditStatusProps {\r\n  onClose(): void;\r\n}\r\n\r\nexport default function EditStatus({ onClose }: EditStatusProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const status = useAppSelector((state) => getProfile(state).status);\r\n\r\n  const [text, setText] = React.useState(status ?? \"\");\r\n\r\n  function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\r\n    event.preventDefault();\r\n\r\n    const oldStatus = (status ?? \"\").trim();\r\n    const newStatus = text.trim();\r\n\r\n    if (oldStatus !== newStatus) {\r\n      dispatch(actions.setStatus(newStatus));\r\n    }\r\n\r\n    onClose();\r\n  }\r\n\r\n  function handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    setText(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <Box display=\"flex\" flexDirection=\"column\">\r\n        <TextField\r\n          id=\"text\"\r\n          name=\"text\"\r\n          variant=\"outlined\"\r\n          rows={4}\r\n          rowsMax={5}\r\n          value={text}\r\n          onChange={handleChange}\r\n          inputProps={{\r\n            maxLength: 200,\r\n          }}\r\n          multiline\r\n          fullWidth\r\n        />\r\n\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" mt={1}>\r\n          <Box display=\"flex\">\r\n            <Button variant=\"outlined\" color=\"primary\" onClick={onClose}>\r\n              cancel\r\n            </Button>\r\n\r\n            <Box ml={2}>\r\n              <Button type=\"submit\" variant=\"contained\" color=\"primary\">\r\n                add\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </form>\r\n  );\r\n}\r\n","type TabPanelProps = {\r\n  index: number;\r\n  value: number;\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport default function TabPanel({\r\n  value,\r\n  index,\r\n  children,\r\n}: TabPanelProps): JSX.Element {\r\n  return (\r\n    <div style={{ display: value === index ? \"block\" : \"none\", width: \"100%\" }}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    avatar: {\r\n      width: theme.spacing(10),\r\n      height: theme.spacing(10),\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { actions, getIsFollow } from \"../../followingsSectionSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\n\r\ninterface FollowButtonProps {\r\n  followingId: string;\r\n}\r\n\r\nexport default function FollowButton({\r\n  followingId,\r\n}: FollowButtonProps): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const isFollow: boolean = useAppSelector((state) =>\r\n    getIsFollow(state, followingId),\r\n  );\r\n\r\n  return (\r\n    <Button\r\n      variant={isFollow ? \"outlined\" : \"contained\"}\r\n      color=\"primary\"\r\n      style={{ textTransform: \"none\" }}\r\n      onClick={() => dispatch(actions.toggleFollow(followingId))}\r\n    >\r\n      {isFollow ? \"Unfollow\" : \"Follow\"}\r\n    </Button>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, Avatar, Typography, Grid, Link } from \"@material-ui/core\";\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport useStyles from \"./useStyles\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { getFollowingInfo } from \"../followingsSectionSlice\";\r\nimport { wrap } from \"utils/stringUtils\";\r\nimport type FollowingDto from \"model/dto/following/FollowingDto\";\r\nimport { getIsCurrentUserProfile } from \"pages/Profile/profileSlice\";\r\nimport FollowButton from \"./FollowButton/FollowButton\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\ninterface FollowingProps {\r\n  followingId: string;\r\n}\r\n\r\nexport default function Following({\r\n  followingId,\r\n}: FollowingProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const following: FollowingDto = useAppSelector((state) =>\r\n    getFollowingInfo(state, followingId),\r\n  );\r\n\r\n  const isCurrentUserProfile = useAppSelector(getIsCurrentUserProfile);\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Box display=\"flex\" justifyContent=\"center\">\r\n        <Avatar className={classes.avatar} src={following.avatarUrl} />\r\n      </Box>\r\n\r\n      <Box ml={4}>\r\n        <Grid container direction=\"column\" spacing={1}>\r\n          <Grid item xs>\r\n            <NavLink to={following.userId}>\r\n              <Link>{getUserName(following)}</Link>\r\n            </NavLink>\r\n          </Grid>\r\n\r\n          <Grid item xs>\r\n            <Typography variant=\"body2\">\r\n              {!!following.status && wrap(following.status, 50)}\r\n            </Typography>\r\n          </Grid>\r\n\r\n          <Grid item xs>\r\n            {isCurrentUserProfile && <FollowButton followingId={followingId} />}\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { actions, getFollowingIds } from \"../followingsSectionSlice\";\r\nimport Following from \"../Following/Following\";\r\n\r\nexport default function FollowingList(): JSX.Element {\r\n  const followingIds: string[] = useAppSelector(getFollowingIds);\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.fetchFollowings());\r\n  }, []);\r\n\r\n  return (\r\n    <Grid container direction=\"column\" spacing={5}>\r\n      {followingIds.map((id) => (\r\n        <Grid key={id} item xs>\r\n          <Following followingId={id} />\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { actions, getLoading, getSearchText } from \"../followingsSectionSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport Progress from \"components/Progress/Progress\";\r\n\r\ninterface FollowingsSearchProps {}\r\n\r\nexport default function FollowingsSearch(props: FollowingsSearchProps) {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const searchText = useAppSelector(getSearchText);\r\n\r\n  const loading = useAppSelector(getLoading);\r\n\r\n  function handleOnChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    dispatch(actions.changeSearchText(event.target.value));\r\n  }\r\n\r\n  return (\r\n    <TextField\r\n      name=\"searchText\"\r\n      placeholder=\"Search by followings...\"\r\n      variant=\"outlined\"\r\n      value={searchText}\r\n      onChange={handleOnChange}\r\n      InputProps={{\r\n        endAdornment: <>{loading && <Progress size={20} />}</>,\r\n      }}\r\n      fullWidth\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport FollowingList from \"./FollowingList/FollowingList\";\r\nimport FollowingsSearch from \"./FollowingsSearch/FollowingsSearch\";\r\n\r\nexport default function FollowingsSection(): JSX.Element {\r\n  return (\r\n    <Box display=\"flex\" flexDirection=\"column\">\r\n      <FollowingsSearch />\r\n\r\n      <Box mt={2}>\r\n        <FollowingList />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    avatar: {\r\n      width: theme.spacing(10),\r\n      height: theme.spacing(10),\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Box, Avatar, Typography, Grid, Link, Button } from \"@material-ui/core\";\r\nimport { getUserName } from \"utils/userUtils\";\r\nimport useStyles from \"./useStyles\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { actions, getFollowerInfo, getBlocked } from \"../followersSectionSlice\";\r\nimport { wrap } from \"utils/stringUtils\";\r\nimport FollowerDto from \"model/dto/follower/FollowerDto\";\r\nimport { getIsCurrentUserProfile } from \"pages/Profile/profileSlice\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\ninterface FollowingProps {\r\n  followerId: string;\r\n}\r\n\r\nexport default function Follower({ followerId }: FollowingProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const follower: FollowerDto = useAppSelector((state) =>\r\n    getFollowerInfo(state, followerId),\r\n  );\r\n\r\n  const blocked: boolean = useAppSelector((state) =>\r\n    getBlocked(state, followerId),\r\n  );\r\n\r\n  const isCurrentUserProfile = useAppSelector(getIsCurrentUserProfile);\r\n\r\n  function handleBlockFollower() {\r\n    dispatch(actions.blockFollower(followerId));\r\n  }\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <Box display=\"flex\" justifyContent=\"center\">\r\n        <Avatar className={classes.avatar} src={follower.avatarUrl} />\r\n      </Box>\r\n\r\n      <Box ml={4}>\r\n        <Grid container direction=\"column\" spacing={1}>\r\n          <Grid item xs>\r\n            <NavLink to={follower.followerId}>\r\n              <Link>{getUserName(follower)}</Link>\r\n            </NavLink>\r\n          </Grid>\r\n\r\n          <Grid item xs>\r\n            <Typography variant=\"body2\">\r\n              {!!follower.status && wrap(follower.status, 50)}\r\n            </Typography>\r\n          </Grid>\r\n\r\n          <Grid item xs>\r\n            {isCurrentUserProfile &&\r\n              (blocked ? (\r\n                <Typography variant=\"body2\" color=\"textSecondary\">\r\n                  user was blocked\r\n                </Typography>\r\n              ) : (\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  style={{ textTransform: \"none\" }}\r\n                  onClick={handleBlockFollower}\r\n                >\r\n                  Block\r\n                </Button>\r\n              ))}\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { actions, getFollowerIds } from \"../followersSectionSlice\";\r\nimport Follower from \"../Follower/Follower\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\n\r\nexport default function FollowerList(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const followerIds: string[] = useAppSelector(getFollowerIds);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.fetchFollowers());\r\n  }, []);\r\n\r\n  return (\r\n    <Grid container direction=\"column\" spacing={5}>\r\n      {followerIds.map((id) => (\r\n        <Grid key={id} item xs>\r\n          <Follower followerId={id} />\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { actions, getLoading, getSearchText } from \"../followersSectionSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport Progress from \"components/Progress/Progress\";\r\n\r\ninterface FollowersSearchProps {}\r\n\r\nexport default function FollowersSearch(props: FollowersSearchProps) {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const searchText = useAppSelector(getSearchText);\r\n\r\n  const loading = useAppSelector(getLoading);\r\n\r\n  function handleOnChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    dispatch(actions.changeSearchText(event.target.value));\r\n  }\r\n\r\n  return (\r\n    <TextField\r\n      name=\"searchText\"\r\n      placeholder=\"Search by followers...\"\r\n      variant=\"outlined\"\r\n      value={searchText}\r\n      onChange={handleOnChange}\r\n      InputProps={{\r\n        endAdornment: <>{loading && <Progress size={20} />}</>,\r\n      }}\r\n      fullWidth\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport FollowerList from \"./FollowerList/FollowerList\";\r\nimport FollowersSearch from \"./FollowersSearch/FollowersSearch\";\r\n\r\nexport default function FollowersSection(): JSX.Element {\r\n  return (\r\n    <Box display=\"flex\" flexDirection=\"column\">\r\n      <FollowersSearch />\r\n\r\n      <Box mt={2}>\r\n        <FollowerList />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport PostList from \"components/PostList/PostList\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { getProfile } from \"pages/Profile/profileSlice\";\r\n\r\nexport default function PostsSection(): JSX.Element {\r\n  const userId = useAppSelector((state) => getProfile(state).userId);\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n      <PostList userId={userId} />\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Box, Paper, Tabs, Tab } from \"@material-ui/core\";\r\n\r\nimport TabPanel from \"components/TabPanel/TabPanel\";\r\nimport FollowingsSection from \"./FollowingsSection/FollowingsSection\";\r\nimport FollowersSection from \"./FollowersSection/FollowersSection\";\r\nimport PostsSection from \"./PostsSection/PostsSection\";\r\n\r\nconst tabs = [\"POSTS\", \"FOLLOWINGS\", \"FOLLOWERS\"];\r\n\r\nexport default function ProfileSections() {\r\n  const [currentTab, setCurrentTab] = React.useState(0);\r\n\r\n  return (\r\n    <div>\r\n      <Paper style={{ width: \"100%\" }}>\r\n        <Tabs\r\n          value={currentTab}\r\n          onChange={(_, tab: number) => setCurrentTab(tab)}\r\n          variant=\"fullWidth\"\r\n        >\r\n          {tabs.map((x) => (\r\n            <Tab key={x} label={x} />\r\n          ))}\r\n        </Tabs>\r\n      </Paper>\r\n\r\n      <TabPanel value={currentTab} index={0}>\r\n        <Box py={2}>\r\n          <PostsSection />\r\n        </Box>\r\n      </TabPanel>\r\n\r\n      <TabPanel value={currentTab} index={1}>\r\n        <Box py={2}>\r\n          <FollowingsSection />\r\n        </Box>\r\n      </TabPanel>\r\n\r\n      <TabPanel value={currentTab} index={2}>\r\n        <Box py={2}>\r\n          <FollowersSection />\r\n        </Box>\r\n      </TabPanel>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Container,\r\n  Box,\r\n  Paper,\r\n  Divider,\r\n  Link,\r\n  Collapse,\r\n} from \"@material-ui/core\";\r\n\r\nimport Header from \"components/Header/Header\";\r\nimport AdditionalInfo from \"./AdditionalInfo/AdditionalInfo\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { actions, getLoaded as getLoaded } from \"./profileSlice\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport PageProgress from \"components/PageProgress/PageProgress\";\r\nimport MainInfo from \"./MainInfo/MainInfo\";\r\nimport Status from \"./Status/Status\";\r\nimport ProfileSections from \"./ProfileSections/ProfileSections\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\ninterface ProfileParams {\r\n  userId: string;\r\n}\r\n\r\nexport default function Profile() {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const history = useHistory();\r\n\r\n  const { userId } = useParams<ProfileParams>();\r\n\r\n  const loaded = useAppSelector(getLoaded);\r\n\r\n  React.useEffect(() => {\r\n    if (!loaded) {\r\n      dispatch(actions.fetchProfile(userId));\r\n    }\r\n  }, [userId, loaded]);\r\n\r\n  // TODO: not fires when using backward/forward arrows inside browser window\r\n  React.useEffect(() => history.listen(() => dispatch(actions.reset())), []);\r\n\r\n  return loaded ? <PageContent /> : <PageProgress />;\r\n}\r\n\r\nfunction PageContent(): JSX.Element {\r\n  const [showInfo, setShowInfo] = React.useState(false);\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n\r\n      <Box mt={12}>\r\n        <Container maxWidth=\"sm\">\r\n          <Paper>\r\n            <Box display=\"flex\" flexDirection=\"column\" px={3} pt={6}>\r\n              <MainInfo />\r\n\r\n              <Box mt={2}>\r\n                <Divider />\r\n              </Box>\r\n\r\n              <Status />\r\n\r\n              <Box my={1}>\r\n                <Link\r\n                  style={{ cursor: \"pointer\" }}\r\n                  onClick={() => setShowInfo(!showInfo)}\r\n                >\r\n                  {showInfo ? \"Hide\" : \"Show\"} more information\r\n                </Link>\r\n              </Box>\r\n\r\n              <Collapse in={showInfo}>\r\n                <Box mt={1}>\r\n                  <AdditionalInfo />\r\n                </Box>\r\n              </Collapse>\r\n\r\n              <Box display=\"flex\" justifyContent=\"center\" mt={2}>\r\n                <ProfileSections />\r\n              </Box>\r\n            </Box>\r\n          </Paper>\r\n        </Container>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    avatar: {\r\n      width: theme.spacing(25),\r\n      height: theme.spacing(25),\r\n    },\r\n    avatarIcon: {\r\n      width: theme.spacing(10),\r\n      height: theme.spacing(10),\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nexport default function Title(): JSX.Element {\r\n  return (\r\n    <Typography\r\n      style={{ textTransform: \"uppercase\" }}\r\n      variant=\"h4\"\r\n      color=\"primary\"\r\n    >\r\n      edit profile\r\n    </Typography>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Container,\r\n  Box,\r\n  Paper,\r\n  Button,\r\n  TextField,\r\n  Avatar,\r\n} from \"@material-ui/core\";\r\nimport { CloudUpload } from \"@material-ui/icons\";\r\n\r\nimport Header from \"components/Header/Header\";\r\nimport { useFormik } from \"formik\";\r\nimport useStyles from \"./useStyles\";\r\nimport Title from \"./Title/Title\";\r\nimport {\r\n  actions,\r\n  getIsSubmitting,\r\n  getSubmitted,\r\n  getLoaded,\r\n  getProfile,\r\n} from \"./profileEditorSlice\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport PageProgress from \"components/PageProgress/PageProgress\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport UserProfileEditDto from \"model/dto/userProfile/UserProfileEditDto\";\r\nimport * as yup from \"yup\";\r\nimport { Redirect, useHistory, useLocation } from \"react-router-dom\";\r\nimport { PhotoCameraOutlined } from \"@material-ui/icons\";\r\nimport moment from \"moment\";\r\n\r\nconst SPACING = 2;\r\n\r\ninterface ProfileEditorLocationState {\r\n  profileId: string;\r\n}\r\n\r\nconst today = format();\r\n\r\nfunction format(date?: string) {\r\n  return moment(date).format(\"YYYY-MM-DD\");\r\n}\r\n\r\nconst validationSchema = yup.object({\r\n  firstName: yup.string().trim().required(\"Required\").max(50),\r\n  lastName: yup.string().trim().required(\"Required\").max(50),\r\n  dateOfBirth: yup.date().required(\"Required\").max(today),\r\n  avatarUrl: yup.string().notRequired(),\r\n  about: yup.string().notRequired().max(800),\r\n});\r\n\r\nexport default function ProfileEditor(): JSX.Element {\r\n  const { state } = useLocation<ProfileEditorLocationState>();\r\n\r\n  if (!state) {\r\n    return <Redirect to=\"*\" />;\r\n  }\r\n\r\n  const { profileId } = state;\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const loaded = useAppSelector(getLoaded);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(actions.fetchProfile(profileId));\r\n  }, [profileId]);\r\n\r\n  return loaded ? <PageContent /> : <PageProgress />;\r\n}\r\n\r\nfunction PageContent(): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const history = useHistory();\r\n\r\n  const profile = useAppSelector(getProfile);\r\n\r\n  const initialValues: UserProfileEditDto = {\r\n    ...profile,\r\n    dateOfBirth: format(profile.dateOfBirth),\r\n  };\r\n\r\n  const isSubmitting = useAppSelector(getIsSubmitting);\r\n\r\n  const submitted = useAppSelector(getSubmitted);\r\n\r\n  React.useEffect(() => {\r\n    if (submitted) {\r\n      history.goBack();\r\n      dispatch(actions.reset());\r\n    }\r\n  }, [submitted]);\r\n\r\n  const { values, touched, errors, dirty, isValid, ...formik } = useFormik({\r\n    initialValues,\r\n    validationSchema,\r\n    onSubmit() {\r\n      dispatch(actions.saveProfile(values));\r\n    },\r\n  });\r\n\r\n  function handleFileUpload(event: React.ChangeEvent<HTMLInputElement>) {\r\n    const file: File | undefined = event.target.files?.[0];\r\n    if (file) {\r\n      formik.setFieldValue(\"avatarUrl\", URL.createObjectURL(file));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n\r\n      <Box mt={12}>\r\n        <Container maxWidth=\"sm\">\r\n          <Paper>\r\n            <Box display=\"flex\" justifyContent=\"center\" p={6}>\r\n              <Title />\r\n            </Box>\r\n\r\n            <Box display=\"flex\" justifyContent=\"center\">\r\n              <Avatar className={classes.avatar} src={values.avatarUrl}>\r\n                <PhotoCameraOutlined className={classes.avatarIcon} />\r\n              </Avatar>\r\n            </Box>\r\n\r\n            <Box display=\"flex\" justifyContent=\"center\" mt={2}>\r\n              <input\r\n                id=\"upload-image\"\r\n                form=\"form\"\r\n                type=\"file\"\r\n                accept=\"image/png\"\r\n                style={{ display: \"none\" }}\r\n                onChange={handleFileUpload}\r\n              />\r\n\r\n              <label htmlFor=\"upload-image\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  component=\"span\"\r\n                  startIcon={<CloudUpload />}\r\n                >\r\n                  upload image\r\n                </Button>\r\n              </label>\r\n            </Box>\r\n\r\n            <Box mt={2}>\r\n              <form\r\n                id=\"form\"\r\n                autoComplete=\"off\"\r\n                onSubmit={formik.handleSubmit}\r\n                onReset={formik.handleReset}\r\n              >\r\n                <Box display=\"flex\" flexDirection=\"column\" p={2}>\r\n                  <TextField\r\n                    id=\"firstName\"\r\n                    label=\"First name\"\r\n                    variant=\"outlined\"\r\n                    value={values.firstName}\r\n                    helperText={touched.firstName && errors.firstName}\r\n                    error={touched.firstName && !!errors.firstName}\r\n                    disabled={isSubmitting}\r\n                    onChange={formik.handleChange}\r\n                    onBlur={formik.handleBlur}\r\n                    fullWidth\r\n                  />\r\n\r\n                  <Box mt={SPACING}>\r\n                    <TextField\r\n                      id=\"lastName\"\r\n                      label=\"Last name\"\r\n                      variant=\"outlined\"\r\n                      value={values.lastName}\r\n                      helperText={touched.lastName && errors.lastName}\r\n                      error={touched.lastName && !!errors.lastName}\r\n                      disabled={isSubmitting}\r\n                      onChange={formik.handleChange}\r\n                      onBlur={formik.handleBlur}\r\n                      fullWidth\r\n                    />\r\n                  </Box>\r\n\r\n                  <Box mt={SPACING}>\r\n                    <TextField\r\n                      id=\"dateOfBirth\"\r\n                      label=\"Date of birth\"\r\n                      type=\"date\"\r\n                      variant=\"outlined\"\r\n                      value={values.dateOfBirth}\r\n                      helperText={touched.dateOfBirth && errors.dateOfBirth}\r\n                      error={touched.dateOfBirth && !!errors.dateOfBirth}\r\n                      disabled={isSubmitting}\r\n                      onChange={formik.handleChange}\r\n                      onBlur={formik.handleBlur}\r\n                      InputLabelProps={{\r\n                        shrink: true,\r\n                      }}\r\n                      fullWidth\r\n                    />\r\n                  </Box>\r\n\r\n                  <Box mt={SPACING}>\r\n                    <TextField\r\n                      id=\"about\"\r\n                      label=\"About\"\r\n                      variant=\"outlined\"\r\n                      rowsMax={10}\r\n                      value={values.about}\r\n                      helperText={touched.about && errors.about}\r\n                      error={touched.about && !!errors.about}\r\n                      disabled={isSubmitting}\r\n                      onChange={formik.handleChange}\r\n                      onBlur={formik.handleBlur}\r\n                      multiline\r\n                      fullWidth\r\n                    />\r\n                  </Box>\r\n\r\n                  <Box display=\"flex\" justifyContent=\"flex-end\" mt={2}>\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      color=\"primary\"\r\n                      disabled={isSubmitting}\r\n                      onClick={() => history.goBack()}\r\n                    >\r\n                      cancel\r\n                    </Button>\r\n\r\n                    <Box ml={1}>\r\n                      <Button\r\n                        type=\"submit\"\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={!(dirty && isValid && !isSubmitting)}\r\n                      >\r\n                        save\r\n                      </Button>\r\n                    </Box>\r\n                  </Box>\r\n                </Box>\r\n              </form>\r\n            </Box>\r\n          </Paper>\r\n        </Container>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Container,\r\n  Box,\r\n  Paper,\r\n  Button,\r\n  Avatar,\r\n  Divider,\r\n  IconButton,\r\n  FormControlLabel,\r\n  Checkbox,\r\n  TextField,\r\n  Typography,\r\n  Collapse,\r\n  Tabs,\r\n  Link,\r\n  Tab,\r\n} from \"@material-ui/core\";\r\n\r\nexport default function Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\">\r\n      {\"Copyright © \"}\r\n      <Link color=\"inherit\">Social Media App</Link>\r\n      {` ${new Date().getFullYear()}.`}\r\n    </Typography>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { IconButton, TextField } from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\n\r\nexport default function PasswordField(\r\n  props: React.ComponentProps<typeof TextField>,\r\n) {\r\n  const [showPassword, setShowPassword] = React.useState(false);\r\n\r\n  return (\r\n    <TextField\r\n      autoComplete=\"current-password\"\r\n      variant=\"outlined\"\r\n      {...props}\r\n      type={showPassword ? \"text\" : \"password\"}\r\n      InputProps={{\r\n        ...props.InputProps,\r\n        endAdornment: (\r\n          <IconButton edge=\"end\" onClick={() => setShowPassword(!showPassword)}>\r\n            {showPassword ? <Visibility /> : <VisibilityOff />}\r\n          </IconButton>\r\n        ),\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    link: {\r\n      \"&:hover\": {\r\n        cursor: \"pointer\",\r\n      },\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import { Box, Typography, Link } from \"@material-ui/core\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\n\r\nimport useStyles from \"./useStyles\";\r\n\r\nexport default function Links() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"space-between\">\r\n      <Link className={classes.link}>\r\n        <Typography variant=\"body2\">Forgot password?</Typography>\r\n      </Link>\r\n\r\n      <NavLink to=\"/registration\">\r\n        <Link className={classes.link}>\r\n          <Typography variant=\"body2\">Sign up</Typography>\r\n        </Link>\r\n      </NavLink>\r\n    </Box>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n    header: {\r\n      textTransform: \"capitalize\",\r\n    },\r\n    avatar: {\r\n      backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    icon: {\r\n      color: theme.palette.common.white,\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport {\r\n  Container,\r\n  Box,\r\n  Button,\r\n  Avatar,\r\n  FormControlLabel,\r\n  Checkbox,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { LockOutlined } from \"@material-ui/icons\";\r\nimport { Formik, Form } from \"formik\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport Copyright from \"components/Copyright/Copyright\";\r\nimport PasswordField from \"components/PasswordField/PasswordField\";\r\nimport Links from \"./Links/Links\";\r\nimport useStyles from \"./useStyles\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { actions, getErrors, getIsSubmitting } from \"./loginSlice\";\r\nimport * as yup from \"yup\";\r\nimport LoginVm from \"model/login/loginVm\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nconst SPACING = 2;\r\n\r\ntype FormValues = LoginVm & {\r\n  rememberMe: boolean;\r\n};\r\n\r\nconst initialValues: FormValues = {\r\n  email: \"\",\r\n  password: \"\",\r\n  rememberMe: false,\r\n};\r\n\r\nconst validationSchema = yup.object({\r\n  email: yup.string().trim().required(\"Required\"),\r\n  password: yup.string().trim().required(\"Required\"),\r\n});\r\n\r\ninterface LoginLocationState {\r\n  from?: Location;\r\n}\r\n\r\nexport default function Login(): JSX.Element {\r\n  const classes = useStyles();\r\n  const dispatch = useAppDispatch();\r\n  const location = useLocation<LoginLocationState>();\r\n  const history = useHistory();\r\n\r\n  const isSubmitting = useAppSelector(getIsSubmitting);\r\n  const isLoggedIn = useAppSelector((state) => !!getUser(state));\r\n  const errors = useAppSelector(getErrors);\r\n\r\n  React.useEffect(() => {\r\n    if (isLoggedIn) {\r\n      history.replace(location.state?.from ?? \"/\");\r\n      return () => {\r\n        dispatch(actions.loginSucceed());\r\n      };\r\n    }\r\n  }, [isLoggedIn, history, location]);\r\n\r\n  React.useEffect(() => history.listen(() => dispatch(actions.reset())), []);\r\n\r\n  function handleSubmit(values: LoginVm) {\r\n    dispatch(actions.login(values));\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Container maxWidth=\"xs\">\r\n        <Box display=\"flex\" justifyContent=\"center\" mt={10}>\r\n          <Avatar className={classes.avatar}>\r\n            <LockOutlined className={classes.icon} />\r\n          </Avatar>\r\n        </Box>\r\n\r\n        <Box display=\"flex\" justifyContent=\"center\" mt={SPACING}>\r\n          <Typography className={classes.header} variant=\"h5\">\r\n            sign in\r\n          </Typography>\r\n        </Box>\r\n\r\n        {!!errors.length && (\r\n          <Box mt={SPACING}>\r\n            {errors.map((error) => (\r\n              <Alert severity=\"error\" style={{ width: \"100%\" }}>\r\n                {error}\r\n              </Alert>\r\n            ))}\r\n          </Box>\r\n        )}\r\n\r\n        <Box mt={SPACING}>\r\n          <Formik\r\n            initialValues={initialValues}\r\n            validationSchema={validationSchema}\r\n            onSubmit={handleSubmit}\r\n          >\r\n            {({ values, touched, errors, handleChange, handleBlur }) => (\r\n              <Form>\r\n                <TextField\r\n                  id=\"email\"\r\n                  label=\"Email\"\r\n                  variant=\"outlined\"\r\n                  value={values.email}\r\n                  helperText={touched.email && !!errors.email}\r\n                  error={touched.email && !!errors.email}\r\n                  disabled={isSubmitting}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  fullWidth\r\n                />\r\n\r\n                <Box mt={SPACING}>\r\n                  <PasswordField\r\n                    id=\"password\"\r\n                    label=\"Password\"\r\n                    value={values.password}\r\n                    helperText={touched.password && !!errors.password}\r\n                    error={touched.password && !!errors.password}\r\n                    disabled={isSubmitting}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    fullWidth\r\n                  />\r\n                </Box>\r\n\r\n                <Box mt={SPACING}>\r\n                  <FormControlLabel\r\n                    id=\"rememberMe\"\r\n                    label=\"Remember me\"\r\n                    control={<Checkbox />}\r\n                    value={values.rememberMe}\r\n                    disabled={isSubmitting}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                  />\r\n                </Box>\r\n\r\n                <Box mt={SPACING}>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disabled={isSubmitting}\r\n                    fullWidth\r\n                  >\r\n                    sign in\r\n                  </Button>\r\n                </Box>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n        </Box>\r\n\r\n        <Box mt={2}>\r\n          <Links />\r\n        </Box>\r\n\r\n        <Box display=\"flex\" justifyContent=\"center\" mt={6}>\r\n          <Copyright />\r\n        </Box>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      backgroundColor: theme.palette.background.paper,\r\n      height: \"100%\",\r\n      background: theme.palette.background.paper,\r\n    },\r\n    header: {\r\n      textTransform: \"capitalize\",\r\n    },\r\n    avatar: {\r\n      backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    icon: {\r\n      color: theme.palette.common.white,\r\n    },\r\n    link: {\r\n      \"&:hover\": {\r\n        cursor: \"pointer\",\r\n      },\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import React from \"react\";\r\nimport {\r\n  Container,\r\n  Box,\r\n  Grid,\r\n  Button,\r\n  Avatar,\r\n  Link,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { LockOutlined } from \"@material-ui/icons\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport { Formik, Form } from \"formik\";\r\n\r\nimport Copyright from \"components/Copyright/Copyright\";\r\nimport PasswordField from \"components/PasswordField/PasswordField\";\r\nimport useStyles from \"./useStyles\";\r\nimport moment from \"moment\";\r\n\r\nimport * as yup from \"yup\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport useAppDispatch from \"hooks/useAppDispatch\";\r\nimport { actions, getErrors, getIsSubmitting } from \"./registrationSlice\";\r\nimport RegistrationVm from \"model/registration/registrationVm\";\r\nimport NavLink from \"components/NavLink/NavLink\";\r\nimport { getUser } from \"redux/commonSlice\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst SPACING = 2;\r\n\r\ntype FormValues = RegistrationVm & {\r\n  passwordConfirm: string;\r\n};\r\n\r\nconst initialValues: FormValues = {\r\n  firstName: \"\",\r\n  lastName: \"\",\r\n  email: \"\",\r\n  dateOfBirth: \"\",\r\n  password: \"\",\r\n  passwordConfirm: \"\",\r\n};\r\n\r\nconst today = moment().format(\"YYYY-MM-DD\");\r\n\r\nconst validationSchema = yup.object({\r\n  firstName: yup.string().trim().required(\"Required\").max(50),\r\n  lastName: yup.string().trim().required(\"Required\").max(50),\r\n  dateOfBirth: yup.date().required(\"Required\").max(today),\r\n  email: yup.string().trim().required(\"Required\"),\r\n  password: yup.string().trim().required(\"Required\"),\r\n  passwordConfirm: yup\r\n    .string()\r\n    .trim()\r\n    .required(\"Required\")\r\n    .oneOf([yup.ref(\"password\"), \"\"], \"Passwords don't match\"),\r\n});\r\n\r\nexport default function Registration(): JSX.Element {\r\n  const classes = useStyles();\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const isSubmitting = useAppSelector(getIsSubmitting);\r\n  const isLoggedIn = useAppSelector((state) => !!getUser(state));\r\n  const errors = useAppSelector(getErrors);\r\n\r\n  React.useEffect(() => {\r\n    if (isLoggedIn) {\r\n      history.push(\"/\");\r\n      return () => {\r\n        dispatch(actions.registerUserSucceed());\r\n      };\r\n    }\r\n  }, [isLoggedIn, history]);\r\n\r\n  function handleSubmit(values: FormValues) {\r\n    dispatch(actions.registerUser(values));\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Container maxWidth=\"xs\">\r\n        <Box display=\"flex\" justifyContent=\"center\">\r\n          <Avatar className={classes.avatar}>\r\n            <LockOutlined className={classes.icon} />\r\n          </Avatar>\r\n        </Box>\r\n\r\n        <Box display=\"flex\" justifyContent=\"center\" mt={SPACING}>\r\n          <Typography className={classes.header} variant=\"h5\">\r\n            sign up\r\n          </Typography>\r\n        </Box>\r\n\r\n        {!!errors.length && (\r\n          <Box mt={SPACING}>\r\n            {errors.map((error) => (\r\n              <Alert severity=\"error\" style={{ width: \"100%\" }}>\r\n                {error}\r\n              </Alert>\r\n            ))}\r\n          </Box>\r\n        )}\r\n\r\n        <Box mt={SPACING}>\r\n          <Formik\r\n            initialValues={initialValues}\r\n            validationSchema={validationSchema}\r\n            onSubmit={handleSubmit}\r\n          >\r\n            {({ values, touched, errors, handleChange, handleBlur }) => (\r\n              <Form autoComplete=\"off\">\r\n                <Grid container spacing={SPACING}>\r\n                  <Grid item xs>\r\n                    <TextField\r\n                      id=\"firstName\"\r\n                      label=\"First name\"\r\n                      variant=\"outlined\"\r\n                      value={values.firstName}\r\n                      helperText={touched.firstName && errors.firstName}\r\n                      error={touched.firstName && !!errors.firstName}\r\n                      disabled={isSubmitting}\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs>\r\n                    <TextField\r\n                      id=\"lastName\"\r\n                      label=\"Last name\"\r\n                      variant=\"outlined\"\r\n                      value={values.lastName}\r\n                      helperText={touched.lastName && errors.lastName}\r\n                      error={touched.lastName && !!errors.lastName}\r\n                      disabled={isSubmitting}\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Box mt={SPACING}>\r\n                  <TextField\r\n                    id=\"dateOfBirth\"\r\n                    label=\"Date of birth\"\r\n                    type=\"date\"\r\n                    variant=\"outlined\"\r\n                    value={values.dateOfBirth}\r\n                    helperText={touched.dateOfBirth && errors.dateOfBirth}\r\n                    error={touched.dateOfBirth && !!errors.dateOfBirth}\r\n                    disabled={isSubmitting}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                    fullWidth\r\n                  />\r\n                </Box>\r\n\r\n                <Box mt={SPACING}>\r\n                  <TextField\r\n                    id=\"email\"\r\n                    label=\"Email\"\r\n                    variant=\"outlined\"\r\n                    value={values.email}\r\n                    helperText={touched.email && errors.email}\r\n                    error={touched.email && !!errors.email}\r\n                    disabled={isSubmitting}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    fullWidth\r\n                  />\r\n                </Box>\r\n\r\n                <Box mt={SPACING}>\r\n                  <PasswordField\r\n                    id=\"password\"\r\n                    label=\"Password\"\r\n                    variant=\"outlined\"\r\n                    value={values.password}\r\n                    helperText={touched.password && errors.password}\r\n                    error={touched.password && !!errors.password}\r\n                    disabled={isSubmitting}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    fullWidth\r\n                  />\r\n                </Box>\r\n\r\n                <Box mt={SPACING}>\r\n                  <PasswordField\r\n                    id=\"passwordConfirm\"\r\n                    label=\"Repeat password\"\r\n                    variant=\"outlined\"\r\n                    value={values.passwordConfirm}\r\n                    helperText={\r\n                      touched.passwordConfirm && errors.passwordConfirm\r\n                    }\r\n                    error={touched.passwordConfirm && !!errors.passwordConfirm}\r\n                    disabled={isSubmitting}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    fullWidth\r\n                  />\r\n                </Box>\r\n\r\n                <Box mt={SPACING}>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disabled={isSubmitting}\r\n                    fullWidth\r\n                  >\r\n                    sign up\r\n                  </Button>\r\n                </Box>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n        </Box>\r\n\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" mt={SPACING}>\r\n          <NavLink to=\"/login\">\r\n            <Link className={classes.link}>\r\n              <Typography variant=\"body2\">\r\n                Already have an account? Sign in\r\n              </Typography>\r\n            </Link>\r\n          </NavLink>\r\n        </Box>\r\n\r\n        <Box display=\"flex\" justifyContent=\"center\" mt={6}>\r\n          <Copyright />\r\n        </Box>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    page: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      height: \"100vh\",\r\n      textAlign: \"center\",\r\n    },\r\n    title: {\r\n      fontSize: \"5rem\",\r\n      textTransform: \"uppercase\",\r\n    },\r\n    link: {\r\n      textDecoration: \"inherit\",\r\n      marginTop: theme.spacing(4),\r\n      color: theme.palette.primary.main,\r\n    },\r\n  }),\r\n);\r\n\r\nexport default useStyles;\r\n","import Home from \"pages/Home/Home\";\r\nimport Profile from \"pages/Profile/Profile\";\r\nimport ProfileEditor from \"pages/ProfileEditor/ProfileEditor\";\r\nimport Login from \"pages/Login/Login\";\r\nimport Registration from \"pages/Registration/Registration\";\r\nimport NotFound from \"pages/NotFound/NotFound\";\r\n\r\ninterface Route {\r\n  path: string;\r\n  component: React.ComponentType<any>;\r\n  protected?: boolean;\r\n  exact?: boolean;\r\n}\r\n\r\nconst routes: Route[] = [\r\n  {\r\n    path: \"/login\",\r\n    component: Login,\r\n    exact: true,\r\n  },\r\n  {\r\n    path: \"/registration\",\r\n    component: Registration,\r\n    exact: true,\r\n  },\r\n  {\r\n    path: \"/\",\r\n    component: Home,\r\n    exact: true,\r\n    protected: true,\r\n  },\r\n  {\r\n    path: \"/:userId\",\r\n    component: Profile,\r\n    protected: true,\r\n    exact: true,\r\n  },\r\n  {\r\n    path: \"/:userId/edit\",\r\n    component: ProfileEditor,\r\n    protected: true,\r\n    exact: true,\r\n  },\r\n  {\r\n    path: \"*\",\r\n    component: NotFound,\r\n  },\r\n];\r\n\r\nexport default routes;\r\n","import React from \"react\";\r\nimport { Grid, Box } from \"@material-ui/core\";\r\nimport Header from \"components/Header/Header\";\r\nimport PostList from \"../../components/PostList/PostList\";\r\nimport PostForm from \"./PostForm/PostForm\";\r\nimport UserList from \"./UserList/UserList\";\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\nexport default function Home(): JSX.Element {\r\n  const userId = useAppSelector((state) => getUser(state).id);\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n\r\n      <Box padding={10}>\r\n        <Grid container spacing={10}>\r\n          <Grid item container direction=\"column\" xs={6} spacing={2}>\r\n            <Grid item xs>\r\n              <PostForm />\r\n            </Grid>\r\n\r\n            <Grid item xs>\r\n              <PostList userId={userId} />\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Grid item xs={6}>\r\n            <UserList />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n","import { Link } from \"react-router-dom\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport useStyles from \"./useStyles\";\r\n\r\nexport default function NotFound(): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box className={classes.page}>\r\n      <Typography className={classes.title} variant=\"h1\">\r\n        not found\r\n      </Typography>\r\n\r\n      <Link className={classes.link} to=\"/\">\r\n        <Typography>back to homepage</Typography>\r\n      </Link>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nimport useAppSelector from \"hooks/useAppSelector\";\r\nimport { getUser } from \"redux/commonSlice\";\r\n\r\ntype ProtectedRouteProps = React.ComponentProps<typeof Route>;\r\n\r\nexport default function ProtectedRoute({\r\n  children,\r\n  ...routeProps\r\n}: ProtectedRouteProps): JSX.Element {\r\n  const isLoggedIn = useAppSelector((state) => !!getUser(state));\r\n\r\n  return (\r\n    <Route\r\n      {...routeProps}\r\n      render={(props) =>\r\n        isLoggedIn ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            {...props}\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: {\r\n                from: location.pathname,\r\n              },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CssBaseline } from \"@material-ui/core\";\r\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport routes from \"routes\";\r\nimport ProtectedRoute from \"components/ProtectedRoute/ProtectedRoute\";\r\n\r\nfunction App(): JSX.Element {\r\n  return (\r\n    <Router>\r\n      <CssBaseline />\r\n\r\n      <Switch>\r\n        {routes.map((route, i) =>\r\n          route.protected ? (\r\n            <ProtectedRoute key={i} path={route.path} exact={route.exact}>\r\n              <route.component />\r\n            </ProtectedRoute>\r\n          ) : (\r\n            <Route key={i} path={route.path} exact={route.exact}>\r\n              <route.component />\r\n            </Route>\r\n          ),\r\n        )}\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\n\nimport store from \"redux/store\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n"],"sourceRoot":""}